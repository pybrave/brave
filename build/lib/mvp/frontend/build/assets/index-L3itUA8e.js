import{K as ve,s as Xe,t as Je,v as G,w as jt,C as St,x as Qe,y as Ct,r as s,z as ke,A as Ze,B as _,R,D as wt,E as $t,o as kt,F as It,G as je,H as _t,l as Ee,I as Ae,h as H,m as ze,J as Fe,L as He,P as Ot,M as et,S as Pt,N as Nt,O as Ft,Q as Et,T as qe,U as Mt,V as Lt,j as e,u as z,a as D}from"./index-01VgbQhG.js";import{N as Rt,u as Tt,a as Dt,A as Bt,T as Ce,R as U}from"./index-MU_3aXF1.js";import{e as At,f as zt,g as Ht,h as qt,i as Gt,p as Me,j as Vt,F as $,B,I as E,S as Z,d as tt,R as J,C as M,a as pe,c as le,T as Ie}from"./Table-CvEpiXur.js";import{u as Wt,p as Ge,a as Ut,M as K}from"./index-CEBaaneA.js";import{I as L}from"./index-BvHRdwnV.js";const Kt=t=>{const{componentCls:a,notificationMarginEdge:o,animationMaxHeight:n}=t,l=`${a}-notice`,i=new ve("antNotificationFadeIn",{"0%":{transform:"translate3d(100%, 0, 0)",opacity:0},"100%":{transform:"translate3d(0, 0, 0)",opacity:1}}),c=new ve("antNotificationTopFadeIn",{"0%":{top:-n,opacity:0},"100%":{top:0,opacity:1}}),r=new ve("antNotificationBottomFadeIn",{"0%":{bottom:t.calc(n).mul(-1).equal(),opacity:0},"100%":{bottom:0,opacity:1}}),d=new ve("antNotificationLeftFadeIn",{"0%":{transform:"translate3d(-100%, 0, 0)",opacity:0},"100%":{transform:"translate3d(0, 0, 0)",opacity:1}});return{[a]:{[`&${a}-top, &${a}-bottom`]:{marginInline:0,[l]:{marginInline:"auto auto"}},[`&${a}-top`]:{[`${a}-fade-enter${a}-fade-enter-active, ${a}-fade-appear${a}-fade-appear-active`]:{animationName:c}},[`&${a}-bottom`]:{[`${a}-fade-enter${a}-fade-enter-active, ${a}-fade-appear${a}-fade-appear-active`]:{animationName:r}},[`&${a}-topRight, &${a}-bottomRight`]:{[`${a}-fade-enter${a}-fade-enter-active, ${a}-fade-appear${a}-fade-appear-active`]:{animationName:i}},[`&${a}-topLeft, &${a}-bottomLeft`]:{marginRight:{value:0,_skip_check_:!0},marginLeft:{value:o,_skip_check_:!0},[l]:{marginInlineEnd:"auto",marginInlineStart:0},[`${a}-fade-enter${a}-fade-enter-active, ${a}-fade-appear${a}-fade-appear-active`]:{animationName:d}}}}},Yt=["top","topLeft","topRight","bottom","bottomLeft","bottomRight"],Xt={topLeft:"left",topRight:"right",bottomLeft:"left",bottomRight:"right",top:"left",bottom:"left"},Jt=(t,a)=>{const{componentCls:o}=t;return{[`${o}-${a}`]:{[`&${o}-stack > ${o}-notice-wrapper`]:{[a.startsWith("top")?"top":"bottom"]:0,[Xt[a]]:{value:0,_skip_check_:!0}}}}},Qt=t=>{const a={};for(let o=1;o<t.notificationStackLayer;o++)a[`&:nth-last-child(${o+1})`]={overflow:"hidden",[`& > ${t.componentCls}-notice`]:{opacity:0,transition:`opacity ${t.motionDurationMid}`}};return Object.assign({[`&:not(:nth-last-child(-n+${t.notificationStackLayer}))`]:{opacity:0,overflow:"hidden",color:"transparent",pointerEvents:"none"}},a)},Zt=t=>{const a={};for(let o=1;o<t.notificationStackLayer;o++)a[`&:nth-last-child(${o+1})`]={background:t.colorBgBlur,backdropFilter:"blur(10px)","-webkit-backdrop-filter":"blur(10px)"};return Object.assign({},a)},ea=t=>{const{componentCls:a}=t;return Object.assign({[`${a}-stack`]:{[`& > ${a}-notice-wrapper`]:Object.assign({transition:`transform ${t.motionDurationSlow}, backdrop-filter 0s`,willChange:"transform, opacity",position:"absolute"},Qt(t))},[`${a}-stack:not(${a}-stack-expanded)`]:{[`& > ${a}-notice-wrapper`]:Object.assign({},Zt(t))},[`${a}-stack${a}-stack-expanded`]:{[`& > ${a}-notice-wrapper`]:{"&:not(:nth-last-child(-n + 1))":{opacity:1,overflow:"unset",color:"inherit",pointerEvents:"auto",[`& > ${t.componentCls}-notice`]:{opacity:1}},"&:after":{content:'""',position:"absolute",height:t.margin,width:"100%",insetInline:0,bottom:t.calc(t.margin).mul(-1).equal(),background:"transparent",pointerEvents:"auto"}}}},Yt.map(o=>Jt(t,o)).reduce((o,n)=>Object.assign(Object.assign({},o),n),{}))},at=t=>{const{iconCls:a,componentCls:o,boxShadow:n,fontSizeLG:l,notificationMarginBottom:i,borderRadiusLG:c,colorSuccess:r,colorInfo:d,colorWarning:x,colorError:v,colorTextHeading:f,notificationBg:C,notificationPadding:b,notificationMarginEdge:S,notificationProgressBg:p,notificationProgressHeight:y,fontSize:g,lineHeight:u,width:m,notificationIconSize:j,colorText:w}=t,h=`${o}-notice`;return{position:"relative",marginBottom:i,marginInlineStart:"auto",background:C,borderRadius:c,boxShadow:n,[h]:{padding:b,width:m,maxWidth:`calc(100vw - ${G(t.calc(S).mul(2).equal())})`,overflow:"hidden",lineHeight:u,wordWrap:"break-word"},[`${h}-message`]:{marginBottom:t.marginXS,color:f,fontSize:l,lineHeight:t.lineHeightLG},[`${h}-description`]:{fontSize:g,color:w},[`${h}-closable ${h}-message`]:{paddingInlineEnd:t.paddingLG},[`${h}-with-icon ${h}-message`]:{marginBottom:t.marginXS,marginInlineStart:t.calc(t.marginSM).add(j).equal(),fontSize:l},[`${h}-with-icon ${h}-description`]:{marginInlineStart:t.calc(t.marginSM).add(j).equal(),fontSize:g},[`${h}-icon`]:{position:"absolute",fontSize:j,lineHeight:1,[`&-success${a}`]:{color:r},[`&-info${a}`]:{color:d},[`&-warning${a}`]:{color:x},[`&-error${a}`]:{color:v}},[`${h}-close`]:Object.assign({position:"absolute",top:t.notificationPaddingVertical,insetInlineEnd:t.notificationPaddingHorizontal,color:t.colorIcon,outline:"none",width:t.notificationCloseButtonSize,height:t.notificationCloseButtonSize,borderRadius:t.borderRadiusSM,transition:`background-color ${t.motionDurationMid}, color ${t.motionDurationMid}`,display:"flex",alignItems:"center",justifyContent:"center",background:"none",border:"none","&:hover":{color:t.colorIconHover,backgroundColor:t.colorBgTextHover},"&:active":{backgroundColor:t.colorBgTextActive}},Qe(t)),[`${h}-progress`]:{position:"absolute",display:"block",appearance:"none",inlineSize:`calc(100% - ${G(c)} * 2)`,left:{_skip_check_:!0,value:c},right:{_skip_check_:!0,value:c},bottom:0,blockSize:y,border:0,"&, &::-webkit-progress-bar":{borderRadius:c,backgroundColor:"rgba(0, 0, 0, 0.04)"},"&::-moz-progress-bar":{background:p},"&::-webkit-progress-value":{borderRadius:c,background:p}},[`${h}-actions`]:{float:"right",marginTop:t.marginSM}}},ta=t=>{const{componentCls:a,notificationMarginBottom:o,notificationMarginEdge:n,motionDurationMid:l,motionEaseInOut:i}=t,c=`${a}-notice`,r=new ve("antNotificationFadeOut",{"0%":{maxHeight:t.animationMaxHeight,marginBottom:o},"100%":{maxHeight:0,marginBottom:0,paddingTop:0,paddingBottom:0,opacity:0}});return[{[a]:Object.assign(Object.assign({},jt(t)),{position:"fixed",zIndex:t.zIndexPopup,marginRight:{value:n,_skip_check_:!0},[`${a}-hook-holder`]:{position:"relative"},[`${a}-fade-appear-prepare`]:{opacity:"0 !important"},[`${a}-fade-enter, ${a}-fade-appear`]:{animationDuration:t.motionDurationMid,animationTimingFunction:i,animationFillMode:"both",opacity:0,animationPlayState:"paused"},[`${a}-fade-leave`]:{animationTimingFunction:i,animationFillMode:"both",animationDuration:l,animationPlayState:"paused"},[`${a}-fade-enter${a}-fade-enter-active, ${a}-fade-appear${a}-fade-appear-active`]:{animationPlayState:"running"},[`${a}-fade-leave${a}-fade-leave-active`]:{animationName:r,animationPlayState:"running"},"&-rtl":{direction:"rtl",[`${c}-actions`]:{float:"left"}}})},{[a]:{[`${c}-wrapper`]:Object.assign({},at(t))}}]},nt=t=>({zIndexPopup:t.zIndexPopupBase+St+50,width:384}),ot=t=>{const a=t.paddingMD,o=t.paddingLG;return Je(t,{notificationBg:t.colorBgElevated,notificationPaddingVertical:a,notificationPaddingHorizontal:o,notificationIconSize:t.calc(t.fontSizeLG).mul(t.lineHeightLG).equal(),notificationCloseButtonSize:t.calc(t.controlHeightLG).mul(.55).equal(),notificationMarginBottom:t.margin,notificationPadding:`${G(t.paddingMD)} ${G(t.paddingContentHorizontalLG)}`,notificationMarginEdge:t.marginLG,animationMaxHeight:150,notificationStackLayer:3,notificationProgressHeight:2,notificationProgressBg:`linear-gradient(90deg, ${t.colorPrimaryBorderHover}, ${t.colorPrimary})`})},st=Xe("Notification",t=>{const a=ot(t);return[ta(a),Kt(a),ea(a)]},nt),aa=Ct(["Notification","PurePanel"],t=>{const a=`${t.componentCls}-notice`,o=ot(t);return{[`${a}-pure-panel`]:Object.assign(Object.assign({},at(o)),{width:o.width,maxWidth:`calc(100vw - ${G(t.calc(o.notificationMarginEdge).mul(2).equal())})`,margin:0})}},nt);var na=function(t,a){var o={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&a.indexOf(n)<0&&(o[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var l=0,n=Object.getOwnPropertySymbols(t);l<n.length;l++)a.indexOf(n[l])<0&&Object.prototype.propertyIsEnumerable.call(t,n[l])&&(o[n[l]]=t[n[l]]);return o};function Le(t,a){return a===null||a===!1?null:a||s.createElement(At,{className:`${t}-close-icon`})}const oa={success:Gt,info:qt,error:Ht,warning:zt},lt=t=>{const{prefixCls:a,icon:o,type:n,message:l,description:i,actions:c,role:r="alert"}=t;let d=null;return o?d=s.createElement("span",{className:`${a}-icon`},o):n&&(d=s.createElement(oa[n]||null,{className:_(`${a}-icon`,`${a}-icon-${n}`)})),s.createElement("div",{className:_({[`${a}-with-icon`]:d}),role:r},d,s.createElement("div",{className:`${a}-message`},l),s.createElement("div",{className:`${a}-description`},i),c&&s.createElement("div",{className:`${a}-actions`},c))},sa=t=>{const{prefixCls:a,className:o,icon:n,type:l,message:i,description:c,btn:r,actions:d,closable:x=!0,closeIcon:v,className:f}=t,C=na(t,["prefixCls","className","icon","type","message","description","btn","actions","closable","closeIcon","className"]),{getPrefixCls:b}=s.useContext(ke),S=d??r,p=a||b("notification"),y=`${p}-notice`,g=Ze(p),[u,m,j]=st(p,g);return u(s.createElement("div",{className:_(`${y}-pure-panel`,m,o,j,g)},s.createElement(aa,{prefixCls:p}),s.createElement(Rt,Object.assign({},C,{prefixCls:p,eventKey:"pure",duration:null,closable:x,className:_({notificationClassName:f}),closeIcon:Le(p,v),content:s.createElement(lt,{prefixCls:y,icon:n,type:l,message:i,description:c,actions:S})}))))};function la(t,a,o){let n;switch(t){case"top":n={left:"50%",transform:"translateX(-50%)",right:"auto",top:a,bottom:"auto"};break;case"topLeft":n={left:0,top:a,bottom:"auto"};break;case"topRight":n={right:0,top:a,bottom:"auto"};break;case"bottom":n={left:"50%",transform:"translateX(-50%)",right:"auto",top:"auto",bottom:o};break;case"bottomLeft":n={left:0,top:"auto",bottom:o};break;default:n={right:0,top:"auto",bottom:o};break}return n}function ia(t){return{motionName:`${t}-fade`}}function ra(t,a,o){return typeof t<"u"?t:typeof(a==null?void 0:a.closeIcon)<"u"?a.closeIcon:o==null?void 0:o.closeIcon}var ca=function(t,a){var o={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&a.indexOf(n)<0&&(o[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var l=0,n=Object.getOwnPropertySymbols(t);l<n.length;l++)a.indexOf(n[l])<0&&Object.prototype.propertyIsEnumerable.call(t,n[l])&&(o[n[l]]=t[n[l]]);return o};const Ve=24,da=4.5,ua="topRight",ma=t=>{let{children:a,prefixCls:o}=t;const n=Ze(o),[l,i,c]=st(o,n);return l(R.createElement(Dt,{classNames:{list:_(i,c,n)}},a))},pa=(t,a)=>{let{prefixCls:o,key:n}=a;return R.createElement(ma,{prefixCls:o,key:n},t)},ga=R.forwardRef((t,a)=>{const{top:o,bottom:n,prefixCls:l,getContainer:i,maxCount:c,rtl:r,onAllRemoved:d,stack:x,duration:v,pauseOnHover:f=!0,showProgress:C}=t,{getPrefixCls:b,getPopupContainer:S,notification:p,direction:y}=s.useContext(ke),[,g]=wt(),u=l||b("notification"),m=O=>la(O,o??Ve,n??Ve),j=()=>_({[`${u}-rtl`]:r??y==="rtl"}),w=()=>ia(u),[h,k]=Tt({prefixCls:u,style:m,className:j,motion:w,closable:!0,closeIcon:Le(u),duration:v??da,getContainer:()=>(i==null?void 0:i())||(S==null?void 0:S())||document.body,maxCount:c,pauseOnHover:f,showProgress:C,onAllRemoved:d,renderNotifications:pa,stack:x===!1?!1:{threshold:typeof x=="object"?x==null?void 0:x.threshold:void 0,offset:8,gap:g.margin}});return R.useImperativeHandle(a,()=>Object.assign(Object.assign({},h),{prefixCls:u,notification:p})),k});function it(t){const a=R.useRef(null);return $t(),[R.useMemo(()=>{const n=r=>{var d;if(!a.current)return;const{open:x,prefixCls:v,notification:f}=a.current,C=`${v}-notice`,{message:b,description:S,icon:p,type:y,btn:g,actions:u,className:m,style:j,role:w="alert",closeIcon:h,closable:k}=r,O=ca(r,["message","description","icon","type","btn","actions","className","style","role","closeIcon","closable"]),N=u??g,T=Le(C,ra(h,t,f));return x(Object.assign(Object.assign({placement:(d=t==null?void 0:t.placement)!==null&&d!==void 0?d:ua},O),{content:R.createElement(lt,{prefixCls:C,icon:p,type:y,message:b,description:S,actions:N,role:w}),className:_(y&&`${C}-${y}`,m,f==null?void 0:f.className),style:Object.assign(Object.assign({},f==null?void 0:f.style),j),closeIcon:T,closable:k??!!T}))},i={open:n,destroy:r=>{var d,x;r!==void 0?(d=a.current)===null||d===void 0||d.close(r):(x=a.current)===null||x===void 0||x.destroy()}};return["success","info","warning","error"].forEach(r=>{i[r]=d=>n(Object.assign(Object.assign({},d),{type:r}))}),i},[]),R.createElement(ga,Object.assign({key:"notification-holder"},t,{ref:a}))]}function xa(t){return it(t)}var We=s.createContext(null),rt=s.createContext({}),ha=["prefixCls","className","containerRef"],fa=function(a){var o=a.prefixCls,n=a.className,l=a.containerRef,i=kt(a,ha),c=s.useContext(rt),r=c.panel,d=It(r,l);return s.createElement("div",je({className:_("".concat(o,"-content"),n),role:"dialog",ref:d},Me(a,{aria:!0}),{"aria-modal":"true"},i))};function Ue(t){return typeof t=="string"&&String(Number(t))===t?(_t(!1,"Invalid value type of `width` or `height` which should be number type instead."),Number(t)):t}var Ke={width:0,height:0,overflow:"hidden",outline:"none",position:"absolute"};function ba(t,a){var o,n,l,i=t.prefixCls,c=t.open,r=t.placement,d=t.inline,x=t.push,v=t.forceRender,f=t.autoFocus,C=t.keyboard,b=t.classNames,S=t.rootClassName,p=t.rootStyle,y=t.zIndex,g=t.className,u=t.id,m=t.style,j=t.motion,w=t.width,h=t.height,k=t.children,O=t.mask,N=t.maskClosable,T=t.maskMotion,V=t.maskClassName,ie=t.maskStyle,te=t.afterOpenChange,Q=t.onClose,ae=t.onMouseEnter,ge=t.onMouseOver,xe=t.onMouseLeave,re=t.onClick,he=t.onKeyDown,fe=t.onKeyUp,F=t.styles,ne=t.drawerRender,W=s.useRef(),Y=s.useRef(),X=s.useRef();s.useImperativeHandle(a,function(){return W.current});var be=function(A){var de=A.keyCode,ue=A.shiftKey;switch(de){case Fe.TAB:{if(de===Fe.TAB){if(!ue&&document.activeElement===X.current){var me;(me=Y.current)===null||me===void 0||me.focus({preventScroll:!0})}else if(ue&&document.activeElement===Y.current){var Ne;(Ne=X.current)===null||Ne===void 0||Ne.focus({preventScroll:!0})}}break}case Fe.ESC:{Q&&C&&(A.stopPropagation(),Q(A));break}}};s.useEffect(function(){if(c&&f){var I;(I=W.current)===null||I===void 0||I.focus({preventScroll:!0})}},[c]);var _e=s.useState(!1),Oe=Ee(_e,2),ye=Oe[0],ce=Oe[1],P=s.useContext(We),Pe;typeof x=="boolean"?Pe=x?{}:{distance:0}:Pe=x||{};var oe=(o=(n=(l=Pe)===null||l===void 0?void 0:l.distance)!==null&&n!==void 0?n:P==null?void 0:P.pushDistance)!==null&&o!==void 0?o:180,ht=s.useMemo(function(){return{pushDistance:oe,push:function(){ce(!0)},pull:function(){ce(!1)}}},[oe]);s.useEffect(function(){if(c){var I;P==null||(I=P.push)===null||I===void 0||I.call(P)}else{var A;P==null||(A=P.pull)===null||A===void 0||A.call(P)}},[c]),s.useEffect(function(){return function(){var I;P==null||(I=P.pull)===null||I===void 0||I.call(P)}},[]);var ft=O&&s.createElement(Ae,je({key:"mask"},T,{visible:c}),function(I,A){var de=I.className,ue=I.style;return s.createElement("div",{className:_("".concat(i,"-mask"),de,b==null?void 0:b.mask,V),style:H(H(H({},ue),ie),F==null?void 0:F.mask),onClick:N&&c?Q:void 0,ref:A})}),bt=typeof j=="function"?j(r):j,se={};if(ye&&oe)switch(r){case"top":se.transform="translateY(".concat(oe,"px)");break;case"bottom":se.transform="translateY(".concat(-oe,"px)");break;case"left":se.transform="translateX(".concat(oe,"px)");break;default:se.transform="translateX(".concat(-oe,"px)");break}r==="left"||r==="right"?se.width=Ue(w):se.height=Ue(h);var yt={onMouseEnter:ae,onMouseOver:ge,onMouseLeave:xe,onClick:re,onKeyDown:he,onKeyUp:fe},vt=s.createElement(Ae,je({key:"panel"},bt,{visible:c,forceRender:v,onVisibleChanged:function(A){te==null||te(A)},removeOnLeave:!1,leavedClassName:"".concat(i,"-content-wrapper-hidden")}),function(I,A){var de=I.className,ue=I.style,me=s.createElement(fa,je({id:u,containerRef:A,prefixCls:i,className:_(g,b==null?void 0:b.content),style:H(H({},m),F==null?void 0:F.content)},Me(t,{aria:!0}),yt),k);return s.createElement("div",je({className:_("".concat(i,"-content-wrapper"),b==null?void 0:b.wrapper,de),style:H(H(H({},se),ue),F==null?void 0:F.wrapper)},Me(t,{data:!0})),ne?ne(me):me)}),Be=H({},p);return y&&(Be.zIndex=y),s.createElement(We.Provider,{value:ht},s.createElement("div",{className:_(i,"".concat(i,"-").concat(r),S,ze(ze({},"".concat(i,"-open"),c),"".concat(i,"-inline"),d)),style:Be,tabIndex:-1,ref:W,onKeyDown:be},ft,s.createElement("div",{tabIndex:0,ref:Y,style:Ke,"aria-hidden":"true","data-sentinel":"start"}),vt,s.createElement("div",{tabIndex:0,ref:X,style:Ke,"aria-hidden":"true","data-sentinel":"end"})))}var ya=s.forwardRef(ba),va=function(a){var o=a.open,n=o===void 0?!1:o,l=a.prefixCls,i=l===void 0?"rc-drawer":l,c=a.placement,r=c===void 0?"right":c,d=a.autoFocus,x=d===void 0?!0:d,v=a.keyboard,f=v===void 0?!0:v,C=a.width,b=C===void 0?378:C,S=a.mask,p=S===void 0?!0:S,y=a.maskClosable,g=y===void 0?!0:y,u=a.getContainer,m=a.forceRender,j=a.afterOpenChange,w=a.destroyOnClose,h=a.onMouseEnter,k=a.onMouseOver,O=a.onMouseLeave,N=a.onClick,T=a.onKeyDown,V=a.onKeyUp,ie=a.panelRef,te=s.useState(!1),Q=Ee(te,2),ae=Q[0],ge=Q[1],xe=s.useState(!1),re=Ee(xe,2),he=re[0],fe=re[1];He(function(){fe(!0)},[]);var F=he?n:!1,ne=s.useRef(),W=s.useRef();He(function(){F&&(W.current=document.activeElement)},[F]);var Y=function(ye){var ce;if(ge(ye),j==null||j(ye),!ye&&W.current&&!((ce=ne.current)!==null&&ce!==void 0&&ce.contains(W.current))){var P;(P=W.current)===null||P===void 0||P.focus({preventScroll:!0})}},X=s.useMemo(function(){return{panel:ie}},[ie]);if(!m&&!ae&&!F&&w)return null;var be={onMouseEnter:h,onMouseOver:k,onMouseLeave:O,onClick:N,onKeyDown:T,onKeyUp:V},_e=H(H({},a),{},{open:F,prefixCls:i,placement:r,autoFocus:x,keyboard:f,width:b,mask:p,maskClosable:g,inline:u===!1,afterOpenChange:Y,ref:ne},be);return s.createElement(rt.Provider,{value:X},s.createElement(Ot,{open:F||m||ae,autoDestroy:!1,getContainer:u,autoLock:p&&(F||ae)},s.createElement(ya,_e)))};const ct=t=>{var a,o;const{prefixCls:n,title:l,footer:i,extra:c,loading:r,onClose:d,headerStyle:x,bodyStyle:v,footerStyle:f,children:C,classNames:b,styles:S}=t,p=et("drawer"),y=s.useCallback(w=>s.createElement("button",{type:"button",onClick:d,"aria-label":"Close",className:`${n}-close`},w),[d]),[g,u]=Wt(Ge(t),Ge(p),{closable:!0,closeIconRender:y}),m=s.useMemo(()=>{var w,h;return!l&&!g?null:s.createElement("div",{style:Object.assign(Object.assign(Object.assign({},(w=p.styles)===null||w===void 0?void 0:w.header),x),S==null?void 0:S.header),className:_(`${n}-header`,{[`${n}-header-close-only`]:g&&!l&&!c},(h=p.classNames)===null||h===void 0?void 0:h.header,b==null?void 0:b.header)},s.createElement("div",{className:`${n}-header-title`},u,l&&s.createElement("div",{className:`${n}-title`},l)),c&&s.createElement("div",{className:`${n}-extra`},c))},[g,u,c,x,n,l]),j=s.useMemo(()=>{var w,h;if(!i)return null;const k=`${n}-footer`;return s.createElement("div",{className:_(k,(w=p.classNames)===null||w===void 0?void 0:w.footer,b==null?void 0:b.footer),style:Object.assign(Object.assign(Object.assign({},(h=p.styles)===null||h===void 0?void 0:h.footer),f),S==null?void 0:S.footer)},i)},[i,f,n]);return s.createElement(s.Fragment,null,m,s.createElement("div",{className:_(`${n}-body`,b==null?void 0:b.body,(a=p.classNames)===null||a===void 0?void 0:a.body),style:Object.assign(Object.assign(Object.assign({},(o=p.styles)===null||o===void 0?void 0:o.body),v),S==null?void 0:S.body)},r?s.createElement(Pt,{active:!0,title:!1,paragraph:{rows:5},className:`${n}-body-skeleton`}):C),j)},ja=t=>{const a="100%";return{left:`translateX(-${a})`,right:`translateX(${a})`,top:`translateY(-${a})`,bottom:`translateY(${a})`}[t]},dt=(t,a)=>({"&-enter, &-appear":Object.assign(Object.assign({},t),{"&-active":a}),"&-leave":Object.assign(Object.assign({},a),{"&-active":t})}),ut=(t,a)=>Object.assign({"&-enter, &-appear, &-leave":{"&-start":{transition:"none"},"&-active":{transition:`all ${a}`}}},dt({opacity:t},{opacity:1})),Sa=(t,a)=>[ut(.7,a),dt({transform:ja(t)},{transform:"none"})],Ca=t=>{const{componentCls:a,motionDurationSlow:o}=t;return{[a]:{[`${a}-mask-motion`]:ut(0,o),[`${a}-panel-motion`]:["left","right","top","bottom"].reduce((n,l)=>Object.assign(Object.assign({},n),{[`&-${l}`]:Sa(l,o)}),{})}}},wa=t=>{const{borderRadiusSM:a,componentCls:o,zIndexPopup:n,colorBgMask:l,colorBgElevated:i,motionDurationSlow:c,motionDurationMid:r,paddingXS:d,padding:x,paddingLG:v,fontSizeLG:f,lineHeightLG:C,lineWidth:b,lineType:S,colorSplit:p,marginXS:y,colorIcon:g,colorIconHover:u,colorBgTextHover:m,colorBgTextActive:j,colorText:w,fontWeightStrong:h,footerPaddingBlock:k,footerPaddingInline:O,calc:N}=t,T=`${o}-content-wrapper`;return{[o]:{position:"fixed",inset:0,zIndex:n,pointerEvents:"none",color:w,"&-pure":{position:"relative",background:i,display:"flex",flexDirection:"column",[`&${o}-left`]:{boxShadow:t.boxShadowDrawerLeft},[`&${o}-right`]:{boxShadow:t.boxShadowDrawerRight},[`&${o}-top`]:{boxShadow:t.boxShadowDrawerUp},[`&${o}-bottom`]:{boxShadow:t.boxShadowDrawerDown}},"&-inline":{position:"absolute"},[`${o}-mask`]:{position:"absolute",inset:0,zIndex:n,background:l,pointerEvents:"auto"},[T]:{position:"absolute",zIndex:n,maxWidth:"100vw",transition:`all ${c}`,"&-hidden":{display:"none"}},[`&-left > ${T}`]:{top:0,bottom:0,left:{_skip_check_:!0,value:0},boxShadow:t.boxShadowDrawerLeft},[`&-right > ${T}`]:{top:0,right:{_skip_check_:!0,value:0},bottom:0,boxShadow:t.boxShadowDrawerRight},[`&-top > ${T}`]:{top:0,insetInline:0,boxShadow:t.boxShadowDrawerUp},[`&-bottom > ${T}`]:{bottom:0,insetInline:0,boxShadow:t.boxShadowDrawerDown},[`${o}-content`]:{display:"flex",flexDirection:"column",width:"100%",height:"100%",overflow:"auto",background:i,pointerEvents:"auto"},[`${o}-header`]:{display:"flex",flex:0,alignItems:"center",padding:`${G(x)} ${G(v)}`,fontSize:f,lineHeight:C,borderBottom:`${G(b)} ${S} ${p}`,"&-title":{display:"flex",flex:1,alignItems:"center",minWidth:0,minHeight:0}},[`${o}-extra`]:{flex:"none"},[`${o}-close`]:Object.assign({display:"inline-flex",width:N(f).add(d).equal(),height:N(f).add(d).equal(),borderRadius:a,justifyContent:"center",alignItems:"center",marginInlineEnd:y,color:g,fontWeight:h,fontSize:f,fontStyle:"normal",lineHeight:1,textAlign:"center",textTransform:"none",textDecoration:"none",background:"transparent",border:0,cursor:"pointer",transition:`all ${r}`,textRendering:"auto","&:hover":{color:u,backgroundColor:m,textDecoration:"none"},"&:active":{backgroundColor:j}},Qe(t)),[`${o}-title`]:{flex:1,margin:0,fontWeight:t.fontWeightStrong,fontSize:f,lineHeight:C},[`${o}-body`]:{flex:1,minWidth:0,minHeight:0,padding:v,overflow:"auto",[`${o}-body-skeleton`]:{width:"100%",height:"100%",display:"flex",justifyContent:"center"}},[`${o}-footer`]:{flexShrink:0,padding:`${G(k)} ${G(O)}`,borderTop:`${G(b)} ${S} ${p}`},"&-rtl":{direction:"rtl"}}}},$a=t=>({zIndexPopup:t.zIndexPopupBase,footerPaddingBlock:t.paddingXS,footerPaddingInline:t.padding}),mt=Xe("Drawer",t=>{const a=Je(t,{});return[wa(a),Ca(a)]},$a);var pt=function(t,a){var o={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&a.indexOf(n)<0&&(o[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var l=0,n=Object.getOwnPropertySymbols(t);l<n.length;l++)a.indexOf(n[l])<0&&Object.prototype.propertyIsEnumerable.call(t,n[l])&&(o[n[l]]=t[n[l]]);return o};const ka={distance:180},gt=t=>{const{rootClassName:a,width:o,height:n,size:l="default",mask:i=!0,push:c=ka,open:r,afterOpenChange:d,onClose:x,prefixCls:v,getContainer:f,style:C,className:b,visible:S,afterVisibleChange:p,maskStyle:y,drawerStyle:g,contentWrapperStyle:u}=t,m=pt(t,["rootClassName","width","height","size","mask","push","open","afterOpenChange","onClose","prefixCls","getContainer","style","className","visible","afterVisibleChange","maskStyle","drawerStyle","contentWrapperStyle"]),{getPopupContainer:j,getPrefixCls:w,direction:h,className:k,style:O,classNames:N,styles:T}=et("drawer"),V=w("drawer",v),[ie,te,Q]=mt(V),ae=f===void 0&&j?()=>j(document.body):f,ge=_({"no-mask":!i,[`${V}-rtl`]:h==="rtl"},a,te,Q),xe=s.useMemo(()=>o??(l==="large"?736:378),[o,l]),re=s.useMemo(()=>n??(l==="large"?736:378),[n,l]),he={motionName:qe(V,"mask-motion"),motionAppear:!0,motionEnter:!0,motionLeave:!0,motionDeadline:500},fe=be=>({motionName:qe(V,`panel-motion-${be}`),motionAppear:!0,motionEnter:!0,motionLeave:!0,motionDeadline:500}),F=Ut(),[ne,W]=Nt("Drawer",m.zIndex),{classNames:Y={},styles:X={}}=m;return ie(s.createElement(Ft,{form:!0,space:!0},s.createElement(Et.Provider,{value:W},s.createElement(va,Object.assign({prefixCls:V,onClose:x,maskMotion:he,motion:fe},m,{classNames:{mask:_(Y.mask,N.mask),content:_(Y.content,N.content),wrapper:_(Y.wrapper,N.wrapper)},styles:{mask:Object.assign(Object.assign(Object.assign({},X.mask),y),T.mask),content:Object.assign(Object.assign(Object.assign({},X.content),g),T.content),wrapper:Object.assign(Object.assign(Object.assign({},X.wrapper),u),T.wrapper)},open:r??S,mask:i,push:c,width:xe,height:re,style:Object.assign(Object.assign({},O),C),className:_(k,b),rootClassName:ge,getContainer:ae,afterOpenChange:d??p,panelRef:F,zIndex:ne}),s.createElement(ct,Object.assign({prefixCls:V},m,{onClose:x}))))))},Ia=t=>{const{prefixCls:a,style:o,className:n,placement:l="right"}=t,i=pt(t,["prefixCls","style","className","placement"]),{getPrefixCls:c}=s.useContext(ke),r=c("drawer",a),[d,x,v]=mt(r),f=_(r,`${r}-pure`,`${r}-${l}`,x,v,n);return d(s.createElement("div",{className:f,style:o},s.createElement(ct,Object.assign({prefixCls:r},i))))};gt._InternalPanelDoNotUseOrYouWillBeFired=Ia;let q=null,we=t=>t(),$e=[],Se={};function Ye(){const{getContainer:t,rtl:a,maxCount:o,top:n,bottom:l,showProgress:i,pauseOnHover:c}=Se,r=(t==null?void 0:t())||document.body;return{getContainer:()=>r,rtl:a,maxCount:o,top:n,bottom:l,showProgress:i,pauseOnHover:c}}const _a=R.forwardRef((t,a)=>{const{notificationConfig:o,sync:n}=t,{getPrefixCls:l}=s.useContext(ke),i=Se.prefixCls||l("notification"),c=s.useContext(Bt),[r,d]=it(Object.assign(Object.assign(Object.assign({},o),{prefixCls:i}),c.notification));return R.useEffect(n,[]),R.useImperativeHandle(a,()=>{const x=Object.assign({},r);return Object.keys(x).forEach(v=>{x[v]=function(){return n(),r[v].apply(r,arguments)}}),{instance:x,sync:n}}),d}),Oa=R.forwardRef((t,a)=>{const[o,n]=R.useState(Ye),l=()=>{n(Ye)};R.useEffect(l,[]);const i=Lt(),c=i.getRootPrefixCls(),r=i.getIconPrefixCls(),d=i.getTheme(),x=R.createElement(_a,{ref:a,sync:l,notificationConfig:o});return R.createElement(Mt,{prefixCls:c,iconPrefixCls:r,theme:d},i.holderRender?i.holderRender(x):x)});function Re(){if(!q){const t=document.createDocumentFragment(),a={fragment:t};q=a,we(()=>{Vt()(R.createElement(Oa,{ref:n=>{const{instance:l,sync:i}=n||{};Promise.resolve().then(()=>{!a.instance&&l&&(a.instance=l,a.sync=i,Re())})}}),t)});return}q.instance&&($e.forEach(t=>{switch(t.type){case"open":{we(()=>{q.instance.open(Object.assign(Object.assign({},Se),t.config))});break}case"destroy":we(()=>{q==null||q.instance.destroy(t.key)});break}}),$e=[])}function Pa(t){Se=Object.assign(Object.assign({},Se),t),we(()=>{var a;(a=q==null?void 0:q.sync)===null||a===void 0||a.call(q)})}function xt(t){$e.push({type:"open",config:t}),Re()}const Na=t=>{$e.push({type:"destroy",key:t}),Re()},Fa=["success","info","warning","error"],Ea={open:xt,destroy:Na,config:Pa,useNotification:xa,_InternalPanelDoNotUseOrYouWillBeFired:sa},Te=Ea;Fa.forEach(t=>{Te[t]=a=>xt(Object.assign(Object.assign({},a),{type:t}))});const De=({value:t,onChange:a,multiple:o=!0})=>{const[n]=$.useForm(),[l,i]=s.useState(t),[c,r]=Te.useNotification(),[d,x]=s.useState(),[v,f]=s.useState(!1),[C,b]=s.useState(!1),S=[{title:"分析名称",dataIndex:"analysis_name",key:"analysis_name",ellipsis:!0},{title:"id",dataIndex:"id",key:"id"},{title:"分析方法",dataIndex:"analysis_method",key:"analysis_method"},{title:"project",dataIndex:"project",key:"project"},{title:"control",dataIndex:"control",key:"control"},{title:"treatment",dataIndex:"treatment",key:"treatment"},{title:"software",dataIndex:"software",key:"software"},{title:"rank",dataIndex:"rank",key:"rank"},{title:"创建时间",dataIndex:"create_date",key:"create_date"},{title:"操作",key:"action",fixed:"right",width:200,render:(y,g)=>e.jsx(tt,{size:"middle",children:e.jsx("a",{onClick:()=>{b(!0),x(g),n.setFieldValue("id",g.id),n.setFieldValue("label",g.analysisName),n.setFieldValue("contentPath",g.content),console.log(g),g.analysis_method=="abundance-venn"?n.setFieldValue("name",`${g.software}-${g.rank}-${g.analysis_method}`):n.setFieldValue("name",`${g.software}-${g.rank}-${g.analysis_method}(${g.treatment} - ${g.control})`)},children:"添加"})})}],p={difference:[{label:"table#`P-value`<0.05",value:"table#`P-value`<0.05"}],prevalence:[{label:"table#type=='Prevalent in both sites'",value:"table#type=='Prevalent in both sites'"},{label:"table#type=='Prevalent in oral cavity' or type=='Prevalent in both sites'",value:"table#type=='Prevalent in oral cavity' or type=='Prevalent in both sites'"},{label:"table#type=='Prevalent in gut'",value:"table#type=='Prevalent in gut'"},{label:"table#type=='Prevalent in gut' or type=='Prevalent in both sites'",value:"table#type=='Prevalent in gut' or type=='Prevalent in both sites'"}],"abundance-venn":[{label:"regions#unique#taxonomy",value:"regions#unique#taxonomy"},{label:"regions#11#taxonomy",value:"regions#11#taxonomy"}]};return e.jsxs(e.Fragment,{children:[t?e.jsxs(e.Fragment,{children:[e.jsx(Ce,{style:{cursor:"pointer"},onClick:()=>f(!0),children:e.jsx("pre",{children:JSON.stringify(t,null,2)})}),e.jsx("a",{onClick:()=>{a(void 0),i(void 0)},children:"清除"})]}):e.jsx(e.Fragment,{children:e.jsx(B,{onClick:()=>f(!0),children:"添加数据"})}),e.jsxs(K,{footer:e.jsx(e.Fragment,{children:e.jsx(B,{type:"primary",onClick:()=>f(!1),children:"关闭"})}),width:"60%",onOk:async()=>{a(l)},title:d?`${d.software}-${d.rank}-${d.analysis_method}(${d.treatment} - ${d.control})`:"",open:v,onCancel:()=>f(!1),children:[e.jsx(U,{columnsParamsALL:S,shouldTrigger:!0,form:n}),C&&e.jsxs(e.Fragment,{children:[e.jsxs($,{form:n,children:[e.jsx($.Item,{name:"contentPath",label:"路径",rules:[{required:!0,message:"该字段不能为空!"}],children:e.jsx(E,{disabled:!0})}),e.jsx($.Item,{name:"label",label:"标签",rules:[{required:!0,message:"该字段不能为空!"}],children:e.jsx(E,{})}),e.jsx($.Item,{name:"name",label:"名称",rules:[{required:!0,message:"该字段不能为空!"}],children:e.jsx(E,{})}),e.jsx($.Item,{name:"query",label:"条件",rules:[{required:!0,message:"该字段不能为空!"}],children:e.jsx(Z,{allowClear:!0,options:p[d==null?void 0:d.analysis_method]})}),e.jsx($.Item,{name:"id",style:{display:"none"},children:e.jsx(E,{disabled:!0})})]}),e.jsx(B,{onClick:async()=>{const y=await n.validateFields();if(o){if(Array.isArray(l)){if(l.length>3){c.error({message:"目前只支持3个对象的韦恩图!"});return}if(l.filter(u=>u.name==y.name&&u.query==y.query).length>0){c.error({message:`已经存在name:${y.name};query:${y.query}`});return}l.push(y),i(l),a(l)}else i([y]),a([y]);n.resetFields()}else i(y),a(y);b(!1)},children:"确认"}),e.jsx(B,{onClick:()=>{i([]),b(!1),a(l)},children:"清除"})]}),e.jsx("div",{children:l&&Array.isArray(l)?l.map((y,g)=>e.jsxs("div",{children:[e.jsx(Ce,{children:e.jsx("pre",{children:JSON.stringify(y,null,2)})}),e.jsx("a",{onClick:()=>{const u=l.filter(m=>m.id!=y.id);i(u),a(u)},children:"删除"})]},g)):e.jsxs(e.Fragment,{children:[e.jsx(Ce,{children:e.jsx("pre",{children:JSON.stringify(l,null,2)})}),e.jsx("a",{onClick:()=>{a(void 0),i(void 0)},children:"清除"})]})})]}),r]})},ee=({form:t,children:a})=>{const{project:o,sampleComposition:n}=z(),[l,i]=s.useState([]),c=$.useWatch("column",t),r=async()=>{const v=(await D.get(`/api/get-group?column=${c}&project=${o}&sample_composition=${n}`)).data.map(f=>({label:`${f.group_name}(${f.count})`,value:f.group_name}));console.log(v),i(v)};s.useEffect(()=>{c&&r()},[c]);const d=$.useWatch(x=>x.id,t);return e.jsxs(e.Fragment,{children:[e.jsxs($,{form:t,children:[e.jsx($.Item,{label:"分析id",name:"id",style:{display:"none"},children:e.jsx(E,{})}),e.jsx($.Item,{label:"分析名称",name:"analysisName",rules:[{required:!0,message:"该字段不能为空!"}],children:e.jsx(E,{})}),e.jsx($.Item,{initialValue:"metaphlan",name:"software",label:"分析软件",rules:[{required:!0,message:"该字段不能为空!"}],children:e.jsx(Z,{allowClear:!0,options:[{label:"metaphlan",value:"metaphlan"},{label:"kraken",value:"kraken"}]})}),e.jsx($.Item,{initialValue:"sample_group",name:"column",label:"分组列",rules:[{required:!0,message:"该字段不能为空!"}],children:e.jsx(Z,{allowClear:!0,options:[{label:"sample_composition",value:"sample_composition"},{label:"host_disease",value:"host_disease"},{label:"sample_group",value:"sample_group"}]})}),e.jsx($.Item,{label:"处理组",name:"treatment",rules:[{required:!0,message:"该字段不能为空!"}],children:e.jsx(Z,{allowClear:!0,options:l})}),e.jsx($.Item,{label:"对照组",name:"control",rules:[{required:!0,message:"该字段不能为空!"}],children:e.jsx(Z,{allowClear:!0,options:l})}),e.jsx($.Item,{initialValue:"SPECIES",label:"rank",name:"rank",rules:[{required:!0,message:"该字段不能为空!"}],children:e.jsx(Z,{allowClear:!0,options:[{label:"SGB",value:"SGB"},{label:"SPECIES",value:"SPECIES"},{label:"GENUS",value:"GENUS"},{label:"FAMILY",value:"FAMILY"},{label:"ORDER",value:"ORDER"},{label:"CLASS",value:"CLASS"},{label:"PHYLUM",value:"PHYLUM"}]})}),a]}),d?e.jsxs(e.Fragment,{children:[e.jsx("a",{onClick:()=>t.setFieldValue("id",void 0),children:"更新"}),e.jsx("a",{onClick:()=>t.resetFields(),children:"清除"})]}):e.jsx(e.Fragment,{children:"新增"})]})},Ma=({form:t})=>{const{project:a,sampleComposition:o}=z(),[n,l]=s.useState([]),i=$.useWatch("column",t);s.useEffect(()=>{},[i]);const c=$.useWatch(r=>r.id,t);return e.jsxs(e.Fragment,{children:[e.jsxs($,{form:t,children:[e.jsx($.Item,{label:"分析id",name:"id",style:{display:"none"},children:e.jsx(E,{})}),e.jsx($.Item,{label:"分析名称",name:"analysisName",rules:[{required:!0,message:"该字段不能为空!"}],children:e.jsx(E,{})}),e.jsx($.Item,{initialValue:"SPECIES",label:"rank",name:"rank",rules:[{required:!0,message:"该字段不能为空!"}],children:e.jsx(Z,{allowClear:!0,options:[{label:"SGB",value:"SGB"},{label:"SPECIES",value:"SPECIES"},{label:"GENUS",value:"GENUS"},{label:"FAMILY",value:"FAMILY"},{label:"ORDER",value:"ORDER"},{label:"CLASS",value:"CLASS"},{label:"PHYLUM",value:"PHYLUM"}]})}),e.jsx($.Item,{name:"params",label:"params",rules:[{required:!0,message:"该字段不能为空!"}],children:e.jsx(De,{})})]}),c?e.jsxs(e.Fragment,{children:[e.jsx("a",{onClick:()=>t.setFieldValue("id",void 0),children:"更新"}),e.jsx("a",{onClick:()=>t.resetFields(),children:"清除"})]}):e.jsx(e.Fragment,{children:"新增"})]})},La=()=>{const[t]=$.useForm(),[a,o]=s.useState(!1),[n,l]=s.useState({}),{project:i}=z(),[c,r]=s.useState(!1),[d,x]=s.useState(""),[v,f]=s.useState(""),[C,b]=s.useState(!1),[S,p]=s.useState([]),{Search:y}=E,g=async()=>{const h=await t.validateFields();console.log(h),o(!0);const k=await D.post("/jupyter/get--compare-abundance",{...h,project:i});l(k.data),p(k.data.table),o(!1),console.log(k)},u=h=>{l(h),p(h.table)},m=async h=>{const k=await t.validateFields();x(h),b(!0);const O=await D.post("/jupyter/abundance-boxplot",{project:i,taxonomy:h,...k});f(O.data),b(!1)},j=[{title:"taxonomy",dataIndex:"taxonomy",key:"taxonomy",render:(h,k)=>e.jsx(e.Fragment,{children:e.jsx("a",{href:"javascript:;",onClick:()=>{m(k.taxonomy),r(!0)},children:k.taxonomy})})},{title:"tax_id",dataIndex:"tax_id",key:"tax_id",render:(h,k)=>e.jsx(e.Fragment,{children:e.jsx("a",{href:`https://www.ncbi.nlm.nih.gov/datasets/taxonomy/${k.tax_id}/`,target:"__blank",children:k.tax_id})})},{title:"rank",dataIndex:"rank",key:"rank"},{title:"Statistic",dataIndex:"Statistic",key:"Statistic"},{title:"P-value",dataIndex:"P-value",key:"P-value"},{title:"log2foldchange",dataIndex:"log2foldchange",key:"log2foldchange"},{title:"fdr_bh",dataIndex:"fdr_bh",key:"fdr_bh"},{title:"AdjustedP-value",dataIndex:"AdjustedP-value",key:"AdjustedP-value"}],w=()=>{const h=n==null?void 0:n.table.filter(N=>N["P-value"]<.05),k=h.filter(N=>N.log2foldchange>0),O=h.filter(N=>N.log2foldchange<0);return`总共有${h.length}个分类，其中上调的有${k.length}个，下调的有${O.length}多个`};return e.jsx(e.Fragment,{children:e.jsxs(J,{children:[e.jsxs(M,{lg:12,sm:24,xs:24,children:[e.jsx(ee,{form:t}),e.jsx(B,{onClick:g,children:"提交"}),e.jsx(U,{analysisMethod:"difference",shouldTrigger:!a,form:t,setTableLoading:o,setTabletData:u})]}),e.jsxs(M,{lg:12,sm:24,xs:24,children:[(n==null?void 0:n.img)&&e.jsx(e.Fragment,{children:e.jsx(L,{width:"50%",src:n==null?void 0:n.img})}),e.jsx("p",{children:(n==null?void 0:n.table)&&e.jsxs(e.Fragment,{children:["一共鉴定到",n==null?void 0:n.table.length,"个分类，其中根据pvalue 小于 0.05筛选，",w()]})}),e.jsx(y,{placeholder:"input search text",allowClear:!0,onSearch:h=>{const k=n==null?void 0:n.table.filter(O=>O.taxonomy.includes(h)||O.tax_id&&O.tax_id.includes(h));p(k)},style:{width:304}}),e.jsx(pe,{pagination:{pageSize:30},loading:a,scroll:{x:"max-content",y:55*5},columns:j,dataSource:S})]}),e.jsx(K,{loading:C,title:d,width:"50%",open:c,footer:e.jsx(e.Fragment,{}),onCancel:()=>r(!1),children:e.jsx(L,{width:"100%",src:v})})]})})},Ra=()=>{const[t]=$.useForm(),[a,o]=s.useState(!1),[n,l]=s.useState(),{project:i}=z(),[c,r]=s.useState(!1),[d,x]=s.useState(""),[v,f]=s.useState(""),[C,b]=s.useState(!1),{Search:S}=E,p=async()=>{const u=await t.validateFields();console.log(u),o(!0);const m=await D.post("/jupyter/abundance-roc",{...u,project:i});l(m.data),o(!1),console.log(m)},y=[{title:"taxonomy",dataIndex:"taxonomy",key:"taxonomy",render:(u,m)=>e.jsx(e.Fragment,{children:e.jsx("a",{href:"javascript:;",onClick:()=>{g(m.taxonomy),r(!0)},children:m.taxonomy})})},{title:"tax_id",dataIndex:"tax_id",key:"tax_id",render:(u,m)=>e.jsx(e.Fragment,{children:e.jsx("a",{href:`https://www.ncbi.nlm.nih.gov/datasets/taxonomy/${m.tax_id}/`,target:"__blank",children:m.tax_id})})},{title:"rank",dataIndex:"rank",key:"rank"},{title:"Importance",dataIndex:"Importance",key:"Importance"}],g=async u=>{const m=await t.validateFields();x(u),b(!0);const j=await D.post("/jupyter/abundance-boxplot",{project:i,taxonomy:u,...m});f(j.data),b(!1)};return e.jsx(e.Fragment,{children:e.jsxs(J,{children:[e.jsxs(M,{lg:12,sm:24,xs:24,children:[e.jsx(ee,{form:t}),e.jsx(B,{onClick:p,children:"提交"}),e.jsx(U,{analysisMethod:"roc",shouldTrigger:!0,form:t,setTableLoading:o,setTabletData:u=>{l(u)}})]}),e.jsx(M,{lg:12,sm:24,xs:24,children:e.jsx(le,{spinning:a,tip:"正在计算中...",children:n?e.jsx(e.Fragment,{children:e.jsx(Ie,{items:[{key:"roc",label:"roc",children:e.jsx(L,{width:"100%",src:n==null?void 0:n.img})},{key:"importance",label:"importance",children:e.jsxs(e.Fragment,{children:[e.jsx(pe,{pagination:{pageSize:30},loading:a,scroll:{x:"max-content"},columns:y,dataSource:n.importance?n.importance:[]}),e.jsx("p",{children:e.jsx("ol",{children:e.jsx("li",{children:"Importance: 特征重要性反映每个特征在决策树分裂时对降低不纯度的平均贡献。权重值越大，表示该特征对分类的影响越显著。"})})}),e.jsx("p",{})]})}]})}):e.jsx("div",{style:{height:"100px"}})})}),e.jsx(K,{loading:C,title:d,width:"50%",open:c,footer:e.jsx(e.Fragment,{}),onCancel:()=>r(!1),children:e.jsx(L,{width:"100%",src:v})})]})})},Ta=()=>{const[t,a]=s.useState([]),[o,n]=s.useState(!1),{project:l}=z(),[i,c]=s.useState(!1),[r,d]=s.useState(),[x,v]=s.useState(!1),[f,C]=s.useState([]),{Search:b}=E,S=async()=>{n(!0);const u=await D.get(`/api/abundance?project=${l}`);console.log(u),n(!1),a(u.data)},p=async u=>{v(!0);const m=await D.get(`/api/read-hdfs?path=${u}`);console.log(m.data),C(m.data),v(!1)},y=[{title:"样本名称",dataIndex:"sample_name",key:"sample_name"},{title:"数据版本",dataIndex:"data_version",key:"data_version"},{title:"software",dataIndex:"software",key:"software"},{title:"sample_composition",dataIndex:"sample_composition",key:"sample_composition"},{title:"host_disease",dataIndex:"host_disease",key:"host_disease"},{title:"sample_group",dataIndex:"sample_group",key:"sample_group"},{title:"项目",dataIndex:"project",key:"project"},{title:"操作",key:"action",fixed:"left",width:100,render:(u,m)=>e.jsx(tt,{size:"middle",children:e.jsx("a",{onClick:()=>{d(m),p(m.content),c(!0)},children:"查看"})})}],g=[{title:"taxonomy",dataIndex:"taxonomy",key:"taxonomy"},{title:"relative_abundance",dataIndex:"relative_abundance",key:"relative_abundance"},{title:"tax_id",dataIndex:"tax_id",key:"tax_id"},{title:"rank",dataIndex:"rank",key:"rank"},{title:"additional_species",dataIndex:"additional_species",key:"additional_species"}];return s.useEffect(()=>{S()},[]),e.jsxs(e.Fragment,{children:[t&&e.jsxs(e.Fragment,{children:["鉴定丰度的样本数量",t.length]}),e.jsx(B,{onClick:S,children:"刷新"}),e.jsx(pe,{pagination:{pageSize:30},loading:o,scroll:{x:"max-content"},columns:y,dataSource:t}),e.jsxs(gt,{extra:e.jsx(e.Fragment,{children:e.jsx(B,{onClick:()=>p(r==null?void 0:r.content_path),children:"刷新"})}),loading:x,title:r?r.sample_name:"",open:i,onClose:()=>c(!1),width:"80%",children:[e.jsx(b,{placeholder:"input search text",allowClear:!0,onSearch:u=>{const m=f.filter(j=>j.taxonomy.includes(u));C(m)},style:{width:304}}),e.jsx(pe,{pagination:{pageSize:30},loading:x,scroll:{x:"max-content"},columns:g,dataSource:f})]})]})},Da=()=>{const[t]=$.useForm(),[a,o]=s.useState(!1),[n,l]=s.useState(),{project:i}=z(),[c,r]=s.useState(!1),[d,x]=s.useState(""),[v,f]=s.useState(""),[C,b]=s.useState(!1),{Search:S}=E,p=async()=>{const y=await t.validateFields();console.log(y),o(!0);const g=await D.post("/jupyter/abundance-diversity",{...y,project:i});l(g.data),o(!1),console.log(g)};return e.jsx(e.Fragment,{children:e.jsxs(J,{children:[e.jsxs(M,{lg:12,sm:24,xs:24,children:[e.jsx(ee,{form:t}),e.jsx(B,{onClick:p,children:"提交"}),e.jsx(U,{analysisMethod:"diversity-alpha",shouldTrigger:!0,form:t,setTableLoading:o,setTabletData:y=>{l(y)}})]}),e.jsx(M,{lg:12,sm:24,xs:24,children:e.jsx(le,{spinning:a,tip:"正在计算中...",children:n?e.jsx(e.Fragment,{children:e.jsx(Ie,{items:[{key:"roc",label:"roc",children:e.jsx(L,{width:"100%",src:n==null?void 0:n.img})}]})}):e.jsx("div",{style:{height:"100px"}})})}),e.jsx(K,{loading:C,title:d,width:"50%",open:c,footer:e.jsx(e.Fragment,{}),onCancel:()=>r(!1),children:e.jsx(L,{width:"100%",src:v})})]})})},Ba=()=>{const[t]=$.useForm(),[a,o]=s.useState(!1),[n,l]=s.useState(),{project:i}=z(),[c,r]=s.useState(!1),[d,x]=s.useState(""),[v,f]=s.useState(""),[C,b]=s.useState(!1),[S,p]=s.useState(!0),{Search:y}=E,g=async()=>{const u=await t.validateFields();console.log(u),o(!0),p(!1);const m=await D.post("/jupyter/abundance-diversity-beta",{...u,project:i});l(m.data),p(!0),o(!1),console.log(m)};return e.jsx(e.Fragment,{children:e.jsxs(J,{children:[e.jsxs(M,{lg:12,sm:24,xs:24,children:[e.jsx(ee,{form:t}),e.jsx(B,{onClick:g,children:"提交"}),e.jsx(U,{analysisMethod:"diversity-beta",shouldTrigger:S,form:t,setTableLoading:o,setTabletData:u=>{l(u)}})]}),e.jsx(M,{lg:12,sm:24,xs:24,children:e.jsx(le,{spinning:a,tip:"正在计算中...",children:n?e.jsx(e.Fragment,{children:e.jsx(Ie,{items:[{key:"roc",label:"roc",children:e.jsx(L,{width:"100%",src:n==null?void 0:n.img})}]})}):e.jsx("div",{style:{height:"100px"}})})}),e.jsx(K,{loading:C,title:d,width:"50%",open:c,footer:e.jsx(e.Fragment,{}),onCancel:()=>r(!1),children:e.jsx(L,{width:"100%",src:v})})]})})},Aa=()=>{const[t]=$.useForm(),[a,o]=s.useState(!1),[n,l]=s.useState({}),[i,c]=s.useState([]),{project:r}=z(),[d,x]=s.useState(!1),[v,f]=s.useState(""),[C,b]=s.useState(""),[S,p]=s.useState(!1),{Search:y}=E,g=async()=>{const j=await t.validateFields();console.log(j),o(!0);const w=await D.post("/jupyter/abundance-prevalence ",{...j,project:r});l(w.data),c(w.data.table),o(!1)},u=async j=>{const w=await t.validateFields();f(j),p(!0);const h=await D.post("/jupyter/abundance-boxplot",{project:r,taxonomy:j,...w});b(h.data),p(!1)},m=[{title:"taxonomy",dataIndex:"taxonomy",key:"taxonomy",render:(j,w)=>e.jsx(e.Fragment,{children:e.jsx("a",{href:"javascript:;",onClick:()=>{u(w.taxonomy),x(!0)},children:w.taxonomy})})},{title:"tax_id",dataIndex:"tax_id",key:"tax_id",render:(j,w)=>e.jsx(e.Fragment,{children:e.jsx("a",{href:`https://www.ncbi.nlm.nih.gov/datasets/taxonomy/${w.tax_id}/`,target:"__blank",children:w.tax_id})})},{title:"rank",dataIndex:"rank",key:"rank"},{title:"oral_prev",dataIndex:"oral_prev",key:"oral_prev"},{title:"faeces_prev",dataIndex:"faeces_prev",key:"faeces_prev"},{title:"类型",dataIndex:"type",key:"type"}];return e.jsx(e.Fragment,{children:e.jsxs(J,{children:[e.jsxs(M,{lg:12,sm:24,xs:24,children:[e.jsx(ee,{form:t}),e.jsx(B,{onClick:g,children:"提交"}),e.jsx(U,{analysisMethod:"prevalence",shouldTrigger:!0,form:t,setTableLoading:o,setTabletData:j=>{l(j),c(j.table)}})]}),e.jsxs(M,{lg:12,sm:24,xs:24,children:[(n==null?void 0:n.img)&&e.jsx(e.Fragment,{children:e.jsx(L,{width:"50%",src:n==null?void 0:n.img})}),e.jsx("p",{children:n!=null&&n.desc?n.desc:""}),e.jsx("div",{children:e.jsx(y,{placeholder:"input search text",allowClear:!0,onSearch:j=>{const w=n.table.filter(h=>h.type.includes(j)||h.taxonomy.includes(j));c(w)},style:{width:304}})}),e.jsx(pe,{pagination:{pageSize:30},loading:a,scroll:{x:"max-content",y:55*5},columns:m,dataSource:i})]}),e.jsx(K,{loading:S,title:v,width:"50%",open:d,footer:e.jsx(e.Fragment,{}),onCancel:()=>x(!1),children:e.jsx(L,{width:"100%",src:C})})]})})},za=()=>{const[t]=$.useForm(),[a,o]=s.useState(!1),[n,l]=s.useState(),{project:i}=z(),[c,r]=s.useState(!1),[d,x]=s.useState(""),[v,f]=s.useState(""),[C,b]=s.useState(!1),[S,p]=s.useState(!0),{Search:y}=E,g=async()=>{const u=await t.validateFields();console.log(u),o(!0),p(!1);const m=await D.post("/jupyter/abundance-stacked-diagram",{...u,project:i});l(m.data),p(!0),o(!1),console.log(m)};return e.jsx(e.Fragment,{children:e.jsxs(J,{children:[e.jsxs(M,{lg:12,sm:24,xs:24,children:[e.jsx(ee,{form:t,children:e.jsx($.Item,{name:"params",label:"params",children:e.jsx(De,{multiple:!1})})}),e.jsx(B,{onClick:g,children:"提交"}),e.jsx(U,{analysisMethod:"stacked-diagram",shouldTrigger:S,form:t,setTableLoading:o,setTabletData:u=>{l(u)}})]}),e.jsx(M,{lg:12,sm:24,xs:24,children:e.jsx(le,{spinning:a,tip:"正在计算中...",children:n?e.jsxs(e.Fragment,{children:[e.jsx(L,{width:"100%",src:n==null?void 0:n.img}),"一共",n.table.length,"条记录",e.jsx(pe,{pagination:{pageSize:30},loading:a,scroll:{x:"max-content",y:55*5},columns:[{title:"taxonomy",dataIndex:"taxonomy",key:"taxonomy"}],dataSource:n.table})]}):e.jsx("div",{style:{height:"100px"}})})}),e.jsx(K,{loading:C,title:d,width:"50%",open:c,footer:e.jsx(e.Fragment,{}),onCancel:()=>r(!1),children:e.jsx(L,{width:"100%",src:v})})]})})},Ha=()=>{const[t]=$.useForm(),[a,o]=s.useState(!1),[n,l]=s.useState(),{project:i}=z(),[c,r]=s.useState(!1),[d,x]=s.useState(""),[v,f]=s.useState(""),[C,b]=s.useState(!1),[S,p]=s.useState(!0),{Search:y}=E,g=async()=>{const u=await t.validateFields();console.log(u),o(!0),p(!1);const m=await D.post("/jupyter/abundance-pie",{...u,project:i});l(m.data),p(!0),o(!1),console.log(m)};return e.jsx(e.Fragment,{children:e.jsxs(J,{children:[e.jsxs(M,{lg:12,sm:24,xs:24,children:[e.jsx(ee,{form:t}),e.jsx(B,{onClick:g,children:"提交"}),e.jsx(U,{analysisMethod:"abundance-pie",shouldTrigger:S,form:t,setTableLoading:o,setTabletData:u=>{l(u)}})]}),e.jsx(M,{lg:12,sm:24,xs:24,children:e.jsx(le,{spinning:a,tip:"正在计算中...",children:n?e.jsx(e.Fragment,{children:e.jsx(L,{width:"100%",src:n==null?void 0:n.img})}):e.jsx("div",{style:{height:"100px"}})})}),e.jsx(K,{loading:C,title:d,width:"50%",open:c,footer:e.jsx(e.Fragment,{}),onCancel:()=>r(!1),children:e.jsx(L,{width:"100%",src:v})})]})})},qa=()=>{const[t,a]=s.useState(!1),[o,n]=s.useState(),{project:l}=z(),[i,c]=s.useState(!1),[r,d]=s.useState({}),[x,v]=s.useState([]),{Search:f}=E,[C,b]=Te.useNotification(),[S,p]=s.useState(!0),[y]=$.useForm(),[g]=$.useForm(),u=async()=>{const m=await g.validateFields();a(!0),p(!1);const j=await D.post("/jupyter/abundance-venn",{...m,project:l});p(!0),n(j.data),a(!1)};return e.jsx(e.Fragment,{children:e.jsxs(J,{children:[e.jsxs(M,{lg:12,sm:24,xs:24,children:[e.jsx(Ma,{form:g}),e.jsx(B,{onClick:u,children:"提交"}),e.jsx(U,{analysisMethod:"abundance-venn",shouldTrigger:S,form:g,setTableLoading:a,setTabletData:m=>{n(m)}})]}),e.jsxs(M,{lg:12,sm:24,xs:24,children:[e.jsx(le,{spinning:t,tip:"正在计算中...",children:o?e.jsxs(e.Fragment,{children:[e.jsx(L,{width:"50%",src:o==null?void 0:o.img}),e.jsxs("table",{className:"result-table",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{children:"binary_code"}),e.jsx("th",{children:"label"}),e.jsx("th",{children:"count"}),e.jsx("th",{children:"操作"})]})}),e.jsx("tbody",{children:o.regions.map((m,j)=>e.jsxs("tr",{children:[e.jsx("td",{children:m.binary_code}),e.jsx("td",{children:m.label}),e.jsx("td",{children:m.count}),e.jsx("td",{children:e.jsx("a",{onClick:()=>{v(m.elements)},style:{whiteSpace:"nowrap"},children:"查看元素"})})]},j))})]}),x.length>0&&e.jsx(e.Fragment,{children:e.jsxs("table",{className:"result-table",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{children:"index"}),e.jsx("th",{children:"name"})]})}),e.jsx("tbody",{children:x.map((m,j)=>e.jsxs("tr",{children:[e.jsx("td",{children:j+1}),e.jsx("td",{children:e.jsx("a",{onClick:()=>{d({project:l,taxonomy:m.taxonomy,column:"sample_group",rank:"SPECIES",software:"metaphlan"}),c(!0)},children:m.taxonomy})})]},j))})]})})]}):e.jsx("div",{style:{height:"100px"}})}),e.jsx(Ga,{boxplotParam:r,open:i,setOpen:c})]})]})})},Ga=({boxplotParam:t,open:a,setOpen:o})=>{const[n,l]=s.useState(""),[i,c]=s.useState(!1),r=async()=>{c(!0);const d=await D.post("/jupyter/abundance-boxplot",{...t});l(d.data),c(!1)};return s.useEffect(()=>{a&&r()},[a]),e.jsx(e.Fragment,{children:e.jsxs(K,{loading:i,title:"箱线图",width:"50%",open:a,footer:e.jsx(e.Fragment,{}),onCancel:()=>o(!1),children:[e.jsx(L,{width:"100%",src:n}),e.jsx(Ce,{children:e.jsx("pre",{children:JSON.stringify(t,null,2)})})]})})},Va=()=>{const[t]=$.useForm(),[a,o]=s.useState(!1),[n,l]=s.useState(),{project:i}=z(),[c,r]=s.useState(!1),[d,x]=s.useState(""),[v,f]=s.useState(""),[C,b]=s.useState(!1),[S,p]=s.useState(!0),{Search:y}=E,g=async()=>{const u=await t.validateFields();console.log(u),o(!0),p(!1);const m=await D.post("/jupyter/abundance-cumulative-abundance",{...u,project:i});l(m.data),p(!0),o(!1),console.log(m)};return e.jsx(e.Fragment,{children:e.jsxs(J,{children:[e.jsxs(M,{lg:12,sm:24,xs:24,children:[e.jsxs(ee,{form:t,children:[e.jsx($.Item,{label:"累积类型",name:"yType",children:e.jsx(Z,{options:[{label:"sum",value:"sum"},{label:"count",value:"count"}]})}),e.jsx($.Item,{name:"params",label:"params",rules:[{required:!0,message:"该字段不能为空!"}],children:e.jsx(De,{multiple:!0})})]}),e.jsx(B,{onClick:g,children:"提交"}),e.jsx(U,{analysisMethod:"cumulative-abundance",shouldTrigger:S,form:t,setTableLoading:o,setTabletData:u=>{l(u)}})]}),e.jsx(M,{lg:12,sm:24,xs:24,children:e.jsx(le,{spinning:a,tip:"正在计算中...",children:n?e.jsxs(e.Fragment,{children:[e.jsx(L,{width:"100%",src:n==null?void 0:n.img}),(n==null?void 0:n.describe)&&e.jsx("p",{children:n==null?void 0:n.describe})]}):e.jsx("div",{style:{height:"100px"}})})}),e.jsx(K,{loading:C,title:d,width:"50%",open:c,footer:e.jsx(e.Fragment,{}),onCancel:()=>r(!1),children:e.jsx(L,{width:"100%",src:v})})]})})},Ja=()=>e.jsx(e.Fragment,{children:e.jsx(Ie,{items:[{key:"diversity-alphattmp",label:"alpha多样性",children:e.jsx(Da,{})},{key:"diversity-beta",label:"beta多样性",children:e.jsx(Ba,{})},{key:"stacked-diagram",label:"堆叠图",children:e.jsx(za,{})},{key:"pie",label:"饼图",children:e.jsx(Ha,{})},{key:"difference",label:"差异分析",children:e.jsx(La,{})},{key:"roc",label:"ROC分析",children:e.jsx(Ra,{})},{key:"prevalence",label:"流行率分析",children:e.jsx(Aa,{})},{key:"cumulative-abundance",label:"累积丰度",children:e.jsx(Va,{})},{key:"venn",label:"集合分析",children:e.jsx(qa,{})},{key:"abundanceTable",label:"丰度表格",children:e.jsx(Ta,{})}]})});export{Ja as default};
