import{r as a,c as j,e as y,j as e,R as g,C as h,f as S,B as C,E as R,a as E,V as w}from"./index-D-dSUqcW.js";import{d as A}from"./index-DO_IAAx2.js";import{C as f}from"./index-Dkbp6E_w.js";import{T as F}from"./Table-Dtf-w5DZ.js";import"./index-qGnf6g8z.js";import"./index-SaZqb6NX.js";import"./addEventListener-opCpBvZe.js";import"./index-BA4ILsN5.js";import"./index-B_NoN8nS.js";import"./index-GCalpkan.js";import"./index-Dq5A-FeG.js";const P=()=>{const[c,r]=a.useState(!1),{project:i,projectObj:n}=j(),[d,m]=a.useState(),[t,o]=a.useState();a.useRef(null),y();const p=async()=>{var l,x,u;r(!0);let s=await E.post("/list-analysis-tree",{is_report:!0,project:i});m(s.data),s.data.length>0&&(l=s.data[0])!=null&&l.children&&((x=s.data[0])==null?void 0:x.children.length)>0&&o((u=s.data[0])==null?void 0:u.children[0]),r(!1)};return a.useEffect(()=>{p()},[i]),e.jsx("div",{style:{maxWidth:"1500px",margin:"0 auto"},children:e.jsxs(g,{children:[e.jsx(h,{span:4,children:e.jsx(f,{loading:c,title:n==null?void 0:n.project_name,size:"small",extra:e.jsx(S,{gap:"small",children:e.jsx(C,{size:"small",color:"cyan",variant:"solid",onClick:p,children:"刷新"})}),children:e.jsx(L,{onSelect:s=>{var l;((l=s.node)==null?void 0:l.type)=="analysis"&&o(s.node)},defaultSelectKey:t==null?void 0:t.key,treeData:d})})}),e.jsx(h,{span:20,style:{paddingLeft:"1rem"},children:t?e.jsx(e.Fragment,{children:e.jsx(A,{analysis_id:t==null?void 0:t.key})}):e.jsx(e.Fragment,{children:e.jsx(f,{size:"small",children:e.jsx(R,{})})})})]})})},L=({treeData:c,defaultSelectKey:r,onSelect:i})=>{const[n,d]=a.useState(r),m=(t,o)=>{i(o),d(t[0])};return e.jsxs(e.Fragment,{children:[r,e.jsx(F,{selectedKeys:[n],showLine:!0,switcherIcon:e.jsx(w,{}),defaultExpandAll:!0,onSelect:m,treeData:c})]})};export{P as default};
