var Vt=Object.defineProperty;var Dt=(e,t,n)=>t in e?Vt(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;var U=(e,t,n)=>Dt(e,typeof t!="symbol"?t+"":t,n);import{r as c,v as $e,_ as X,Z as qt,$ as ke,a0 as Xt,a1 as Ft,ak as Ut,X as at,a6 as Wt,a7 as Gt,a8 as Kt,aI as it,O as j,aS as Yt,a3 as Zt,a4 as Qt,m as Jt,R as f,aT as en,A as we,z as Te,ae as k,ad as W,cg as tn,aB as nn,ch as Ce,ac as re,aN as ct,ci as lt,N as ut,cj as rn,ck as on,cl as sn,cm as an,cn as Oe,co as cn,cp as ln,cq as un,cr as dn,aj as fn,B as dt,aq as ft,H as xe,ar as mt,I as mn,Y as pt,bu as pn,g as ht,j as K,cs as Ue}from"./index-CWx5cHtj.js";import{C as hn}from"./index-BhpvB4Wv.js";import"./index-BgXoXwrY.js";import"./index-BAlUq73q.js";var gn={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M868 545.5L536.1 163a31.96 31.96 0 00-48.3 0L156 545.5a7.97 7.97 0 006 13.2h81c4.6 0 9-2 12.1-5.5L474 300.9V864c0 4.4 3.6 8 8 8h60c4.4 0 8-3.6 8-8V300.9l218.9 252.3c3 3.5 7.4 5.5 12.1 5.5h81c6.8 0 10.5-8 6-13.2z"}}]},name:"arrow-up",theme:"outlined"},vn=function(t,n){return c.createElement($e,X({},t,{ref:n,icon:gn}))},yn=c.forwardRef(vn),Sn={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"defs",attrs:{},children:[{tag:"style",attrs:{}}]},{tag:"path",attrs:{d:"M682 455V311l-76 76v68c-.1 50.7-42 92.1-94 92a95.8 95.8 0 01-52-15l-54 55c29.1 22.4 65.9 36 106 36 93.8 0 170-75.1 170-168z"}},{tag:"path",attrs:{d:"M833 446h-60c-4.4 0-8 3.6-8 8 0 140.3-113.7 254-254 254-63 0-120.7-23-165-61l-54 54a334.01 334.01 0 00179 81v102H326c-13.9 0-24.9 14.3-25 32v36c.1 4.4 2.9 8 6 8h408c3.2 0 6-3.6 6-8v-36c0-17.7-11-32-25-32H547V782c165.3-17.9 294-157.9 294-328 0-4.4-3.6-8-8-8zm13.1-377.7l-43.5-41.9a8 8 0 00-11.2.1l-129 129C634.3 101.2 577 64 511 64c-93.9 0-170 75.3-170 168v224c0 6.7.4 13.3 1.2 19.8l-68 68A252.33 252.33 0 01258 454c-.2-4.4-3.8-8-8-8h-60c-4.4 0-8 3.6-8 8 0 53 12.5 103 34.6 147.4l-137 137a8.03 8.03 0 000 11.3l42.7 42.7c3.1 3.1 8.2 3.1 11.3 0L846.2 79.8l.1-.1c3.1-3.2 3-8.3-.2-11.4zM417 401V232c0-50.6 41.9-92 94-92 46 0 84.1 32.3 92.3 74.7L417 401z"}}]},name:"audio-muted",theme:"outlined"},Cn=function(t,n){return c.createElement($e,X({},t,{ref:n,icon:Sn}))},xn=c.forwardRef(Cn),bn={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M842 454c0-4.4-3.6-8-8-8h-60c-4.4 0-8 3.6-8 8 0 140.3-113.7 254-254 254S258 594.3 258 454c0-4.4-3.6-8-8-8h-60c-4.4 0-8 3.6-8 8 0 168.7 126.6 307.9 290 327.6V884H326.7c-13.7 0-24.7 14.3-24.7 32v36c0 4.4 2.8 8 6.2 8h407.6c3.4 0 6.2-3.6 6.2-8v-36c0-17.7-11-32-24.7-32H548V782.1c165.3-18 294-158 294-328.1zM512 624c93.9 0 170-75.2 170-168V232c0-92.8-76.1-168-170-168s-170 75.2-170 168v224c0 92.8 76.1 168 170 168zm-94-392c0-50.6 41.9-92 94-92s94 41.4 94 92v224c0 50.6-41.9 92-94 92s-94-41.4-94-92V232z"}}]},name:"audio",theme:"outlined"},En=function(t,n){return c.createElement($e,X({},t,{ref:n,icon:bn}))},Rn=c.forwardRef(En),$n={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"defs",attrs:{},children:[{tag:"style",attrs:{}}]},{tag:"path",attrs:{d:"M899.1 869.6l-53-305.6H864c14.4 0 26-11.6 26-26V346c0-14.4-11.6-26-26-26H618V138c0-14.4-11.6-26-26-26H432c-14.4 0-26 11.6-26 26v182H160c-14.4 0-26 11.6-26 26v192c0 14.4 11.6 26 26 26h17.9l-53 305.6a25.95 25.95 0 0025.6 30.4h723c1.5 0 3-.1 4.4-.4a25.88 25.88 0 0021.2-30zM204 390h272V182h72v208h272v104H204V390zm468 440V674c0-4.4-3.6-8-8-8h-48c-4.4 0-8 3.6-8 8v156H416V674c0-4.4-3.6-8-8-8h-48c-4.4 0-8 3.6-8 8v156H202.8l45.1-260H776l45.1 260H672z"}}]},name:"clear",theme:"outlined"},wn=function(t,n){return c.createElement($e,X({},t,{ref:n,icon:$n}))},Tn=c.forwardRef(wn);const je=c.createContext({}),Mn=e=>{const{antCls:t,componentCls:n,iconCls:r,avatarBg:o,avatarColor:s,containerSize:a,containerSizeLG:i,containerSizeSM:l,textFontSize:d,textFontSizeLG:u,textFontSizeSM:p,borderRadius:m,borderRadiusLG:C,borderRadiusSM:w,lineWidth:S,lineType:R}=e,E=(g,h,v)=>({width:g,height:g,borderRadius:"50%",[`&${n}-square`]:{borderRadius:v},[`&${n}-icon`]:{fontSize:h,[`> ${r}`]:{margin:0}}});return{[n]:Object.assign(Object.assign(Object.assign(Object.assign({},Xt(e)),{position:"relative",display:"inline-flex",justifyContent:"center",alignItems:"center",overflow:"hidden",color:s,whiteSpace:"nowrap",textAlign:"center",verticalAlign:"middle",background:o,border:`${Ft(S)} ${R} transparent`,"&-image":{background:"transparent"},[`${t}-image-img`]:{display:"block"}}),E(a,d,m)),{"&-lg":Object.assign({},E(i,u,C)),"&-sm":Object.assign({},E(l,p,w)),"> img":{display:"block",width:"100%",height:"100%",objectFit:"cover"}})}},In=e=>{const{componentCls:t,groupBorderColor:n,groupOverlapping:r,groupSpace:o}=e;return{[`${t}-group`]:{display:"inline-flex",[t]:{borderColor:n},"> *:not(:first-child)":{marginInlineStart:r}},[`${t}-group-popover`]:{[`${t} + ${t}`]:{marginInlineStart:o}}}},An=e=>{const{controlHeight:t,controlHeightLG:n,controlHeightSM:r,fontSize:o,fontSizeLG:s,fontSizeXL:a,fontSizeHeading3:i,marginXS:l,marginXXS:d,colorBorderBg:u}=e;return{containerSize:t,containerSizeLG:n,containerSizeSM:r,textFontSize:Math.round((s+a)/2),textFontSizeLG:i,textFontSizeSM:o,groupSpace:d,groupOverlapping:-l,groupBorderColor:u}},gt=qt("Avatar",e=>{const{colorTextLightSolid:t,colorTextPlaceholder:n}=e,r=ke(e,{avatarBg:n,avatarColor:t});return[Mn(r),In(r)]},An);var _n=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,r=Object.getOwnPropertySymbols(e);o<r.length;o++)t.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(e,r[o])&&(n[r[o]]=e[r[o]]);return n};const vt=c.forwardRef((e,t)=>{const{prefixCls:n,shape:r,size:o,src:s,srcSet:a,icon:i,className:l,rootClassName:d,style:u,alt:p,draggable:m,children:C,crossOrigin:w,gap:S=4,onError:R}=e,E=_n(e,["prefixCls","shape","size","src","srcSet","icon","className","rootClassName","style","alt","draggable","children","crossOrigin","gap","onError"]),[g,h]=c.useState(1),[v,y]=c.useState(!1),[M,I]=c.useState(!0),O=c.useRef(null),b=c.useRef(null),x=Ut(t,O),{getPrefixCls:T,avatar:N}=c.useContext(at),$=c.useContext(je),A=()=>{if(!b.current||!O.current)return;const D=b.current.offsetWidth,L=O.current.offsetWidth;D!==0&&L!==0&&S*2<L&&h(L-S*2<D?(L-S*2)/D:1)};c.useEffect(()=>{y(!0)},[]),c.useEffect(()=>{I(!0),h(1)},[s]),c.useEffect(A,[S]);const P=()=>{(R==null?void 0:R())!==!1&&I(!1)},_=Wt(D=>{var L,oe;return(oe=(L=o??($==null?void 0:$.size))!==null&&L!==void 0?L:D)!==null&&oe!==void 0?oe:"default"}),H=Object.keys(typeof _=="object"?_||{}:{}).some(D=>["xs","sm","md","lg","xl","xxl"].includes(D)),B=Gt(H),G=c.useMemo(()=>{if(typeof _!="object")return{};const D=Kt.find(oe=>B[oe]),L=_[D];return L?{width:L,height:L,fontSize:L&&(i||C)?L/2:18}:{}},[B,_]),V=T("avatar",n),Q=it(V),[J,ie,ce]=gt(V,Q),ee=j({[`${V}-lg`]:_==="large",[`${V}-sm`]:_==="small"}),F=c.isValidElement(s),te=r||($==null?void 0:$.shape)||"circle",Y=j(V,ee,N==null?void 0:N.className,`${V}-${te}`,{[`${V}-image`]:F||s&&M,[`${V}-icon`]:!!i},ce,Q,l,d,ie),Ae=typeof _=="number"?{width:_,height:_,fontSize:i?_/2:18}:{};let Z;if(typeof s=="string"&&M)Z=c.createElement("img",{src:s,draggable:m,srcSet:a,onError:P,alt:p,crossOrigin:w});else if(F)Z=s;else if(i)Z=i;else if(v||g!==1){const D=`scale(${g})`,L={msTransform:D,WebkitTransform:D,transform:D};Z=c.createElement(Yt,{onResize:A},c.createElement("span",{className:`${V}-string`,ref:b,style:Object.assign({},L)},C))}else Z=c.createElement("span",{className:`${V}-string`,style:{opacity:0},ref:b},C);return J(c.createElement("span",Object.assign({},E,{style:Object.assign(Object.assign(Object.assign(Object.assign({},Ae),G),N==null?void 0:N.style),u),className:Y,ref:x}),Z))}),We=e=>{const{size:t,shape:n}=c.useContext(je),r=c.useMemo(()=>({size:e.size||t,shape:e.shape||n}),[e.size,e.shape,t,n]);return c.createElement(je.Provider,{value:r},e.children)},Nn=e=>{var t,n,r,o;const{getPrefixCls:s,direction:a}=c.useContext(at),{prefixCls:i,className:l,rootClassName:d,style:u,maxCount:p,maxStyle:m,size:C,shape:w,maxPopoverPlacement:S,maxPopoverTrigger:R,children:E,max:g}=e,h=s("avatar",i),v=`${h}-group`,y=it(h),[M,I,O]=gt(h,y),b=j(v,{[`${v}-rtl`]:a==="rtl"},O,y,l,d,I),x=Zt(E).map(($,A)=>Qt($,{key:`avatar-key-${A}`})),T=(g==null?void 0:g.count)||p,N=x.length;if(T&&T<N){const $=x.slice(0,T),A=x.slice(T,N),P=(g==null?void 0:g.style)||m,_=((t=g==null?void 0:g.popover)===null||t===void 0?void 0:t.trigger)||R||"hover",H=((n=g==null?void 0:g.popover)===null||n===void 0?void 0:n.placement)||S||"top",B=Object.assign(Object.assign({content:A},g==null?void 0:g.popover),{classNames:{root:j(`${v}-popover`,(o=(r=g==null?void 0:g.popover)===null||r===void 0?void 0:r.classNames)===null||o===void 0?void 0:o.root)},placement:H,trigger:_});return $.push(c.createElement(Jt,Object.assign({key:"avatar-popover-key",destroyTooltipOnHide:!0},B),c.createElement(vt,{style:P},`+${N-T}`))),M(c.createElement(We,{shape:w,size:C},c.createElement("div",{className:b,style:u},$)))}return M(c.createElement(We,{shape:w,size:C},c.createElement("div",{className:b,style:u},x)))},yt=vt;yt.Group=Nn;const Pn="1.6.0",zn=f.createContext({}),Bn={classNames:{},styles:{},className:"",style:{}},St=e=>{const t=f.useContext(zn);return f.useMemo(()=>({...Bn,...t[e]}),[t[e]])};function he(){const{getPrefixCls:e,direction:t,csp:n,iconPrefixCls:r,theme:o}=f.useContext(en.ConfigContext);return{theme:o,getPrefixCls:e,direction:t,csp:n,iconPrefixCls:r}}var On="%";function He(e){return e.join(On)}var jn=function(){function e(t){Te(this,e),k(this,"instanceId",void 0),k(this,"cache",new Map),k(this,"extracted",new Set),this.instanceId=t}return we(e,[{key:"get",value:function(n){return this.opGet(He(n))}},{key:"opGet",value:function(n){return this.cache.get(n)||null}},{key:"update",value:function(n,r){return this.opUpdate(He(n),r)}},{key:"opUpdate",value:function(n,r){var o=this.cache.get(n),s=r(o);s===null?this.cache.delete(n):this.cache.set(n,s)}}]),e}(),Ve="data-token-hash",me="data-css-hash",ae="__cssinjs_instance__";function Hn(){var e=Math.random().toString(12).slice(2);if(typeof document<"u"&&document.head&&document.body){var t=document.body.querySelectorAll("style[".concat(me,"]"))||[],n=document.head.firstChild;Array.from(t).forEach(function(o){o[ae]=o[ae]||e,o[ae]===e&&document.head.insertBefore(o,n)});var r={};Array.from(document.querySelectorAll("style[".concat(me,"]"))).forEach(function(o){var s=o.getAttribute(me);if(r[s]){if(o[ae]===e){var a;(a=o.parentNode)===null||a===void 0||a.removeChild(o)}}else r[s]=!0})}return new jn(e)}var Ct=c.createContext({hashPriority:"low",cache:Hn(),defaultCache:!0});function Ln(e,t){if(e.length!==t.length)return!1;for(var n=0;n<e.length;n++)if(e[n]!==t[n])return!1;return!0}var De=function(){function e(){Te(this,e),k(this,"cache",void 0),k(this,"keys",void 0),k(this,"cacheCallTimes",void 0),this.cache=new Map,this.keys=[],this.cacheCallTimes=0}return we(e,[{key:"size",value:function(){return this.keys.length}},{key:"internalGet",value:function(n){var r,o,s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,a={map:this.cache};return n.forEach(function(i){if(!a)a=void 0;else{var l;a=(l=a)===null||l===void 0||(l=l.map)===null||l===void 0?void 0:l.get(i)}}),(r=a)!==null&&r!==void 0&&r.value&&s&&(a.value[1]=this.cacheCallTimes++),(o=a)===null||o===void 0?void 0:o.value}},{key:"get",value:function(n){var r;return(r=this.internalGet(n,!0))===null||r===void 0?void 0:r[0]}},{key:"has",value:function(n){return!!this.internalGet(n)}},{key:"set",value:function(n,r){var o=this;if(!this.has(n)){if(this.size()+1>e.MAX_CACHE_SIZE+e.MAX_CACHE_OFFSET){var s=this.keys.reduce(function(d,u){var p=W(d,2),m=p[1];return o.internalGet(u)[1]<m?[u,o.internalGet(u)[1]]:d},[this.keys[0],this.cacheCallTimes]),a=W(s,1),i=a[0];this.delete(i)}this.keys.push(n)}var l=this.cache;n.forEach(function(d,u){if(u===n.length-1)l.set(d,{value:[r,o.cacheCallTimes++]});else{var p=l.get(d);p?p.map||(p.map=new Map):l.set(d,{map:new Map}),l=l.get(d).map}})}},{key:"deleteByPath",value:function(n,r){var o=n.get(r[0]);if(r.length===1){var s;return o.map?n.set(r[0],{map:o.map}):n.delete(r[0]),(s=o.value)===null||s===void 0?void 0:s[0]}var a=this.deleteByPath(o.map,r.slice(1));return(!o.map||o.map.size===0)&&!o.value&&n.delete(r[0]),a}},{key:"delete",value:function(n){if(this.has(n))return this.keys=this.keys.filter(function(r){return!Ln(r,n)}),this.deleteByPath(this.cache,n)}}]),e}();k(De,"MAX_CACHE_SIZE",20);k(De,"MAX_CACHE_OFFSET",5);var Ge=0,xt=function(){function e(t){Te(this,e),k(this,"derivatives",void 0),k(this,"id",void 0),this.derivatives=Array.isArray(t)?t:[t],this.id=Ge,t.length===0&&tn(t.length>0),Ge+=1}return we(e,[{key:"getDerivativeToken",value:function(n){return this.derivatives.reduce(function(r,o){return o(n,r)},void 0)}}]),e}(),Pe=new De;function kn(e){var t=Array.isArray(e)?e:[e];return Pe.has(t)||Pe.set(t,new xt(t)),Pe.get(t)}var Vn=new WeakMap,ze={};function Dn(e,t){for(var n=Vn,r=0;r<t.length;r+=1){var o=t[r];n.has(o)||n.set(o,new WeakMap),n=n.get(o)}return n.has(ze)||n.set(ze,e()),n.get(ze)}var Ke=new WeakMap;function pe(e){var t=Ke.get(e)||"";return t||(Object.keys(e).forEach(function(n){var r=e[n];t+=n,r instanceof xt?t+=r.id:r&&nn(r)==="object"?t+=pe(r):t+=r}),t=Ce(t),Ke.set(e,t)),t}function Ye(e,t){return Ce("".concat(t,"_").concat(pe(e)))}function be(e){return typeof e=="number"?"".concat(e,"px"):e}function Ee(e,t,n){var r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{},o=arguments.length>4&&arguments[4]!==void 0?arguments[4]:!1;if(o)return e;var s=re(re({},r),{},k(k({},Ve,t),me,n)),a=Object.keys(s).map(function(i){var l=s[i];return l?"".concat(i,'="').concat(l,'"'):null}).filter(function(i){return i}).join(" ");return"<style ".concat(a,">").concat(e,"</style>")}var qn=function(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"";return"--".concat(n?"".concat(n,"-"):"").concat(t).replace(/([a-z0-9])([A-Z])/g,"$1-$2").replace(/([A-Z]+)([A-Z][a-z0-9]+)/g,"$1-$2").replace(/([a-z])([A-Z0-9])/g,"$1-$2").toLowerCase()},Xn=function(t,n,r){return Object.keys(t).length?".".concat(n).concat(r!=null&&r.scope?".".concat(r.scope):"","{").concat(Object.entries(t).map(function(o){var s=W(o,2),a=s[0],i=s[1];return"".concat(a,":").concat(i,";")}).join(""),"}"):""},Fn=function(t,n,r){var o={},s={};return Object.entries(t).forEach(function(a){var i,l,d=W(a,2),u=d[0],p=d[1];if(r!=null&&(i=r.preserve)!==null&&i!==void 0&&i[u])s[u]=p;else if((typeof p=="string"||typeof p=="number")&&!(r!=null&&(l=r.ignore)!==null&&l!==void 0&&l[u])){var m,C=qn(u,r==null?void 0:r.prefix);o[C]=typeof p=="number"&&!(r!=null&&(m=r.unitless)!==null&&m!==void 0&&m[u])?"".concat(p,"px"):String(p),s[u]="var(".concat(C,")")}}),[s,Xn(o,n,{scope:r==null?void 0:r.scope})]},Un=re({},lt),Ze=Un.useInsertionEffect,Wn=function(t,n,r){c.useMemo(t,r),ct(function(){return n(!0)},r)},Gn=Ze?function(e,t,n){return Ze(function(){return e(),t()},n)}:Wn,Kn=re({},lt),Yn=Kn.useInsertionEffect,Zn=function(t){var n=[],r=!1;function o(s){r||n.push(s)}return c.useEffect(function(){return r=!1,function(){r=!0,n.length&&n.forEach(function(s){return s()})}},t),o},Qn=function(){return function(t){t()}},Jn=typeof Yn<"u"?Zn:Qn;function er(e,t,n,r,o){var s=c.useContext(Ct),a=s.cache,i=[e].concat(ut(t)),l=He(i),d=Jn([l]),u=function(w){a.opUpdate(l,function(S){var R=S||[void 0,void 0],E=W(R,2),g=E[0],h=g===void 0?0:g,v=E[1],y=v,M=y||n(),I=[h,M];return w?w(I):I})};c.useMemo(function(){u()},[l]);var p=a.opGet(l),m=p[1];return Gn(function(){o==null||o(m)},function(C){return u(function(w){var S=W(w,2),R=S[0],E=S[1];return C&&R===0&&(o==null||o(m)),[R+1,E]}),function(){a.opUpdate(l,function(w){var S=w||[],R=W(S,2),E=R[0],g=E===void 0?0:E,h=R[1],v=g-1;return v===0?(d(function(){(C||!a.opGet(l))&&(r==null||r(h,!1))}),null):[g-1,h]})}},[l]),m}var tr={},nr="css",ne=new Map;function rr(e){ne.set(e,(ne.get(e)||0)+1)}function or(e,t){if(typeof document<"u"){var n=document.querySelectorAll("style[".concat(Ve,'="').concat(e,'"]'));n.forEach(function(r){if(r[ae]===t){var o;(o=r.parentNode)===null||o===void 0||o.removeChild(r)}})}}var sr=0;function ar(e,t){ne.set(e,(ne.get(e)||0)-1);var n=new Set;ne.forEach(function(r,o){r<=0&&n.add(o)}),ne.size-n.size>sr&&n.forEach(function(r){or(r,t),ne.delete(r)})}var ir=function(t,n,r,o){var s=r.getDerivativeToken(t),a=re(re({},s),n);return o&&(a=o(a)),a},bt="token";function cr(e,t){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},r=c.useContext(Ct),o=r.cache.instanceId,s=r.container,a=n.salt,i=a===void 0?"":a,l=n.override,d=l===void 0?tr:l,u=n.formatToken,p=n.getComputedToken,m=n.cssVar,C=Dn(function(){return Object.assign.apply(Object,[{}].concat(ut(t)))},t),w=pe(C),S=pe(d),R=m?pe(m):"",E=er(bt,[i,e.id,w,S,R],function(){var g,h=p?p(C,d,e):ir(C,d,e,u),v=re({},h),y="";if(m){var M=Fn(h,m.key,{prefix:m.prefix,ignore:m.ignore,unitless:m.unitless,preserve:m.preserve}),I=W(M,2);h=I[0],y=I[1]}var O=Ye(h,i);h._tokenKey=O,v._tokenKey=Ye(v,i);var b=(g=m==null?void 0:m.key)!==null&&g!==void 0?g:O;h._themeKey=b,rr(b);var x="".concat(nr,"-").concat(Ce(O));return h._hashId=x,[h,x,v,y,(m==null?void 0:m.key)||""]},function(g){ar(g[0]._themeKey,o)},function(g){var h=W(g,4),v=h[0],y=h[3];if(m&&y){var M=rn(y,Ce("css-variables-".concat(v._themeKey)),{mark:me,prepend:"queue",attachTo:s,priority:-999});M[ae]=o,M.setAttribute(Ve,v._themeKey)}});return E}var lr=function(t,n,r){var o=W(t,5),s=o[2],a=o[3],i=o[4],l=r||{},d=l.plain;if(!a)return null;var u=s._tokenKey,p=-999,m={"data-rc-order":"prependQueue","data-rc-priority":"".concat(p)},C=Ee(a,i,u,m,d);return[p,u,C]};function ur(e){var t=on(an(e),sn);return t.replace(/\{%%%\:[^;];}/g,";")}var dr="style",fr=function(t,n,r){var o=W(t,6),s=o[0],a=o[1],i=o[2],l=o[3],d=o[4],u=o[5],p=r||{},m=p.plain;if(d)return null;var C=s,w={"data-rc-order":"prependQueue","data-rc-priority":"".concat(u)};return C=Ee(s,a,i,w,m),l&&Object.keys(l).forEach(function(S){if(!n[S]){n[S]=!0;var R=ur(l[S]),E=Ee(R,a,"_effect-".concat(S),w,m);S.startsWith("@layer")?C=E+C:C+=E}}),[u,i,C]},mr="cssVar",pr=function(t,n,r){var o=W(t,4),s=o[1],a=o[2],i=o[3],l=r||{},d=l.plain;if(!s)return null;var u=-999,p={"data-rc-order":"prependQueue","data-rc-priority":"".concat(u)},m=Ee(s,i,a,p,d);return[u,a,m]};k(k(k({},dr,fr),bt,lr),mr,pr);var Et=function(){function e(t,n){Te(this,e),k(this,"name",void 0),k(this,"style",void 0),k(this,"_keyframe",!0),this.name=t,this.style=n}return we(e,[{key:"getName",value:function(){var n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"";return n?"".concat(n,"-").concat(this.name):this.name}}]),e}();function se(e){return e.notSplit=!0,e}se(["borderTop","borderBottom"]),se(["borderTop"]),se(["borderBottom"]),se(["borderLeft","borderRight"]),se(["borderLeft"]),se(["borderRight"]);const hr=kn(Oe.defaultAlgorithm),gr={screenXS:!0,screenXSMin:!0,screenXSMax:!0,screenSM:!0,screenSMMin:!0,screenSMMax:!0,screenMD:!0,screenMDMin:!0,screenMDMax:!0,screenLG:!0,screenLGMin:!0,screenLGMax:!0,screenXL:!0,screenXLMin:!0,screenXLMax:!0,screenXXL:!0,screenXXLMin:!0},Rt=(e,t,n)=>{const r=n.getDerivativeToken(e),{override:o,...s}=t;let a={...r,override:o};return a=un(a),s&&Object.entries(s).forEach(([i,l])=>{const{theme:d,...u}=l;let p=u;d&&(p=Rt({...a,...u},{override:u},d)),a[i]=p}),a};function vr(){const{token:e,hashed:t,theme:n=hr,override:r,cssVar:o}=f.useContext(Oe._internalContext),[s,a,i]=cr(n,[Oe.defaultSeed,e],{salt:`${Pn}-${t||""}`,override:r,getComputedToken:Rt,cssVar:o&&{prefix:o.prefix,key:o.key,unitless:ln,ignore:cn,preserve:gr}});return[n,i,t?a:"",s,o]}const{genStyleHooks:$t}=dn({usePrefix:()=>{const{getPrefixCls:e,iconPrefixCls:t}=he();return{iconPrefixCls:t,rootPrefixCls:e()}},useToken:()=>{const[e,t,n,r,o]=vr();return{theme:e,realToken:t,hashId:n,token:r,cssVar:o}},useCSP:()=>{const{csp:e}=he();return e??{}},layer:{name:"antdx",dependencies:["antd"]}});function yr(e,t){return c.useImperativeHandle(e,()=>{const n=t(),{nativeElement:r}=n;return new Proxy(r,{get(o,s){return n[s]?n[s]:Reflect.get(o,s)}})})}const wt=c.createContext({}),Qe=()=>({height:0}),Je=e=>({height:e.scrollHeight});function Sr(e){const{title:t,onOpenChange:n,open:r,children:o,className:s,style:a,classNames:i={},styles:l={},closable:d,forceRender:u}=e,{prefixCls:p}=c.useContext(wt),m=`${p}-header`;return c.createElement(fn,{motionEnter:!0,motionLeave:!0,motionName:`${m}-motion`,leavedClassName:`${m}-motion-hidden`,onEnterStart:Qe,onEnterActive:Je,onLeaveStart:Je,onLeaveActive:Qe,visible:r,forceRender:u},({className:C,style:w})=>c.createElement("div",{className:j(m,C,s),style:{...w,...a}},(d!==!1||t)&&c.createElement("div",{className:j(`${m}-header`,i.header),style:{...l.header}},c.createElement("div",{className:`${m}-title`},t),d!==!1&&c.createElement("div",{className:`${m}-close`},c.createElement(dt,{type:"text",icon:c.createElement(ft,null),size:"small",onClick:()=>{n==null||n(!r)}}))),o&&c.createElement("div",{className:j(`${m}-content`,i.content),style:{...l.content}},o)))}const Me=c.createContext(null);function Cr(e,t){const{className:n,action:r,onClick:o,...s}=e,a=c.useContext(Me),{prefixCls:i,disabled:l}=a,d=s.disabled??l??a[`${r}Disabled`];return c.createElement(dt,X({type:"text"},s,{ref:t,onClick:u=>{var p;d||((p=a[r])==null||p.call(a),o==null||o(u))},className:j(i,n,{[`${i}-disabled`]:d})}))}const Ie=c.forwardRef(Cr);function xr(e,t){return c.createElement(Ie,X({icon:c.createElement(Tn,null)},e,{action:"onClear",ref:t}))}const br=c.forwardRef(xr),Er=c.memo(e=>{const{className:t}=e;return f.createElement("svg",{color:"currentColor",viewBox:"0 0 1000 1000",xmlns:"http://www.w3.org/2000/svg",className:t},f.createElement("title",null,"Stop Loading"),f.createElement("rect",{fill:"currentColor",height:"250",rx:"24",ry:"24",width:"250",x:"375",y:"375"}),f.createElement("circle",{cx:"500",cy:"500",fill:"none",r:"450",stroke:"currentColor",strokeWidth:"100",opacity:"0.45"}),f.createElement("circle",{cx:"500",cy:"500",fill:"none",r:"450",stroke:"currentColor",strokeWidth:"100",strokeDasharray:"600 9999999"},f.createElement("animateTransform",{attributeName:"transform",dur:"1s",from:"0 500 500",repeatCount:"indefinite",to:"360 500 500",type:"rotate"})))});function Rr(e,t){const{prefixCls:n}=c.useContext(Me),{className:r}=e;return c.createElement(Ie,X({icon:null,color:"primary",variant:"text",shape:"circle"},e,{className:j(r,`${n}-loading-button`),action:"onCancel",ref:t}),c.createElement(Er,{className:`${n}-loading-icon`}))}const Tt=c.forwardRef(Rr);function $r(e,t){return c.createElement(Ie,X({icon:c.createElement(yn,null),type:"primary",shape:"circle"},e,{action:"onSend",ref:t}))}const Mt=c.forwardRef($r),de=1e3,fe=4,Se=140,et=Se/2,ge=250,tt=500,ve=.8;function wr({className:e}){return f.createElement("svg",{color:"currentColor",viewBox:`0 0 ${de} ${de}`,xmlns:"http://www.w3.org/2000/svg",className:e},f.createElement("title",null,"Speech Recording"),Array.from({length:fe}).map((t,n)=>{const r=(de-Se*fe)/(fe-1),o=n*(r+Se),s=de/2-ge/2,a=de/2-tt/2;return f.createElement("rect",{fill:"currentColor",rx:et,ry:et,height:ge,width:Se,x:o,y:s,key:n},f.createElement("animate",{attributeName:"height",values:`${ge}; ${tt}; ${ge}`,keyTimes:"0; 0.5; 1",dur:`${ve}s`,begin:`${ve/fe*n}s`,repeatCount:"indefinite"}),f.createElement("animate",{attributeName:"y",values:`${s}; ${a}; ${s}`,keyTimes:"0; 0.5; 1",dur:`${ve}s`,begin:`${ve/fe*n}s`,repeatCount:"indefinite"}))}))}function Tr(e,t){const{speechRecording:n,onSpeechDisabled:r,prefixCls:o}=c.useContext(Me);let s=null;return n?s=c.createElement(wr,{className:`${o}-recording-icon`}):r?s=c.createElement(xn,null):s=c.createElement(Rn,null),c.createElement(Ie,X({icon:s,color:"primary",variant:"text"},e,{action:"onSpeech",ref:t}))}const It=c.forwardRef(Tr),Mr=e=>{const{componentCls:t,calc:n}=e,r=`${t}-header`;return{[t]:{[r]:{borderBottomWidth:e.lineWidth,borderBottomStyle:"solid",borderBottomColor:e.colorBorder,"&-header":{background:e.colorFillAlter,fontSize:e.fontSize,lineHeight:e.lineHeight,paddingBlock:n(e.paddingSM).sub(e.lineWidthBold).equal(),paddingInlineStart:e.padding,paddingInlineEnd:e.paddingXS,display:"flex",borderRadius:{_skip_check_:!0,value:n(e.borderRadius).mul(2).equal()},borderEndStartRadius:0,borderEndEndRadius:0,[`${r}-title`]:{flex:"auto"}},"&-content":{padding:e.padding},"&-motion":{transition:["height","border"].map(o=>`${o} ${e.motionDurationSlow}`).join(","),overflow:"hidden","&-enter-start, &-leave-active":{borderBottomColor:"transparent"},"&-hidden":{display:"none"}}}}}},Ir=e=>{const{componentCls:t,padding:n,paddingSM:r,paddingXS:o,paddingXXS:s,lineWidth:a,lineWidthBold:i,calc:l}=e;return{[t]:{position:"relative",width:"100%",boxSizing:"border-box",boxShadow:`${e.boxShadowTertiary}`,transition:`background ${e.motionDurationSlow}`,borderRadius:{_skip_check_:!0,value:l(e.borderRadius).mul(2).equal()},borderColor:e.colorBorder,borderWidth:0,borderStyle:"solid","&:after":{content:'""',position:"absolute",inset:0,pointerEvents:"none",transition:`border-color ${e.motionDurationSlow}`,borderRadius:{_skip_check_:!0,value:"inherit"},borderStyle:"inherit",borderColor:"inherit",borderWidth:a},"&:focus-within":{boxShadow:`${e.boxShadowSecondary}`,borderColor:e.colorPrimary,"&:after":{borderWidth:i}},"&-disabled":{background:e.colorBgContainerDisabled},[`&${t}-rtl`]:{direction:"rtl"},[`${t}-content`]:{display:"flex",gap:o,width:"100%",paddingBlock:r,paddingInlineStart:n,paddingInlineEnd:r,boxSizing:"border-box",alignItems:"flex-end"},[`${t}-prefix`]:{flex:"none"},[`${t}-input`]:{padding:0,borderRadius:0,flex:"auto",alignSelf:"center",minHeight:"auto"},[`${t}-actions-list`]:{flex:"none",display:"flex","&-presets":{gap:e.paddingXS}},[`${t}-actions-btn`]:{"&-disabled":{opacity:.45},"&-loading-button":{padding:0,border:0},"&-loading-icon":{height:e.controlHeight,width:e.controlHeight,verticalAlign:"top"},"&-recording-icon":{height:"1.2em",width:"1.2em",verticalAlign:"top"}},[`${t}-footer`]:{paddingInlineStart:n,paddingInlineEnd:r,paddingBlockEnd:r,paddingBlockStart:s,boxSizing:"border-box"}}}},Ar=()=>({}),_r=$t("Sender",e=>{const{paddingXS:t,calc:n}=e,r=ke(e,{SenderContentMaxWidth:`calc(100% - ${be(n(t).add(32).equal())})`});return[Ir(r),Mr(r)]},Ar);let Re;!Re&&typeof window<"u"&&(Re=window.SpeechRecognition||window.webkitSpeechRecognition);function Nr(e,t){const n=xe(e),[r,o,s]=f.useMemo(()=>typeof t=="object"?[t.recording,t.onRecordingChange,typeof t.recording=="boolean"]:[void 0,void 0,!1],[t]),[a,i]=f.useState(null);f.useEffect(()=>{if(typeof navigator<"u"&&"permissions"in navigator){let S=null;return navigator.permissions.query({name:"microphone"}).then(R=>{i(R.state),R.onchange=function(){i(this.state)},S=R}),()=>{S&&(S.onchange=null)}}},[]);const l=Re&&a!=="denied",d=f.useRef(null),[u,p]=mt(!1,{value:r}),m=f.useRef(!1),C=()=>{if(l&&!d.current){const S=new Re;S.onstart=()=>{p(!0)},S.onend=()=>{p(!1)},S.onresult=R=>{var E,g,h;if(!m.current){const v=(h=(g=(E=R.results)==null?void 0:E[0])==null?void 0:g[0])==null?void 0:h.transcript;n(v)}m.current=!1},d.current=S}},w=xe(S=>{S&&!u||(m.current=S,s?o==null||o(!u):(C(),d.current&&(u?(d.current.stop(),o==null||o(!1)):(d.current.start(),o==null||o(!0)))))});return[l,w,u]}function Pr(e,t,n){return pn(e,t)||n}const nt={SendButton:Mt,ClearButton:br,LoadingButton:Tt,SpeechButton:It},zr=f.forwardRef((e,t)=>{const{prefixCls:n,styles:r={},classNames:o={},className:s,rootClassName:a,style:i,defaultValue:l,value:d,readOnly:u,submitType:p="enter",onSubmit:m,loading:C,components:w,onCancel:S,onChange:R,actions:E,onKeyPress:g,onKeyDown:h,disabled:v,allowSpeech:y,prefix:M,footer:I,header:O,onPaste:b,onPasteFile:x,autoSize:T={maxRows:8},...N}=e,{direction:$,getPrefixCls:A}=he(),P=A("sender",n),_=f.useRef(null),H=f.useRef(null);yr(t,()=>{var z,q;return{nativeElement:_.current,focus:(z=H.current)==null?void 0:z.focus,blur:(q=H.current)==null?void 0:q.blur}});const B=St("sender"),G=`${P}-input`,[V,Q,J]=_r(P),ie=j(P,B.className,s,a,Q,J,{[`${P}-rtl`]:$==="rtl",[`${P}-disabled`]:v}),ce=`${P}-actions-btn`,ee=`${P}-actions-list`,[F,te]=mt(l||"",{value:d}),Y=(z,q)=>{te(z),R&&R(z,q)},[Ae,Z,D]=Nr(z=>{Y(`${F} ${z}`)},y),L=Pr(w,["input"],mn.TextArea),Pt={...pt(N,{attr:!0,aria:!0,data:!0}),ref:H},_e=()=>{F&&m&&!C&&m(F)},zt=()=>{Y("")},Ne=f.useRef(!1),Bt=()=>{Ne.current=!0},Ot=()=>{Ne.current=!1},jt=z=>{const q=z.key==="Enter"&&!Ne.current;switch(p){case"enter":q&&!z.shiftKey&&(z.preventDefault(),_e());break;case"shiftEnter":q&&z.shiftKey&&(z.preventDefault(),_e());break}g==null||g(z)},Ht=z=>{var ue;const q=(ue=z.clipboardData)==null?void 0:ue.files;q!=null&&q.length&&x&&(x(q[0],q),z.preventDefault()),b==null||b(z)},Lt=z=>{var q,ue;z.target!==((q=_.current)==null?void 0:q.querySelector(`.${G}`))&&z.preventDefault(),(ue=H.current)==null||ue.focus()};let le=f.createElement(ht,{className:`${ee}-presets`},y&&f.createElement(It,null),C?f.createElement(Tt,null):f.createElement(Mt,null));typeof E=="function"?le=E(le,{components:nt}):(E||E===!1)&&(le=E);const kt={prefixCls:ce,onSend:_e,onSendDisabled:!F,onClear:zt,onClearDisabled:!F,onCancel:S,onCancelDisabled:!C,onSpeech:()=>Z(!1),onSpeechDisabled:!Ae,speechRecording:D,disabled:v},Fe=typeof I=="function"?I({components:nt}):I||null;return V(f.createElement("div",{ref:_,className:ie,style:{...B.style,...i}},O&&f.createElement(wt.Provider,{value:{prefixCls:P}},O),f.createElement(Me.Provider,{value:kt},f.createElement("div",{className:`${P}-content`,onMouseDown:Lt},M&&f.createElement("div",{className:j(`${P}-prefix`,B.classNames.prefix,o.prefix),style:{...B.styles.prefix,...r.prefix}},M),f.createElement(L,X({},Pt,{disabled:v,style:{...B.styles.input,...r.input},className:j(G,B.classNames.input,o.input),autoSize:T,value:F,onChange:z=>{Y(z.target.value,z),Z(!0)},onPressEnter:jt,onCompositionStart:Bt,onCompositionEnd:Ot,onKeyDown:h,onPaste:Ht,variant:"borderless",readOnly:u})),le&&f.createElement("div",{className:j(ee,B.classNames.actions,o.actions),style:{...B.styles.actions,...r.actions}},le)),Fe&&f.createElement("div",{className:j(`${P}-footer`,B.classNames.footer,o.footer),style:{...B.styles.footer,...r.footer}},Fe))))}),At=zr;At.Header=Sr;function ye(e){return typeof e=="string"}const Br=(e,t,n,r)=>{const o=c.useRef(""),[s,a]=c.useState(1),i=t&&ye(e);return ct(()=>{!i&&ye(e)?a(e.length):ye(e)&&ye(o.current)&&e.indexOf(o.current)!==0&&a(1),o.current=e},[e]),c.useEffect(()=>{if(i&&s<e.length){const d=setTimeout(()=>{a(u=>u+n)},r);return()=>{clearTimeout(d)}}},[s,t,e]),[i?e.slice(0,s):e,i&&s<e.length]};function Or(e){return c.useMemo(()=>{if(!e)return[!1,0,0,null];let t={step:1,interval:50,suffix:null};return typeof e=="object"&&(t={...t,...e}),[!0,t.step,t.interval,t.suffix]},[e])}const jr=({prefixCls:e})=>f.createElement("span",{className:`${e}-dot`},f.createElement("i",{className:`${e}-dot-item`,key:"item-1"}),f.createElement("i",{className:`${e}-dot-item`,key:"item-2"}),f.createElement("i",{className:`${e}-dot-item`,key:"item-3"})),Hr=e=>{const{componentCls:t,paddingSM:n,padding:r}=e;return{[t]:{[`${t}-content`]:{"&-filled,&-outlined,&-shadow":{padding:`${be(n)} ${be(r)}`,borderRadius:e.borderRadiusLG},"&-filled":{backgroundColor:e.colorFillContent},"&-outlined":{border:`1px solid ${e.colorBorderSecondary}`},"&-shadow":{boxShadow:e.boxShadowTertiary}}}}},Lr=e=>{const{componentCls:t,fontSize:n,lineHeight:r,paddingSM:o,padding:s,calc:a}=e,i=a(n).mul(r).div(2).add(o).equal(),l=`${t}-content`;return{[t]:{[l]:{"&-round":{borderRadius:{_skip_check_:!0,value:i},paddingInline:a(s).mul(1.25).equal()}},[`&-start ${l}-corner`]:{borderStartStartRadius:e.borderRadiusXS},[`&-end ${l}-corner`]:{borderStartEndRadius:e.borderRadiusXS}}}},kr=e=>{const{componentCls:t,padding:n}=e;return{[`${t}-list`]:{display:"flex",flexDirection:"column",gap:n,overflowY:"auto","&::-webkit-scrollbar":{width:8,backgroundColor:"transparent"},"&::-webkit-scrollbar-thumb":{backgroundColor:e.colorTextTertiary,borderRadius:e.borderRadiusSM},"&":{scrollbarWidth:"thin",scrollbarColor:`${e.colorTextTertiary} transparent`}}}},Vr=new Et("loadingMove",{"0%":{transform:"translateY(0)"},"10%":{transform:"translateY(4px)"},"20%":{transform:"translateY(0)"},"30%":{transform:"translateY(-4px)"},"40%":{transform:"translateY(0)"}}),Dr=new Et("cursorBlink",{"0%":{opacity:1},"50%":{opacity:0},"100%":{opacity:1}}),qr=e=>{const{componentCls:t,fontSize:n,lineHeight:r,paddingSM:o,colorText:s,calc:a}=e;return{[t]:{display:"flex",columnGap:o,[`&${t}-end`]:{justifyContent:"end",flexDirection:"row-reverse",[`& ${t}-content-wrapper`]:{alignItems:"flex-end"}},[`&${t}-rtl`]:{direction:"rtl"},[`&${t}-typing ${t}-content:last-child::after`]:{content:'"|"',fontWeight:900,userSelect:"none",opacity:1,marginInlineStart:"0.1em",animationName:Dr,animationDuration:"0.8s",animationIterationCount:"infinite",animationTimingFunction:"linear"},[`& ${t}-avatar`]:{display:"inline-flex",justifyContent:"center",alignSelf:"flex-start"},[`& ${t}-header, & ${t}-footer`]:{fontSize:n,lineHeight:r,color:e.colorText},[`& ${t}-header`]:{marginBottom:e.paddingXXS},[`& ${t}-footer`]:{marginTop:o},[`& ${t}-content-wrapper`]:{flex:"auto",display:"flex",flexDirection:"column",alignItems:"flex-start",minWidth:0,maxWidth:"100%"},[`& ${t}-content`]:{position:"relative",boxSizing:"border-box",minWidth:0,maxWidth:"100%",color:s,fontSize:e.fontSize,lineHeight:e.lineHeight,minHeight:a(o).mul(2).add(a(r).mul(n)).equal(),wordBreak:"break-word",[`& ${t}-dot`]:{position:"relative",height:"100%",display:"flex",alignItems:"center",columnGap:e.marginXS,padding:`0 ${be(e.paddingXXS)}`,"&-item":{backgroundColor:e.colorPrimary,borderRadius:"100%",width:4,height:4,animationName:Vr,animationDuration:"2s",animationIterationCount:"infinite",animationTimingFunction:"linear","&:nth-child(1)":{animationDelay:"0s"},"&:nth-child(2)":{animationDelay:"0.2s"},"&:nth-child(3)":{animationDelay:"0.4s"}}}}}}},Xr=()=>({}),_t=$t("Bubble",e=>{const t=ke(e,{});return[qr(t),kr(t),Hr(t),Lr(t)]},Xr),Nt=f.createContext({}),Fr=(e,t)=>{const{prefixCls:n,className:r,rootClassName:o,style:s,classNames:a={},styles:i={},avatar:l,placement:d="start",loading:u=!1,loadingRender:p,typing:m,content:C="",messageRender:w,variant:S="filled",shape:R,onTypingComplete:E,header:g,footer:h,_key:v,...y}=e,{onUpdate:M}=f.useContext(Nt),I=f.useRef(null);f.useImperativeHandle(t,()=>({nativeElement:I.current}));const{direction:O,getPrefixCls:b}=he(),x=b("bubble",n),T=St("bubble"),[N,$,A,P]=Or(m),[_,H]=Br(C,N,$,A);f.useEffect(()=>{M==null||M()},[_]);const B=f.useRef(!1);f.useEffect(()=>{!H&&!u?B.current||(B.current=!0,E==null||E()):B.current=!1},[H,u]);const[G,V,Q]=_t(x),J=j(x,o,T.className,r,V,Q,`${x}-${d}`,{[`${x}-rtl`]:O==="rtl",[`${x}-typing`]:H&&!u&&!w&&!P}),ie=f.useMemo(()=>f.isValidElement(l)?l:f.createElement(yt,l),[l]),ce=f.useMemo(()=>w?w(_):_,[_,w]),ee=Y=>typeof Y=="function"?Y(_,{key:v}):Y;let F;u?F=p?p():f.createElement(jr,{prefixCls:x}):F=f.createElement(f.Fragment,null,ce,H&&P);let te=f.createElement("div",{style:{...T.styles.content,...i.content},className:j(`${x}-content`,`${x}-content-${S}`,R&&`${x}-content-${R}`,T.classNames.content,a.content)},F);return(g||h)&&(te=f.createElement("div",{className:`${x}-content-wrapper`},g&&f.createElement("div",{className:j(`${x}-header`,T.classNames.header,a.header),style:{...T.styles.header,...i.header}},ee(g)),te,h&&f.createElement("div",{className:j(`${x}-footer`,T.classNames.footer,a.footer),style:{...T.styles.footer,...i.footer}},ee(h)))),G(f.createElement("div",X({style:{...T.style,...s},className:J},y,{ref:I}),l&&f.createElement("div",{style:{...T.styles.avatar,...i.avatar},className:j(`${x}-avatar`,T.classNames.avatar,a.avatar)},ie),te))},qe=f.forwardRef(Fr);function Ur(e,t){const n=c.useCallback((r,o)=>typeof t=="function"?t(r,o):t?t[r.role]||{}:{},[t]);return c.useMemo(()=>(e||[]).map((r,o)=>{const s=r.key??`preset_${o}`;return{...n(r,o),...r,key:s}}),[e,n])}const Wr=({_key:e,...t},n)=>c.createElement(qe,X({},t,{_key:e,ref:r=>{var o;r?n.current[e]=r:(o=n.current)==null||delete o[e]}})),Gr=c.memo(c.forwardRef(Wr)),Kr=1,Yr=(e,t)=>{const{prefixCls:n,rootClassName:r,className:o,items:s,autoScroll:a=!0,roles:i,onScroll:l,...d}=e,u=pt(d,{attr:!0,aria:!0}),p=c.useRef(null),m=c.useRef({}),{getPrefixCls:C}=he(),w=C("bubble",n),S=`${w}-list`,[R,E,g]=_t(w),[h,v]=c.useState(!1);c.useEffect(()=>(v(!0),()=>{v(!1)}),[]);const y=Ur(s,i),[M,I]=c.useState(!0),[O,b]=c.useState(0),x=$=>{const A=$.target;I(A.scrollHeight-Math.abs(A.scrollTop)-A.clientHeight<=Kr),l==null||l($)};c.useEffect(()=>{a&&p.current&&M&&p.current.scrollTo({top:p.current.scrollHeight})},[O]),c.useEffect(()=>{var $;if(a){const A=($=y[y.length-2])==null?void 0:$.key,P=m.current[A];if(P){const{nativeElement:_}=P,{top:H,bottom:B}=_.getBoundingClientRect(),{top:G,bottom:V}=p.current.getBoundingClientRect();H<V&&B>G&&(b(J=>J+1),I(!0))}}},[y.length]),c.useImperativeHandle(t,()=>({nativeElement:p.current,scrollTo:({key:$,offset:A,behavior:P="smooth",block:_})=>{if(typeof A=="number")p.current.scrollTo({top:A,behavior:P});else if($!==void 0){const H=m.current[$];if(H){const B=y.findIndex(G=>G.key===$);I(B===y.length-1),H.nativeElement.scrollIntoView({behavior:P,block:_})}}}}));const T=xe(()=>{a&&b($=>$+1)}),N=c.useMemo(()=>({onUpdate:T}),[]);return R(c.createElement(Nt.Provider,{value:N},c.createElement("div",X({},u,{className:j(S,r,o,E,g,{[`${S}-reach-end`]:M}),ref:p,onScroll:x}),y.map(({key:$,...A})=>c.createElement(Gr,X({},A,{key:$,_key:$,ref:m,typing:h?A.typing:!1}))))))},Zr=c.forwardRef(Yr);qe.List=Zr;function Qr(e){const[,t]=f.useState(0),n=f.useRef(typeof e=="function"?e():e),r=f.useCallback(s=>{n.current=typeof s=="function"?s(n.current):s,t(a=>a+1)},[]),o=f.useCallback(()=>n.current,[]);return[n.current,r,o]}function Jr(e){return Array.isArray(e)?e:[e]}function eo(e){const{defaultMessages:t,agent:n,requestFallback:r,requestPlaceholder:o,parser:s,transformMessage:a,transformStream:i,resolveAbortController:l}=e,d=f.useRef(0),[u,p,m]=Qr(()=>(t||[]).map((h,v)=>({id:`default_${v}`,status:"local",...h}))),C=(h,v)=>{const y={id:`msg_${d.current}`,message:h,status:v};return d.current+=1,y},w=f.useMemo(()=>{const h=[];return u.forEach(v=>{const y=s?s(v.message):v.message,M=Jr(y);M.forEach((I,O)=>{let b=v.id;M.length>1&&(b=`${b}_${O}`),h.push({id:b,message:I,status:v.status})})}),h},[u]),S=h=>h.filter(v=>v.status!=="loading"&&v.status!=="error").map(v=>v.message),R=()=>S(m()),E=h=>{const{chunk:v,chunks:y,originMessage:M}=h;if(typeof a=="function")return a(h);if(v)return v;if(Array.isArray(y)){const I=(y==null?void 0:y.length)>0?y==null?void 0:y[(y==null?void 0:y.length)-1]:void 0;return M||I}return y};return{onRequest:xe(h=>{if(!n)throw new Error("The agent parameter is required when using the onRequest method in an agent generated by useXAgent.");let v=null,y,M={};if(h&&typeof h=="object"&&"message"in h){const{message:b,...x}=h;y=b,M=x}else y=h;p(b=>{let x=[...b,C(y,"local")];if(o){let T;typeof o=="function"?T=o(y,{messages:S(x)}):T=o;const N=C(T,"loading");v=N.id,x=[...x,N]}return x});let I=null;const O=(b,x,T)=>{let N=m().find($=>$.id===I);if(N)p($=>$.map(A=>{if(A.id===I){const P=E({originMessage:A.message,chunk:x,chunks:T,status:b});return{...A,message:P,status:b}}return A}));else{const $=E({chunk:x,status:b,chunks:T});N=C($,b),p(A=>[...A.filter(_=>_.id!==v),N]),I=N.id}return N};n.request({message:y,messages:R(),...M},{onUpdate:b=>{O("loading",b,[])},onSuccess:b=>{O("success",void 0,b)},onError:async b=>{if(r){let x;typeof r=="function"?x=await r(y,{error:b,messages:R()}):x=r,p(T=>[...T.filter(N=>N.id!==v&&N.id!==I),C(x,"error")])}else p(x=>x.filter(T=>T.id!==v&&T.id!==I))},onStream:b=>{l==null||l(b)}},i)}),messages:u,parsedMessages:w,setMessages:p}}const to=`

`,no=`
`,rt=":",Le=e=>(e??"").trim()!=="";function ro(){let e="";return new TransformStream({transform(t,n){e+=t;const r=e.split(to);r.slice(0,-1).forEach(o=>{Le(o)&&n.enqueue(o)}),e=r[r.length-1]},flush(t){Le(e)&&t.enqueue(e)}})}function oo(){return new TransformStream({transform(e,t){const r=e.split(no).reduce((o,s)=>{const a=s.indexOf(rt);if(a===-1)throw new Error(`The key-value separator "${rt}" is not found in the sse line chunk!`);const i=s.slice(0,a);if(!Le(i))return o;const l=s.slice(a+1);return{...o,[i]:l}},{});Object.keys(r).length!==0&&t.enqueue(r)}})}function ot(e){const{readableStream:t,transformStream:n}=e;if(!(t instanceof ReadableStream))throw new Error("The options.readableStream must be an instance of ReadableStream.");const r=new TextDecoderStream,o=n?t.pipeThrough(r).pipeThrough(n):t.pipeThrough(r).pipeThrough(ro()).pipeThrough(oo());return o[Symbol.asyncIterator]=async function*(){const s=this.getReader();for(;;){const{done:a,value:i}=await s.read();if(a)break;i&&(yield i)}},o}const so=async(e,t={})=>{const{fetch:n=globalThis.fetch,middlewares:r={},...o}=t;if(typeof n!="function")throw new Error("The options.fetch must be a typeof fetch function!");let s=[e,o];typeof r.onRequest=="function"&&(s=await r.onRequest(...s));let a=await n(...s);if(typeof r.onResponse=="function"){const i=await r.onResponse(a);if(!(i instanceof Response))throw new Error("The options.onResponse must return a Response instance!");a=i}if(!a.ok)throw new Error(`Fetch failed with status ${a.status}`);if(!a.body)throw new Error("The response body is empty.");return a};class Xe{constructor(t){U(this,"baseURL");U(this,"model");U(this,"defaultHeaders");U(this,"customOptions");U(this,"create",async(t,n,r)=>{var a,i;const o=new AbortController,s={method:"POST",body:JSON.stringify({model:this.model,...t}),headers:this.defaultHeaders,signal:o.signal};(a=n==null?void 0:n.onStream)==null||a.call(n,o);try{const l=await so(this.baseURL,{fetch:this.customOptions.fetch,...s});if(r){await this.customResponseHandler(l,n,r);return}const d=l.headers.get("content-type")||"";switch(d.split(";")[0].trim()){case"text/event-stream":await this.sseResponseHandler(l,n);break;case"application/json":await this.jsonResponseHandler(l,n);break;default:throw new Error(`The response content-type: ${d} is not support!`)}}catch(l){const d=l instanceof Error?l:new Error("Unknown error!");throw(i=n==null?void 0:n.onError)==null||i.call(n,d),d}});U(this,"customResponseHandler",async(t,n,r)=>{var s,a;const o=[];for await(const i of ot({readableStream:t.body,transformStream:r}))o.push(i),(s=n==null?void 0:n.onUpdate)==null||s.call(n,i);(a=n==null?void 0:n.onSuccess)==null||a.call(n,o)});U(this,"sseResponseHandler",async(t,n)=>{var s,a;const r=[],o=ot({readableStream:t.body});for await(const i of o)r.push(i),(s=n==null?void 0:n.onUpdate)==null||s.call(n,i);(a=n==null?void 0:n.onSuccess)==null||a.call(n,r)});U(this,"jsonResponseHandler",async(t,n)=>{var o,s;const r=await t.json();(o=n==null?void 0:n.onUpdate)==null||o.call(n,r),(s=n==null?void 0:n.onSuccess)==null||s.call(n,[r])});const{baseURL:n,model:r,dangerouslyApiKey:o,...s}=t;this.baseURL=t.baseURL,this.model=t.model,this.defaultHeaders={"Content-Type":"application/json",...t.dangerouslyApiKey&&{Authorization:t.dangerouslyApiKey}},this.customOptions=s}static init(t){if(!t.baseURL||typeof t.baseURL!="string")throw new Error("The baseURL is not valid!");return new Xe(t)}}const ao=Xe.init;let st=0;class io{constructor(t){U(this,"config");U(this,"requestingMap",{});U(this,"request",(t,n,r)=>{const{request:o}=this.config,{onUpdate:s,onSuccess:a,onError:i,onStream:l}=n,d=st;st+=1,this.requestingMap[d]=!0,o==null||o(t,{onStream:u=>{this.requestingMap[d]&&(l==null||l(u))},onUpdate:u=>{this.requestingMap[d]&&s(u)},onSuccess:u=>{this.requestingMap[d]&&(a(u),this.finishRequest(d))},onError:u=>{this.requestingMap[d]&&(i(u),this.finishRequest(d))}},r)});this.config=t}finishRequest(t){delete this.requestingMap[t]}isRequesting(){return Object.keys(this.requestingMap).length>0}}function co(e){const{request:t,...n}=e;return f.useMemo(()=>[new io({request:t||ao({baseURL:n.baseURL,model:n.model,dangerouslyApiKey:n.dangerouslyApiKey}).create,...n})],[e==null?void 0:e.baseURL,e==null?void 0:e.dangerouslyApiKey,e==null?void 0:e.model])}const lo=()=>new Promise(e=>setTimeout(e,1e3)),uo={ai:{placement:"start",avatar:{icon:K.jsx(Ue,{}),style:{background:"#fde3cf"}},typing:{step:5,interval:20},style:{maxWidth:600}},local:{placement:"end",avatar:{icon:K.jsx(Ue,{}),style:{background:"#87d068"}}}};let Be=!1;const fo=()=>{const[e,t]=f.useState(""),[n]=co({request:async({message:s},{onSuccess:a,onError:i})=>{await lo(),Be=!Be,Be&&a([`Mock success return. You said: ${s}`]),i(new Error("Mock request failed"))}}),{onRequest:r,messages:o}=eo({agent:n,requestPlaceholder:"Waiting...",requestFallback:"Mock failed return. Please try again later."});return K.jsxs(ht,{vertical:!0,gap:"middle",children:[K.jsx(qe.List,{roles:uo,style:{maxHeight:300},items:o.map(({id:s,message:a,status:i})=>({key:s,loading:i==="loading",role:i==="local"?"local":"ai",content:a}))}),K.jsx(At,{loading:n.isRequesting(),value:e,onChange:t,onSubmit:s=>{r(s),t("")}})]})},yo=({close:e})=>K.jsx(hn,{styles:{body:{padding:"0.5rem"}},size:"small",extra:K.jsx(K.Fragment,{children:K.jsx(ft,{onClick:e})}),style:{borderRadius:"12px",boxShadow:"0 4px 20px rgba(0,0,0,0.1)",padding:"0.5rem",overflow:"hidden"},children:K.jsx(fo,{})});export{yo as default};
