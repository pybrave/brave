import{r as t,a as k}from"./index-CWx5cHtj.js";const v=({url:o,pageApi:l,params:d,map:u,initialPageSize:p=12})=>{const[m,f]=t.useState([]),[a,r]=t.useState(1),[y,S]=t.useState(0),[w,g]=t.useState(!1),[n]=t.useState(p),[c,b]=t.useState(""),h=s=>{b(s),r(1)},i=async s=>{g(!0);try{let e;o?e=await k.post(o,{...d,page_number:s,page_size:n,keywords:c||void 0}):e=await l({...d,page_number:s,page_size:n,keywords:c||void 0});const{items:P,total:_,...x}=e.data;u?(e.data=P.map(u),f(e.data)):f(e.data.items),S(_)}catch(e){console.error("Error fetching data:",e)}finally{g(!1)}},E=()=>{i(a)};return t.useEffect(()=>{i(1),r(1)},[o]),t.useEffect(()=>{i(a)},[a,c]),{data:m,pageNumber:a,totalPage:y,loading:w,setPageNumber:r,pageSize:n,reload:E,search:h}};export{v as u};
