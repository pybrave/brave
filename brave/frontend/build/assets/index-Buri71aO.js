import{r as o,v as ke,_ as Be,ad as D,aF as Fe,K as R,am as it,Y as Ne,Z as Re,a1 as Me,a4 as C,ar as ot,aG as _e,aH as Te,R as I,C as lt,aI as st,ah as ct,aB as we,aJ as dt,aK as Oe,b as mt,aL as ut,a as X,j as n,I as Le,c as fe,B as w,d as Ae,p as He,g as U,P as he,M as pt,aE as gt,o as B}from"./index-DnaNKChN.js";import{r as De,C as Xe,L as te}from"./index-2JzBd74d.js";import{C as re,T as be}from"./index-Be9gn9ci.js";import{a as ft,e as ht,R as xt,b as yt,S as jt,F as We}from"./Table-DYq57zsl.js";import{P as Ke,S as $e}from"./index-FpYd8_0n.js";import{b as bt}from"./index-B2UOh69g.js";import{A as $t}from"./index-BWL6OvQA.js";import{M as vt}from"./index-DKgKR1m5.js";import{T as Ge}from"./index-BUDxPiHu.js";import{B as Ve}from"./index-YbpS1a5y.js";var Ct={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M505.7 661a8 8 0 0012.6 0l112-141.7c4.1-5.2.4-12.9-6.3-12.9h-74.1V168c0-4.4-3.6-8-8-8h-60c-4.4 0-8 3.6-8 8v338.3H400c-6.7 0-10.4 7.7-6.3 12.9l112 141.8zM878 626h-60c-4.4 0-8 3.6-8 8v154H214V634c0-4.4-3.6-8-8-8h-60c-4.4 0-8 3.6-8 8v198c0 17.7 14.3 32 32 32h684c17.7 0 32-14.3 32-32V634c0-4.4-3.6-8-8-8z"}}]},name:"download",theme:"outlined"},St=function(t,r){return o.createElement(ke,Be({},t,{ref:r,icon:Ct}))},_t=o.forwardRef(St),wt={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M909.1 209.3l-56.4 44.1C775.8 155.1 656.2 92 521.9 92 290 92 102.3 279.5 102 511.5 101.7 743.7 289.8 932 521.9 932c181.3 0 335.8-115 394.6-276.1 1.5-4.2-.7-8.9-4.9-10.3l-56.7-19.5a8 8 0 00-10.1 4.8c-1.8 5-3.8 10-5.9 14.9-17.3 41-42.1 77.8-73.7 109.4A344.77 344.77 0 01655.9 829c-42.3 17.9-87.4 27-133.8 27-46.5 0-91.5-9.1-133.8-27A341.5 341.5 0 01279 755.2a342.16 342.16 0 01-73.7-109.4c-17.9-42.4-27-87.4-27-133.9s9.1-91.5 27-133.9c17.3-41 42.1-77.8 73.7-109.4 31.6-31.6 68.4-56.4 109.3-73.8 42.3-17.9 87.4-27 133.8-27 46.5 0 91.5 9.1 133.8 27a341.5 341.5 0 01109.3 73.8c9.9 9.9 19.2 20.4 27.8 31.4l-60.2 47a8 8 0 003 14.1l175.6 43c5 1.2 9.9-2.6 9.9-7.7l.8-180.9c-.1-6.6-7.8-10.3-13-6.2z"}}]},name:"reload",theme:"outlined"},Ot=function(t,r){return o.createElement(ke,Be({},t,{ref:r,icon:wt}))},Ie=o.forwardRef(Ot);const ae=e=>{let{children:t}=e;const{getPrefixCls:r}=o.useContext(D),a=r("breadcrumb");return o.createElement("li",{className:`${a}-separator`,"aria-hidden":"true"},t===""?t:t||"/")};ae.__ANT_BREADCRUMB_SEPARATOR=!0;var It=function(e,t){var r={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&t.indexOf(a)<0&&(r[a]=e[a]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,a=Object.getOwnPropertySymbols(e);i<a.length;i++)t.indexOf(a[i])<0&&Object.prototype.propertyIsEnumerable.call(e,a[i])&&(r[a[i]]=e[a[i]]);return r};function Et(e,t){if(e.title===void 0||e.title===null)return null;const r=Object.keys(t).join("|");return typeof e.title=="object"?e.title:String(e.title).replace(new RegExp(`:(${r})`,"g"),(a,i)=>t[i]||a)}function Je(e,t,r,a){if(r==null)return null;const{className:i,onClick:l}=t,c=It(t,["className","onClick"]),m=Object.assign(Object.assign({},Fe(c,{data:!0,aria:!0})),{onClick:l});return a!==void 0?o.createElement("a",Object.assign({},m,{className:R(`${e}-link`,i),href:a}),r):o.createElement("span",Object.assign({},m,{className:R(`${e}-link`,i)}),r)}function Pt(e,t){return(a,i,l,c,m)=>{if(t)return t(a,i,l,c);const s=Et(a,i);return Je(e,a,s,m)}}var xe=function(e,t){var r={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&t.indexOf(a)<0&&(r[a]=e[a]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,a=Object.getOwnPropertySymbols(e);i<a.length;i++)t.indexOf(a[i])<0&&Object.prototype.propertyIsEnumerable.call(e,a[i])&&(r[a[i]]=e[a[i]]);return r};const Ue=e=>{const{prefixCls:t,separator:r="/",children:a,menu:i,overlay:l,dropdownProps:c,href:m}=e,u=(x=>{if(i||l){const p=Object.assign({},c);if(i){const d=i||{},{items:h}=d,f=xe(d,["items"]);p.menu=Object.assign(Object.assign({},f),{items:h==null?void 0:h.map(($,S)=>{var{key:P,title:g,label:y,path:b}=$,F=xe($,["key","title","label","path"]);let z=y??g;return b&&(z=o.createElement("a",{href:`${m}${b}`},z)),Object.assign(Object.assign({},F),{key:P??S,label:z})})})}else l&&(p.overlay=l);return o.createElement(ft,Object.assign({placement:"bottom"},p),o.createElement("span",{className:`${t}-overlay-link`},x,o.createElement(it,null)))}return x})(a);return u!=null?o.createElement(o.Fragment,null,o.createElement("li",null,u),r&&o.createElement(ae,null,r)):null},qe=e=>{const{prefixCls:t,children:r,href:a}=e,i=xe(e,["prefixCls","children","href"]),{getPrefixCls:l}=o.useContext(D),c=l("breadcrumb",t);return o.createElement(Ue,Object.assign({},i,{prefixCls:c}),Je(c,i,r,a))};qe.__ANT_BREADCRUMB_ITEM=!0;const zt=e=>{const{componentCls:t,iconCls:r,calc:a}=e;return{[t]:Object.assign(Object.assign({},Me(e)),{color:e.itemColor,fontSize:e.fontSize,[r]:{fontSize:e.iconFontSize},ol:{display:"flex",flexWrap:"wrap",margin:0,padding:0,listStyle:"none"},a:Object.assign({color:e.linkColor,transition:`color ${e.motionDurationMid}`,padding:`0 ${C(e.paddingXXS)}`,borderRadius:e.borderRadiusSM,height:e.fontHeight,display:"inline-block",marginInline:a(e.marginXXS).mul(-1).equal(),"&:hover":{color:e.linkHoverColor,backgroundColor:e.colorBgTextHover}},ot(e)),"li:last-child":{color:e.lastItemColor},[`${t}-separator`]:{marginInline:e.separatorMargin,color:e.separatorColor},[`${t}-link`]:{[`
          > ${r} + span,
          > ${r} + a
        `]:{marginInlineStart:e.marginXXS}},[`${t}-overlay-link`]:{borderRadius:e.borderRadiusSM,height:e.fontHeight,display:"inline-block",padding:`0 ${C(e.paddingXXS)}`,marginInline:a(e.marginXXS).mul(-1).equal(),[`> ${r}`]:{marginInlineStart:e.marginXXS,fontSize:e.fontSizeIcon},"&:hover":{color:e.linkHoverColor,backgroundColor:e.colorBgTextHover,a:{color:e.linkHoverColor}},a:{"&:hover":{backgroundColor:"transparent"}}},[`&${e.componentCls}-rtl`]:{direction:"rtl"}})}},kt=e=>({itemColor:e.colorTextDescription,lastItemColor:e.colorText,iconFontSize:e.fontSize,linkColor:e.colorTextDescription,linkHoverColor:e.colorText,separatorColor:e.colorTextDescription,separatorMargin:e.marginXS}),Bt=Ne("Breadcrumb",e=>{const t=Re(e,{});return zt(t)},kt);var Ee=function(e,t){var r={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&t.indexOf(a)<0&&(r[a]=e[a]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,a=Object.getOwnPropertySymbols(e);i<a.length;i++)t.indexOf(a[i])<0&&Object.prototype.propertyIsEnumerable.call(e,a[i])&&(r[a[i]]=e[a[i]]);return r};function Ft(e){const{breadcrumbName:t,children:r}=e,a=Ee(e,["breadcrumbName","children"]),i=Object.assign({title:t},a);return r&&(i.menu={items:r.map(l=>{var{breadcrumbName:c}=l,m=Ee(l,["breadcrumbName"]);return Object.assign(Object.assign({},m),{title:c})})}),i}function Nt(e,t){return o.useMemo(()=>e||(t?t.map(Ft):null),[e,t])}var Rt=function(e,t){var r={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&t.indexOf(a)<0&&(r[a]=e[a]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,a=Object.getOwnPropertySymbols(e);i<a.length;i++)t.indexOf(a[i])<0&&Object.prototype.propertyIsEnumerable.call(e,a[i])&&(r[a[i]]=e[a[i]]);return r};const Mt=(e,t)=>{if(t===void 0)return t;let r=(t||"").replace(/^\//,"");return Object.keys(e).forEach(a=>{r=r.replace(`:${a}`,e[a])}),r},J=e=>{const{prefixCls:t,separator:r="/",style:a,className:i,rootClassName:l,routes:c,items:m,children:s,itemRender:u,params:x={}}=e,p=Rt(e,["prefixCls","separator","style","className","rootClassName","routes","items","children","itemRender","params"]),{getPrefixCls:d,direction:h,breadcrumb:f}=o.useContext(D);let $;const S=d("breadcrumb",t),[P,g,y]=Bt(S),b=Nt(m,c),F=Pt(S,u);if(b&&b.length>0){const j=[],E=m||c;$=b.map((M,A)=>{const{path:ie,key:W,type:oe,menu:H,overlay:q,onClick:Y,className:le,separator:se,dropdownProps:ce}=M,K=Mt(x,ie);K!==void 0&&j.push(K);const _=W??A;if(oe==="separator")return o.createElement(ae,{key:_},se);const G={},de=A===b.length-1;H?G.menu=H:q&&(G.overlay=q);let{href:V}=M;return j.length&&K!==void 0&&(V=`#/${j.join("/")}`),o.createElement(Ue,Object.assign({key:_},G,Fe(M,{data:!0,aria:!0}),{className:le,dropdownProps:ce,href:V,separator:de?"":r,onClick:Y,prefixCls:S}),F(M,x,E,j,V))})}else if(s){const j=_e(s).length;$=_e(s).map((E,M)=>{if(!E)return E;const A=M===j-1;return Te(E,{separator:A?"":r,key:M})})}const z=R(S,f==null?void 0:f.className,{[`${S}-rtl`]:h==="rtl"},i,l,g,y),O=Object.assign(Object.assign({},f==null?void 0:f.style),a);return P(o.createElement("nav",Object.assign({className:z,style:O},p),o.createElement("ol",null,$)))};J.Item=qe;J.Separator=ae;const ve=I.createContext({});ve.Consumer;var Ye=function(e,t){var r={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&t.indexOf(a)<0&&(r[a]=e[a]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,a=Object.getOwnPropertySymbols(e);i<a.length;i++)t.indexOf(a[i])<0&&Object.prototype.propertyIsEnumerable.call(e,a[i])&&(r[a[i]]=e[a[i]]);return r};const Tt=e=>{var{prefixCls:t,className:r,avatar:a,title:i,description:l}=e,c=Ye(e,["prefixCls","className","avatar","title","description"]);const{getPrefixCls:m}=o.useContext(D),s=m("list",t),u=R(`${s}-item-meta`,r),x=I.createElement("div",{className:`${s}-item-meta-content`},i&&I.createElement("h4",{className:`${s}-item-meta-title`},i),l&&I.createElement("div",{className:`${s}-item-meta-description`},l));return I.createElement("div",Object.assign({},c,{className:u}),a&&I.createElement("div",{className:`${s}-item-meta-avatar`},a),(i||l)&&x)},Lt=I.forwardRef((e,t)=>{const{prefixCls:r,children:a,actions:i,extra:l,styles:c,className:m,classNames:s,colStyle:u}=e,x=Ye(e,["prefixCls","children","actions","extra","styles","className","classNames","colStyle"]),{grid:p,itemLayout:d}=o.useContext(ve),{getPrefixCls:h,list:f}=o.useContext(D),$=O=>{var j,E;return R((E=(j=f==null?void 0:f.item)===null||j===void 0?void 0:j.classNames)===null||E===void 0?void 0:E[O],s==null?void 0:s[O])},S=O=>{var j,E;return Object.assign(Object.assign({},(E=(j=f==null?void 0:f.item)===null||j===void 0?void 0:j.styles)===null||E===void 0?void 0:E[O]),c==null?void 0:c[O])},P=()=>{let O=!1;return o.Children.forEach(a,j=>{typeof j=="string"&&(O=!0)}),O&&o.Children.count(a)>1},g=()=>d==="vertical"?!!l:!P(),y=h("list",r),b=i&&i.length>0&&I.createElement("ul",{className:R(`${y}-item-action`,$("actions")),key:"actions",style:S("actions")},i.map((O,j)=>I.createElement("li",{key:`${y}-item-action-${j}`},O,j!==i.length-1&&I.createElement("em",{className:`${y}-item-action-split`})))),F=p?"div":"li",z=I.createElement(F,Object.assign({},x,p?{}:{ref:t},{className:R(`${y}-item`,{[`${y}-item-no-flex`]:!g()},m)}),d==="vertical"&&l?[I.createElement("div",{className:`${y}-item-main`,key:"content"},a,b),I.createElement("div",{className:R(`${y}-item-extra`,$("extra")),key:"extra",style:S("extra")},l)]:[a,b,Te(l,{key:"extra"})]);return p?I.createElement(lt,{ref:t,flex:1,style:u},z):z}),Ze=Lt;Ze.Meta=Tt;const At=e=>{const{listBorderedCls:t,componentCls:r,paddingLG:a,margin:i,itemPaddingSM:l,itemPaddingLG:c,marginLG:m,borderRadiusLG:s}=e;return{[t]:{border:`${C(e.lineWidth)} ${e.lineType} ${e.colorBorder}`,borderRadius:s,[`${r}-header,${r}-footer,${r}-item`]:{paddingInline:a},[`${r}-pagination`]:{margin:`${C(i)} ${C(m)}`}},[`${t}${r}-sm`]:{[`${r}-item,${r}-header,${r}-footer`]:{padding:l}},[`${t}${r}-lg`]:{[`${r}-item,${r}-header,${r}-footer`]:{padding:c}}}},Ht=e=>{const{componentCls:t,screenSM:r,screenMD:a,marginLG:i,marginSM:l,margin:c}=e;return{[`@media screen and (max-width:${a}px)`]:{[t]:{[`${t}-item`]:{[`${t}-item-action`]:{marginInlineStart:i}}},[`${t}-vertical`]:{[`${t}-item`]:{[`${t}-item-extra`]:{marginInlineStart:i}}}},[`@media screen and (max-width: ${r}px)`]:{[t]:{[`${t}-item`]:{flexWrap:"wrap",[`${t}-action`]:{marginInlineStart:l}}},[`${t}-vertical`]:{[`${t}-item`]:{flexWrap:"wrap-reverse",[`${t}-item-main`]:{minWidth:e.contentWidth},[`${t}-item-extra`]:{margin:`auto auto ${C(c)}`}}}}}},Dt=e=>{const{componentCls:t,antCls:r,controlHeight:a,minHeight:i,paddingSM:l,marginLG:c,padding:m,itemPadding:s,colorPrimary:u,itemPaddingSM:x,itemPaddingLG:p,paddingXS:d,margin:h,colorText:f,colorTextDescription:$,motionDurationSlow:S,lineWidth:P,headerBg:g,footerBg:y,emptyTextPadding:b,metaMarginBottom:F,avatarMarginRight:z,titleMarginBottom:O,descriptionFontSize:j}=e;return{[t]:Object.assign(Object.assign({},Me(e)),{position:"relative","*":{outline:"none"},[`${t}-header`]:{background:g},[`${t}-footer`]:{background:y},[`${t}-header, ${t}-footer`]:{paddingBlock:l},[`${t}-pagination`]:{marginBlockStart:c,[`${r}-pagination-options`]:{textAlign:"start"}},[`${t}-spin`]:{minHeight:i,textAlign:"center"},[`${t}-items`]:{margin:0,padding:0,listStyle:"none"},[`${t}-item`]:{display:"flex",alignItems:"center",justifyContent:"space-between",padding:s,color:f,[`${t}-item-meta`]:{display:"flex",flex:1,alignItems:"flex-start",maxWidth:"100%",[`${t}-item-meta-avatar`]:{marginInlineEnd:z},[`${t}-item-meta-content`]:{flex:"1 0",width:0,color:f},[`${t}-item-meta-title`]:{margin:`0 0 ${C(e.marginXXS)} 0`,color:f,fontSize:e.fontSize,lineHeight:e.lineHeight,"> a":{color:f,transition:`all ${S}`,"&:hover":{color:u}}},[`${t}-item-meta-description`]:{color:$,fontSize:j,lineHeight:e.lineHeight}},[`${t}-item-action`]:{flex:"0 0 auto",marginInlineStart:e.marginXXL,padding:0,fontSize:0,listStyle:"none","& > li":{position:"relative",display:"inline-block",padding:`0 ${C(d)}`,color:$,fontSize:e.fontSize,lineHeight:e.lineHeight,textAlign:"center","&:first-child":{paddingInlineStart:0}},[`${t}-item-action-split`]:{position:"absolute",insetBlockStart:"50%",insetInlineEnd:0,width:P,height:e.calc(e.fontHeight).sub(e.calc(e.marginXXS).mul(2)).equal(),transform:"translateY(-50%)",backgroundColor:e.colorSplit}}},[`${t}-empty`]:{padding:`${C(m)} 0`,color:$,fontSize:e.fontSizeSM,textAlign:"center"},[`${t}-empty-text`]:{padding:b,color:e.colorTextDisabled,fontSize:e.fontSize,textAlign:"center"},[`${t}-item-no-flex`]:{display:"block"}}),[`${t}-grid ${r}-col > ${t}-item`]:{display:"block",maxWidth:"100%",marginBlockEnd:h,paddingBlock:0,borderBlockEnd:"none"},[`${t}-vertical ${t}-item`]:{alignItems:"initial",[`${t}-item-main`]:{display:"block",flex:1},[`${t}-item-extra`]:{marginInlineStart:c},[`${t}-item-meta`]:{marginBlockEnd:F,[`${t}-item-meta-title`]:{marginBlockStart:0,marginBlockEnd:O,color:f,fontSize:e.fontSizeLG,lineHeight:e.lineHeightLG}},[`${t}-item-action`]:{marginBlockStart:m,marginInlineStart:"auto","> li":{padding:`0 ${C(m)}`,"&:first-child":{paddingInlineStart:0}}}},[`${t}-split ${t}-item`]:{borderBlockEnd:`${C(e.lineWidth)} ${e.lineType} ${e.colorSplit}`,"&:last-child":{borderBlockEnd:"none"}},[`${t}-split ${t}-header`]:{borderBlockEnd:`${C(e.lineWidth)} ${e.lineType} ${e.colorSplit}`},[`${t}-split${t}-empty ${t}-footer`]:{borderTop:`${C(e.lineWidth)} ${e.lineType} ${e.colorSplit}`},[`${t}-loading ${t}-spin-nested-loading`]:{minHeight:a},[`${t}-split${t}-something-after-last-item ${r}-spin-container > ${t}-items > ${t}-item:last-child`]:{borderBlockEnd:`${C(e.lineWidth)} ${e.lineType} ${e.colorSplit}`},[`${t}-lg ${t}-item`]:{padding:p},[`${t}-sm ${t}-item`]:{padding:x},[`${t}:not(${t}-vertical)`]:{[`${t}-item-no-flex`]:{[`${t}-item-action`]:{float:"right"}}}}},Xt=e=>({contentWidth:220,itemPadding:`${C(e.paddingContentVertical)} 0`,itemPaddingSM:`${C(e.paddingContentVerticalSM)} ${C(e.paddingContentHorizontal)}`,itemPaddingLG:`${C(e.paddingContentVerticalLG)} ${C(e.paddingContentHorizontalLG)}`,headerBg:"transparent",footerBg:"transparent",emptyTextPadding:e.padding,metaMarginBottom:e.padding,avatarMarginRight:e.padding,titleMarginBottom:e.paddingSM,descriptionFontSize:e.fontSize}),Wt=Ne("List",e=>{const t=Re(e,{listBorderedCls:`${e.componentCls}-bordered`,minHeight:e.controlHeightLG});return[Dt(t),At(t),Ht(t)]},Xt);var Kt=function(e,t){var r={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&t.indexOf(a)<0&&(r[a]=e[a]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,a=Object.getOwnPropertySymbols(e);i<a.length;i++)t.indexOf(a[i])<0&&Object.prototype.propertyIsEnumerable.call(e,a[i])&&(r[a[i]]=e[a[i]]);return r};function Gt(e,t){const{pagination:r=!1,prefixCls:a,bordered:i=!1,split:l=!0,className:c,rootClassName:m,style:s,children:u,itemLayout:x,loadMore:p,grid:d,dataSource:h=[],size:f,header:$,footer:S,loading:P=!1,rowKey:g,renderItem:y,locale:b}=e,F=Kt(e,["pagination","prefixCls","bordered","split","className","rootClassName","style","children","itemLayout","loadMore","grid","dataSource","size","header","footer","loading","rowKey","renderItem","locale"]),z=r&&typeof r=="object"?r:{},[O,j]=o.useState(z.defaultCurrent||1),[E,M]=o.useState(z.defaultPageSize||10),{getPrefixCls:A,direction:ie,className:W,style:oe}=st("list"),{renderEmpty:H}=o.useContext(D),q={current:1,total:0},Y=v=>(k,T)=>{var ge;j(k),M(T),r&&((ge=r==null?void 0:r[v])===null||ge===void 0||ge.call(r,k,T))},le=Y("onChange"),se=Y("onShowSizeChange"),ce=(v,k)=>{if(!y)return null;let T;return typeof g=="function"?T=g(v):g?T=v[g]:T=v.key,T||(T=`list-item-${k}`),o.createElement(o.Fragment,{key:T},y(v,k))},K=!!(p||r||S),_=A("list",a),[G,de,V]=Wt(_);let L=P;typeof L=="boolean"&&(L={spinning:L});const me=!!(L!=null&&L.spinning),Qe=ct(f);let Z="";switch(Qe){case"large":Z="lg";break;case"small":Z="sm";break}const et=R(_,{[`${_}-vertical`]:x==="vertical",[`${_}-${Z}`]:Z,[`${_}-split`]:l,[`${_}-bordered`]:i,[`${_}-loading`]:me,[`${_}-grid`]:!!d,[`${_}-something-after-last-item`]:K,[`${_}-rtl`]:ie==="rtl"},W,c,m,de,V),N=ht(q,{total:h.length,current:O,pageSize:E},r||{}),tt=Math.ceil(N.total/N.pageSize);N.current=Math.min(N.current,tt);const Ce=r&&o.createElement("div",{className:R(`${_}-pagination`)},o.createElement(Ke,Object.assign({align:"end"},N,{onChange:le,onShowSizeChange:se})));let ue=we(h);r&&h.length>(N.current-1)*N.pageSize&&(ue=we(h).splice((N.current-1)*N.pageSize,N.pageSize));const nt=Object.keys(d||{}).some(v=>["xs","sm","md","lg","xl","xxl"].includes(v)),Se=dt(nt),Q=o.useMemo(()=>{for(let v=0;v<Oe.length;v+=1){const k=Oe[v];if(Se[k])return k}},[Se]),rt=o.useMemo(()=>{if(!d)return;const v=Q&&d[Q]?d[Q]:d.column;if(v)return{width:`${100/v}%`,maxWidth:`${100/v}%`}},[JSON.stringify(d),Q]);let pe=me&&o.createElement("div",{style:{minHeight:53}});if(ue.length>0){const v=ue.map(ce);pe=d?o.createElement(mt,{gutter:d.gutter},o.Children.map(v,k=>o.createElement("div",{key:k==null?void 0:k.key,style:rt},k))):o.createElement("ul",{className:`${_}-items`},v)}else!u&&!me&&(pe=o.createElement("div",{className:`${_}-empty-text`},(b==null?void 0:b.emptyText)||(H==null?void 0:H("List"))||o.createElement(ut,{componentName:"List"})));const ee=N.position||"bottom",at=o.useMemo(()=>({grid:d,itemLayout:x}),[JSON.stringify(d),x]);return G(o.createElement(ve.Provider,{value:at},o.createElement("div",Object.assign({ref:t,style:Object.assign(Object.assign({},oe),s),className:et},F),(ee==="top"||ee==="both")&&Ce,$&&o.createElement("div",{className:`${_}-header`},$),o.createElement($e,Object.assign({},L),pe,u),S&&o.createElement("div",{className:`${_}-footer`},S),p||(ee==="bottom"||ee==="both")&&Ce)))}const Vt=o.forwardRef(Gt),ne=Vt;ne.Item=Ze;const Jt=async e=>await X.get(`/find-analysis-by-id/${e}`),Ut=async(e,t)=>await X.post(`/run-analysis-v2/${e}?run_type=${t}`),qt=async e=>await X.post(`/analysis/stop-analysis/${e}`),{Search:Yt}=Le,{Text:Pe}=fe,Zt=({path:e,onSelectFile:t})=>{const[r,a]=o.useState([]),[i,l]=o.useState(e),[c,m]=o.useState(""),[s,u]=o.useState(1),[x,p]=o.useState(0),d=10,h=async(g=i,y=c,b=s)=>{const F=await X.get("/file-operation/list-dir-v2",{params:{path:g,keyword:y,page:b,limit:d}});a(F.data.items),p(F.data.total),l(g),u(b)};o.useEffect(()=>{h(e)},[e]);const f=g=>{h(`${i}/${g}`,"",1)},$=g=>{h(i,g,1)},S=g=>{t({path:i+"/"+g.name,file:g.name})},P=i.split("/").filter(Boolean);return n.jsxs(re,{title:"文件浏览器",extra:n.jsxs(jt,{children:[n.jsx(w,{icon:n.jsx(Ie,{}),onClick:()=>h(e),size:"small",children:"重置"}),n.jsx(w,{icon:n.jsx(Ie,{}),onClick:()=>h(i),size:"small",children:"刷新"})]}),children:[n.jsxs(J,{style:{marginBottom:"1rem"},children:[n.jsx(J.Item,{children:n.jsx("a",{onClick:()=>h("/"),children:"根目录"})}),P.map((g,y)=>n.jsx(J.Item,{children:n.jsx("a",{onClick:()=>{const b="/"+P.slice(0,y+1).join("/");h(b)},children:g})},y))]}),n.jsx(Yt,{placeholder:"搜索文件名",enterButton:"搜索",value:c,onChange:g=>m(g.target.value),onSearch:$,style:{marginBottom:16}}),n.jsx(ne,{size:"small",bordered:!0,dataSource:r,locale:{emptyText:"暂无文件"},renderItem:g=>n.jsx(ne.Item,{actions:g.is_dir?[n.jsx(w,{size:"small",onClick:()=>f(g.name),children:"进入"})]:[n.jsx(w,{type:"link",size:"small",icon:n.jsx(_t,{}),href:`/brave-api/file-operation/download?path=${encodeURIComponent(i+"/"+g.name)}`,target:"_blank",children:"下载"}),n.jsx(w,{type:"link",size:"small",onClick:()=>S(g),children:"选择"})],children:n.jsx(ne.Item.Meta,{avatar:g.is_dir?n.jsx(xt,{}):n.jsx(yt,{}),title:n.jsx(Pe,{strong:!0,style:{cursor:g.is_dir?"pointer":"default"},onClick:()=>g.is_dir&&f(g.name),children:g.name}),description:!g.is_dir&&n.jsxs(Pe,{type:"secondary",children:[(g.size/1024).toFixed(1)," KB"]})})})}),n.jsx(Ke,{style:{marginTop:"1rem",textAlign:"center"},current:s,total:x,pageSize:d,onChange:g=>h(i,c,g),showSizeChanger:!1})]})},Qt=(e,t)=>X.post(`/fast-api/parse-analysis-result/${e}?save=${t}`),en=o.memo(({analysis_id:e,callback:t})=>{const[r,a]=o.useState(),[i,l]=o.useState(!1),{messageApi:c}=Ae(),{modal:m,openModal:s,closeModal:u}=He(),x=async(p=!1)=>{l(!0);try{const d=await Qt(e,p);a(d.data),l(!1),t&&p&&t()}catch(d){l(!1),c.error(d.response.data.detail)}};return o.useEffect(()=>{x(!1)},[e]),n.jsxs(n.Fragment,{children:[n.jsxs(U,{gap:"small",justify:"flex-end",align:"center",children:[(r==null?void 0:r.file_format_list)&&n.jsx(n.Fragment,{children:r==null?void 0:r.file_format_list.map(p=>n.jsx(w,{size:"small",color:"cyan",variant:"solid",onClick:()=>s("modalA",{params:{component_id:p.component_id},title:p.name}),children:p.name}))}),n.jsx(he,{title:"确定解析吗？",onConfirm:()=>{x(!0),c.success("解析成功")},children:n.jsx(w,{size:"small",color:"cyan",variant:"solid",children:"解析"})}),n.jsx(w,{size:"small",color:"primary",variant:"solid",onClick:()=>x(!1),children:"刷新"})]}),n.jsx($e,{spinning:i,children:r&&n.jsx(n.Fragment,{children:r!=null&&r.error?n.jsx(fe,{children:n.jsx("pre",{children:r==null?void 0:r.error})}):n.jsxs(n.Fragment,{children:[n.jsx(We,{size:"small",pagination:!1,rowKey:"component_id",columns:[{title:"名称",dataIndex:"name",key:"name"},{title:"目录",dataIndex:"dir",key:"dir"},{title:"文件组件ID",dataIndex:"component_id",key:"component_id"},{title:"文件格式",dataIndex:"fileFormat",key:"fileFormat",render:(p,d)=>n.jsx("div",{style:{overflowWrap:"break-word",wordBreak:"break-all"},children:JSON.stringify(d.fileFormat)})},{title:"操作",dataIndex:"component_id",key:"component_id",render:(p,d)=>n.jsx(n.Fragment,{children:n.jsx(w,{color:"cyan",variant:"solid",size:"small",onClick:()=>{s("modalC",{data:{component_id:d.component_id},structure:{component_type:"file",files:r==null?void 0:r.file_dict[d.dir]}})},children:"编辑"})})}],dataSource:r==null?void 0:r.file_format_list}),n.jsx(re,{style:{maxHeight:"20rem",overflow:"auto"},children:n.jsx(fe,{children:n.jsx("pre",{children:JSON.stringify(r,null,2)})})})]})})}),n.jsx(bt,{callback:x,visible:m.key=="modalC"&&m.visible,onClose:u,params:m.params}),n.jsx($t,{visible:m.key=="modalA"&&m.visible,params:m.params,onClose:u,analysis:r})]})});var ye=function(){return ye=Object.assign||function(e){for(var t,r=1,a=arguments.length;r<a;r++){t=arguments[r];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])}return e},ye.apply(this,arguments)},tn=o.forwardRef(function(e,t){return I.createElement(Ve,ye({},e,{chartType:"Bar",ref:t}))}),je=function(){return je=Object.assign||function(e){for(var t,r=1,a=arguments.length;r<a;r++){t=arguments[r];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])}return e},je.apply(this,arguments)},nn=o.forwardRef(function(e,t){return I.createElement(Ve,je({},e,{chartType:"Column",ref:t}))});const rn=({visible:e,onClose:t,params:r})=>{const[a,i]=o.useState(),[l,c]=o.useState([]),[m,s]=o.useState(),[u,x]=o.useState();o.useEffect(()=>{if(e){const h=Object.entries(r.content).map(([f,$])=>({key:$,label:f}));if(c(h),h.length>0){const f=h[0].key;s(f),p(f)}}},[e]);const p=async h=>{x(!0);const f=await De(h);i(f.data),x(!1)},d=h=>{const f=`/brave-api/file-operation/download?path=${h}`;window.open(f,"_blank")};return e?n.jsxs(pt,{width:"80vw",open:e,onCancel:t,title:"打开文件",footer:!1,children:[n.jsx(be,{tabBarExtraContent:n.jsxs(U,{gap:"small",align:"center",children:[n.jsx(w,{size:"small",color:"cyan",variant:"solid",onClick:()=>{d(m)},children:"下载"}),n.jsx(w,{size:"small",color:"cyan",variant:"solid",onClick:()=>{p(m)},children:"刷新"})]}),items:l,onChange:h=>{p(h),s(h)}}),n.jsx($e,{spinning:u,children:n.jsx(Xe,{...a})}),(r==null?void 0:r.description)&&n.jsx(vt,{data:r.description})]}):null},ze=({file_path:e})=>{o.useEffect(()=>{e&&a(e)},[e]);const[t,r]=o.useState([]),a=async(i,l=!1)=>{const c=await De(i);r(c.data)};return n.jsx(n.Fragment,{children:n.jsx(re,{title:n.jsxs(Ge,{color:"blue",children:["文件: ",e]}),extra:n.jsx(w,{size:"small",color:"cyan",variant:"solid",onClick:()=>{a(e)},children:"刷新日志"}),bodyStyle:{padding:0},children:n.jsx(Xe,{...t})})})},an=({output_dir:e,...t})=>(JSON.stringify(t),n.jsx(Zt,{path:e})),on=({data:e})=>{const t={data:e,xField:"task",yField:"realtime",colorField:"process",group:{padding:0},label:{text:r=>r.label,textBaseline:"bottom"}};return n.jsx(n.Fragment,{children:n.jsx(nn,{...t})})},ln=({data:e})=>{const t=Array.from(new Set(e.map(l=>l.process))),[r,a]=o.useState(t[0]),i=e.filter(l=>l.process===r);return n.jsxs("div",{children:[n.jsx("div",{style:{marginBottom:16},children:t.map(l=>n.jsx(w,{size:"small",type:l===r?"primary":"default",onClick:()=>a(l),style:{marginRight:8},children:l},l))}),n.jsx(on,{data:i})]})},sn=({data:e})=>{const t={data:e,xField:"process",yField:"count",colorField:"status",stack:!0,sort:{reverse:!0,by:"y"},style:{maxWidth:50}};return n.jsx(tn,{...t})},cn=({data:e})=>{const{modal:t,openModal:r,closeModal:a}=He(),i=[{title:"process",dataIndex:"process",key:"process",ellipsis:!0},{title:"tag",dataIndex:"tag",key:"tag",ellipsis:!0},{title:"name",dataIndex:"name",key:"name",ellipsis:!0,render:(s,u)=>n.jsx(B,{title:n.jsx(n.Fragment,{children:n.jsx("ul",{children:n.jsxs("li",{children:[" ",u.workdir," "]})})}),children:s})},{title:"container",dataIndex:"container",key:"container",ellipsis:!0},{title:"status",dataIndex:"status",key:"status",ellipsis:!0},{title:"realtime",dataIndex:"realtime",key:"realtime",ellipsis:!0},{title:"cpus",dataIndex:"cpus",key:"cpus",ellipsis:!0,render:(s,u)=>n.jsx(B,{title:n.jsx(n.Fragment,{children:u["%cpu"]}),children:s})},{title:"memory",dataIndex:"memory",key:"memory",ellipsis:!0,width:100,render:(s,u)=>n.jsx(B,{title:n.jsx(n.Fragment,{children:u["%mem"]}),children:s})},{title:"操作",key:"action",fixed:"right",ellipsis:!0,width:200,render:(s,u)=>n.jsx(U,{gap:"small",children:n.jsx(w,{size:"small",color:"cyan",variant:"solid",onClick:()=>{r("openFile",{content:{".command.sh":`${u.workdir}/.command.sh`,".command.trace":`${u.workdir}/.command.trace`,".command.run":`${u.workdir}/.command.run`,".command.out":`${u.workdir}/.command.out`,".command.err":`${u.workdir}/.command.err`,".command.begin":`${u.workdir}/.command.begin`}})},children:"查看"})})}],[l,c]=o.useState(""),m=o.useMemo(()=>l?e.filter(s=>Object.values(s).some(u=>String(u).toLowerCase().includes(l.toLowerCase()))):e,[e,l]);return n.jsxs(n.Fragment,{children:[n.jsx(We,{title:()=>n.jsx(Le.Search,{size:"small",placeholder:"搜索任务...",allowClear:!0,enterButton:!0,value:l,onChange:s=>c(s.target.value),style:{width:300}}),scroll:{x:"max-content",y:55*5},size:"small",bordered:!0,footer:()=>`一共${m.length}条记录`,columns:i,dataSource:m,rowKey:s=>s.task_id}),n.jsx(rn,{visible:t.key=="openFile"&&t.visible,onClose:a,params:t.params})]})},dn=({analysis_id:e})=>{const[t,r]=o.useState(),[a,i]=o.useState(!1);function l(m){const s=m.match(/(\d+)m/),u=m.match(/(\d+)s/),x=s?parseInt(s[1]):0,p=u?parseInt(u[1]):0;return x*60+p}const c=async()=>{i(!0);const m=await X.get(`/analysis/analysis-progress/${e}`),s={};m.data.forEach(p=>{const d=`${p.process}-${p.status}`;s[d]||(s[d]={process:p.process,status:p.status,count:0}),s[d].count+=1});const u=Object.values(s),x=m.data.map(p=>({process:p.process,task:p.task_id,realtime:l(p.realtime),label:p.realtime}));r({table:m.data,statusData:u,timeData:x}),i(!1)};return o.useEffect(()=>{c()},[]),n.jsxs("div",{children:[n.jsx(U,{justify:"flex-end",gap:"small",children:n.jsx(w,{size:"small",color:"cyan",variant:"solid",onClick:c,children:"刷新"})}),t&&n.jsx(be,{defaultActiveKey:"0",onChange:()=>{window.dispatchEvent(new Event("resize"))},items:[{key:"0",label:"任务表格",children:n.jsx(cn,{data:(t==null?void 0:t.table)||[]})},{key:"1",label:"任务状态",children:n.jsx(sn,{data:(t==null?void 0:t.statusData)||[]})},{key:"2",label:"运行时间",children:n.jsx(ln,{data:(t==null?void 0:t.timeData)||[]})}]})]})},mn={output_dir:an,workflow_log_file:te,executor_log_file:te,trace_file:te,command_log_path:te,params_path:ze,command_path:ze,result_parse:en,analysis_progress:dn},un=({analysis:e,file:t,fileKey:r})=>{const a=mn[r];return a?n.jsx(a,{...e,file_path:t,file:t,fileKey:r}):n.jsx(n.Fragment,{children:"no component"})},pn=o.memo(({analysis:e,callback:t})=>{const[r,a]=o.useState("command_log_path"),{messageApi:i}=Ae(),{eventSourceRef:l,status:c,reconnect:m}=gt(),s=o.useRef(r);if(!e)return null;const u={workflow_log_file:e.workflow_log_file,executor_log_file:e.executor_log_file,trace_file:e.trace_file,params_path:e.params_path,command_path:e.command_path,command_log_path:e.command_log_path},x=async()=>{await Ut(e==null?void 0:e.analysis_id,"job"),i.success("运行成功"),t&&t()},p=[{key:"command_log_path",label:n.jsx(B,{title:n.jsx(n.Fragment,{children:n.jsx("ul",{children:n.jsx("li",{children:e==null?void 0:e.command_log_path})})}),children:"运行日志"})},{key:"trace_file",label:n.jsx(B,{title:n.jsx(n.Fragment,{children:n.jsx("ul",{children:n.jsx("li",{children:e==null?void 0:e.trace_file})})}),children:"运行进度"})},{key:"workflow_log_file",label:n.jsx(B,{title:n.jsx(n.Fragment,{children:n.jsx("ul",{children:n.jsx("li",{children:e==null?void 0:e.workflow_log_file})})}),children:"工作流日志"})},{key:"executor_log_file",label:n.jsx(B,{title:n.jsx(n.Fragment,{children:n.jsx("ul",{children:n.jsx("li",{children:e==null?void 0:e.executor_log_file})})}),children:"执行器日志"})},{key:"params_path",label:n.jsx(B,{title:n.jsx(n.Fragment,{children:n.jsx("ul",{children:n.jsx("li",{children:e==null?void 0:e.params_path})})}),children:"参数"})},{key:"command_path",label:n.jsx(B,{title:n.jsx(n.Fragment,{children:n.jsx("ul",{children:n.jsx("li",{children:e==null?void 0:e.command_path})})}),children:"命令"})},{key:"output_dir",label:n.jsx(B,{title:n.jsx(n.Fragment,{children:n.jsx("ul",{children:n.jsx("li",{children:e==null?void 0:e.output_dir})})}),children:"输出文件"})},{key:"analysis_progress",label:n.jsx(B,{title:n.jsx(n.Fragment,{children:n.jsx("ul",{children:n.jsx("li",{children:e==null?void 0:e.output_dir})})}),children:"分析可视化"})},{key:"result_parse",label:n.jsx(B,{title:n.jsx(n.Fragment,{children:n.jsx("ul",{children:n.jsx("li",{children:e==null?void 0:e.output_dir})})}),children:"结果解析"})}];return n.jsx(n.Fragment,{children:n.jsx(be,{tabBarExtraContent:n.jsxs(U,{gap:"small",align:"center",children:[n.jsx(Ge,{color:"cyan",children:e==null?void 0:e.analysis_status}),n.jsx(B,{title:n.jsx(n.Fragment,{children:u[r]})}),e.analysis_status=="running"?n.jsx(n.Fragment,{children:n.jsx(he,{title:"是否停止!",onConfirm:async()=>{await qt(e.analysis_id),i.success("停止成功")},children:n.jsx(w,{size:"small",color:"cyan",variant:"solid",children:"停止"})})}):n.jsx(n.Fragment,{children:n.jsx(he,{title:"是否运行!",onConfirm:x,children:n.jsx(w,{size:"small",color:"cyan",variant:"solid",children:e.analysis_status=="created"?"运行":"重新运行"})})})]}),activeKey:r,onChange:d=>{a(d),s.current=d},size:"small",items:p.map(d=>({key:d.key,label:d.label,children:n.jsx(un,{file:u[d.key],fileKey:d.key,analysis:e})}))})})}),Sn=o.forwardRef(({visible:e,params:t,onClose:r,callback:a},i)=>{console.log("loading PipelineInfo...");const l=async()=>{c(),a&&a()},c=async()=>{const d=(await Jt(u)).data;s(d)},[m,s]=o.useState();if(o.useImperativeHandle(i,()=>({relaod:c})),o.useEffect(()=>{e&&c()},[e&&(t==null?void 0:t.analysis_id)]),!e)return n.jsx(n.Fragment,{});const{analysis_id:u,...x}=t;return n.jsx(n.Fragment,{children:n.jsx(re,{size:"small",title:`流程监控 ${u}`,extra:n.jsx(n.Fragment,{children:n.jsx(w,{size:"small",onClick:r,color:"cyan",variant:"solid",children:"关闭"})}),children:n.jsx(pn,{analysis:m,callback:l,loadAnalysis:c})})})});export{pn as F,rn as O,Sn as P,Jt as f,Ut as r,qt as s};
