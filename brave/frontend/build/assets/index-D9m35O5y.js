import{r as a,j as e,R,C as S,u as j,s as _,a as f,F as k,P as I,B as b,S as w,b as E}from"./main-B2jPVJuc.js";import L from"./index-CwSQOIN4.js";import{c as M,C as N,I as O}from"./index-Dusr40e4.js";import{u as F}from"./useStickyTop-CUcu_dat.js";import{C}from"./index-01a6DBbv.js";import{L as c}from"./index-CVcxCOCs.js";import{R as D}from"./RedoOutlined-B2jLc-U5.js";import{A as P}from"./index-ClcbhDbg.js";import"./index-JnpnusFw.js";import"./addEventListener-BtkycpkD.js";import"./usePagination-BFzen1kl.js";import"./Table-D1zuQkUf.js";import"./Dropdown-DxVuU2Kw.js";import"./index-IGtn9UM1.js";import"./index-bd5EV77p.js";import"./callSuper--xQhnHMR.js";const z=`
# Bioinformatics Reactive Analysis and Visualization Engine(BRAVE)

![](/brave-api/img/logo.png)
`,ae=()=>{const[o,x]=a.useState(z),{isSticky:d}=F(576);return e.jsx("div",{style:{maxWidth:"1800px",margin:"1rem auto"},children:e.jsxs(R,{gutter:[d?16:0,16],children:[e.jsx(S,{xs:24,sm:12,md:12,lg:12,xl:12,children:e.jsx(C,{children:e.jsx(L,{data:o})})}),e.jsx(S,{xs:24,sm:6,md:6,lg:6,xl:6,children:e.jsx(A,{keys:["traefik","code-server","notebook","rstudio"]})}),e.jsx(S,{xs:24,sm:6,md:6,lg:6,xl:6,children:e.jsx(J,{})})]})})},A=({keys:o})=>{const[x,d]=a.useState(),[p,u]=a.useState(!1),{baseURL:m}=j(s=>s.user),[y,g]=_.useMessage(),i=j(s=>s.global.sseData),[h,v]=a.useState([]);a.useEffect(()=>{try{const s=JSON.parse(i);h.includes(s.analysis_id)&&n()}catch{}},[i]);const n=async()=>{u(!0);const s=await f.post("/container/list-container-key",{container_key:o});v(s.data.map(t=>t.container_id));const r=Object.fromEntries(s.data.map(t=>[t.container_key,t])),l=o.map(t=>r[t]?r[t]:{key:t});d(l),u(!1)};return a.useEffect(()=>{n()},[m]),e.jsxs(C,{title:"Cloud App",size:"small",loading:p,extra:e.jsx(e.Fragment,{children:e.jsx(D,{style:{cursor:"pointer"},onClick:()=>n()})}),children:[g,e.jsx(c,{className:"demo-loadmore-list",loading:p,itemLayout:"vertical",dataSource:x,renderItem:s=>e.jsx(e.Fragment,{children:s!=null&&s.name?e.jsx(e.Fragment,{children:e.jsx(c.Item,{actions:[e.jsx(N,{record:s,reload:n,traefikUI:s.name=="traefik"})],children:e.jsx(w,{avatar:!0,title:!1,loading:s.loading,active:!0,children:e.jsx(c.Item.Meta,{avatar:e.jsx("img",{draggable:!1,width:100,alt:"logo",src:s.img}),title:e.jsx("p",{style:{wordWrap:"break-word"},children:s.image}),description:s.name})})})}):e.jsx(k,{align:"center",style:{padding:"1rem 0"},children:e.jsx(I,{title:"Install?",onConfirm:async()=>{const r=M.find(t=>t.container_key==(s==null?void 0:s.key));r||y.error(`${name} templete not exist!`);const l=JSON.parse(JSON.stringify(r));l.envionment=JSON.stringify(r.envionment),l.labels=JSON.stringify(r.labels),console.log(l),await f.post("/container/add-or-update-container",l),n()},children:e.jsxs(b,{size:"small",color:"cyan",variant:"solid",children:["Install ",s==null?void 0:s.key]})})})})})]})},J=()=>{const[o,x]=a.useState([]),[d,p]=a.useState(!1),{baseURL:u}=j(s=>s.user),[m,y]=a.useState(),g=j(s=>s.global.sseData),{modal:i,openModal:h,closeModal:v}=E();a.useEffect(()=>{try{const s=JSON.parse(g);(s.event=="analysis_complete"||s.event=="analysis_failed"||s.event=="analysis_started")&&(n(!1),y(s))}catch{}},[g]);const n=async s=>{p(!0);const r=await f.get(`/container/list-running-container?force=${s}`);x(r.data),p(!1)};return a.useEffect(()=>{n(!1)},[u]),e.jsxs(C,{size:"small",title:e.jsx(e.Fragment,{children:e.jsx(k,{justify:"space-between",align:"center",children:e.jsx("div",{children:"Running Container"})})}),extra:e.jsx(e.Fragment,{children:e.jsx(D,{style:{cursor:"pointer"},onClick:()=>n(!0)})}),style:{marginBottom:"1rem"},children:[m&&e.jsx(P,{message:`${m.run_id}: ${m.event}`,type:"success"}),e.jsx(c,{className:"demo-loadmore-list",loading:d,itemLayout:"vertical",dataSource:o,renderItem:s=>e.jsx(c.Item,{actions:[e.jsxs(k,{gap:"small",children:[e.jsx(I,{title:"Stop?",onConfirm:async()=>{await f.post(`/container/stop-container-by-run-id/${s.name}`)},children:e.jsx(b,{size:"small",color:"cyan",variant:"solid",children:"Stop"})}),e.jsx(b,{size:"small",color:"cyan",variant:"solid",onClick:()=>{h("inspectPanel",{inspect:"inspect",id:s.name})},children:"Inspect"})]})],children:e.jsx(w,{avatar:!0,title:!1,loading:s.loading,active:!0,children:e.jsx(c.Item.Meta,{title:e.jsx("p",{style:{wordWrap:"break-word"},children:s.image}),description:s.name})})})}),e.jsx(O,{visible:i.key=="inspectPanel"&&i.visible,params:i.params,onClose:v})]})};export{ae as default};
