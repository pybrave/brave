import{r as t,F as T,j as s,aG as P,aO as v,ad as p,v as D,aP as M,B as J,y as N,aQ as O,a as q}from"./index-BEcv5oUg.js";import B from"./index-qLM_XXis.js";import{D as C}from"./index-B0m5tqnh.js";import"./context-X2lNtYDa.js";const E=()=>{const i=t.useRef(null),[r,c]=t.useState("downstream"),[g,m]=t.useState(),[x,d]=t.useState(!1),[a,f]=t.useState(),[n,h]=t.useState(),[j,u]=t.useState(!1),[l]=T.useForm(),[S,A]=t.useState(),[b,F]=t.useState({}),[R,y]=t.useState(!1),[_,w]=t.useState(!1),L=async e=>{y(!0);const o=await q.get(`/find_downstream_analysis/${e}`);F(o.data),y(!1)};return s.jsxs("div",{style:{maxWidth:"1800px",margin:"1rem auto"},children:[s.jsx(P,{style:{marginBottom:"1rem"},justify:"flex-end",align:"center",gap:"small",children:s.jsx(v.Group,{options:[{label:"下游分析结果",value:"downstream"},{label:"上游分析结果",value:"upstream"}],onChange:({target:{value:e}})=>{console.log(e),c(e)},value:r,optionType:"button",buttonStyle:"solid"})}),s.jsx(p,{title:"下游分析历史记录",ref:i,analysisType:"analysisResult",params:{analysis_type:r},setTableLoading:d,setRecord:e=>{const o=JSON.parse(e.request_param);console.log(o),f(e),h(o)},setTabletData:e=>{m(e)}}),s.jsx("div",{style:{marginBottom:"2rem"}}),a&&s.jsxs(s.Fragment,{children:[s.jsx(D,{title:`${a.analysis_name}(${a.analysis_method})`,extra:s.jsx(s.Fragment,{children:s.jsx(J,{onClick:()=>{u(!0),L(n.analysis_method),l.resetFields(),l.setFieldsValue(n),a!=null&&a.id&&l.setFieldValue("id",a==null?void 0:a.id)},children:"重新分析"})}),children:s.jsx(M,{plotLoading:x,filePlot:g})}),s.jsx("hr",{}),s.jsx(B,{params:{obj_key:a.analysis_method,obj_type:"analysis_img"}}),s.jsxs(C,{loading:R,title:`重新分析 - ${a.analysis_name}`,open:j,onClose:()=>u(!1),width:"50%",children:[s.jsx(p,{title:"输出文件",analysisType:r,analysisMethod:[n.inputAnalysisMenthod],shouldTrigger:!0,setResultTableList:A}),s.jsx(N,{spinning:_,children:s.jsx(O,{form:l,resultTableList:S,formJson:b.formJson,sampleGroupApI:!1,moduleName:n.moduleName,params:n.params,setPlotLoading:e=>{d(e),w(e)},activeTabKey:n.inputAnalysisMenthod.name,inputAnalysisMethod:n.inputAnalysisMenthod,saveAnalysisMethod:n.analysis_method,project:n.project,setFilePlot:m,plotReloadTable:()=>{i.current&&i.current.reload()}})})]})]})]})};export{E as default};
