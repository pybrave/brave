import{r as o,v as Ie,_ as ze,ad as D,ar as Be,K as M,am as Ze,Y as Ne,Z as Re,a1 as Fe,a4 as v,as as Qe,at as Ce,au as Me,R as w,C as et,av as tt,ah as nt,aw as Se,ax as rt,ay as _e,b as at,az as it,a as X,j as r,I as ot,c as ge,B as I,d as ke,p as lt,g as ye,P as st,aq as ct,o as F}from"./index-DhvRCvGD.js";import{L as ee,r as dt,C as mt}from"./index-Ca_ydFp5.js";import{C as ne,T as ut}from"./index-CcbGURz4.js";import{D as pt,e as gt,R as ft,a as ht,S as xt,F as yt}from"./Table-Qj6jybFq.js";import{P as Te,S as be}from"./index-B0wVmou5.js";import{b as bt}from"./index-Cbup1MBC.js";import{A as jt}from"./index-CXOMMtm2.js";import{T as Ae}from"./index-DDnT2cqO.js";import{B as Le}from"./index-Bhl4l2p1.js";var $t={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M505.7 661a8 8 0 0012.6 0l112-141.7c4.1-5.2.4-12.9-6.3-12.9h-74.1V168c0-4.4-3.6-8-8-8h-60c-4.4 0-8 3.6-8 8v338.3H400c-6.7 0-10.4 7.7-6.3 12.9l112 141.8zM878 626h-60c-4.4 0-8 3.6-8 8v154H214V634c0-4.4-3.6-8-8-8h-60c-4.4 0-8 3.6-8 8v198c0 17.7 14.3 32 32 32h684c17.7 0 32-14.3 32-32V634c0-4.4-3.6-8-8-8z"}}]},name:"download",theme:"outlined"},vt=function(t,n){return o.createElement(Ie,ze({},t,{ref:n,icon:$t}))},Ct=o.forwardRef(vt),St={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M909.1 209.3l-56.4 44.1C775.8 155.1 656.2 92 521.9 92 290 92 102.3 279.5 102 511.5 101.7 743.7 289.8 932 521.9 932c181.3 0 335.8-115 394.6-276.1 1.5-4.2-.7-8.9-4.9-10.3l-56.7-19.5a8 8 0 00-10.1 4.8c-1.8 5-3.8 10-5.9 14.9-17.3 41-42.1 77.8-73.7 109.4A344.77 344.77 0 01655.9 829c-42.3 17.9-87.4 27-133.8 27-46.5 0-91.5-9.1-133.8-27A341.5 341.5 0 01279 755.2a342.16 342.16 0 01-73.7-109.4c-17.9-42.4-27-87.4-27-133.9s9.1-91.5 27-133.9c17.3-41 42.1-77.8 73.7-109.4 31.6-31.6 68.4-56.4 109.3-73.8 42.3-17.9 87.4-27 133.8-27 46.5 0 91.5 9.1 133.8 27a341.5 341.5 0 01109.3 73.8c9.9 9.9 19.2 20.4 27.8 31.4l-60.2 47a8 8 0 003 14.1l175.6 43c5 1.2 9.9-2.6 9.9-7.7l.8-180.9c-.1-6.6-7.8-10.3-13-6.2z"}}]},name:"reload",theme:"outlined"},_t=function(t,n){return o.createElement(Ie,ze({},t,{ref:n,icon:St}))},Oe=o.forwardRef(_t);const re=e=>{let{children:t}=e;const{getPrefixCls:n}=o.useContext(D),a=n("breadcrumb");return o.createElement("li",{className:`${a}-separator`,"aria-hidden":"true"},t===""?t:t||"/")};re.__ANT_BREADCRUMB_SEPARATOR=!0;var Ot=function(e,t){var n={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&t.indexOf(a)<0&&(n[a]=e[a]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,a=Object.getOwnPropertySymbols(e);i<a.length;i++)t.indexOf(a[i])<0&&Object.prototype.propertyIsEnumerable.call(e,a[i])&&(n[a[i]]=e[a[i]]);return n};function wt(e,t){if(e.title===void 0||e.title===null)return null;const n=Object.keys(t).join("|");return typeof e.title=="object"?e.title:String(e.title).replace(new RegExp(`:(${n})`,"g"),(a,i)=>t[i]||a)}function He(e,t,n,a){if(n==null)return null;const{className:i,onClick:l}=t,c=Ot(t,["className","onClick"]),d=Object.assign(Object.assign({},Be(c,{data:!0,aria:!0})),{onClick:l});return a!==void 0?o.createElement("a",Object.assign({},d,{className:M(`${e}-link`,i),href:a}),n):o.createElement("span",Object.assign({},d,{className:M(`${e}-link`,i)}),n)}function Pt(e,t){return(a,i,l,c,d)=>{if(t)return t(a,i,l,c);const m=wt(a,i);return He(e,a,m,d)}}var fe=function(e,t){var n={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&t.indexOf(a)<0&&(n[a]=e[a]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,a=Object.getOwnPropertySymbols(e);i<a.length;i++)t.indexOf(a[i])<0&&Object.prototype.propertyIsEnumerable.call(e,a[i])&&(n[a[i]]=e[a[i]]);return n};const De=e=>{const{prefixCls:t,separator:n="/",children:a,menu:i,overlay:l,dropdownProps:c,href:d}=e,g=(f=>{if(i||l){const u=Object.assign({},c);if(i){const s=i||{},{items:x}=s,h=fe(s,["items"]);u.menu=Object.assign(Object.assign({},h),{items:x==null?void 0:x.map((C,S)=>{var{key:E,title:p,label:y,path:j}=C,N=fe(C,["key","title","label","path"]);let z=y??p;return j&&(z=o.createElement("a",{href:`${d}${j}`},z)),Object.assign(Object.assign({},N),{key:E??S,label:z})})})}else l&&(u.overlay=l);return o.createElement(pt,Object.assign({placement:"bottom"},u),o.createElement("span",{className:`${t}-overlay-link`},f,o.createElement(Ze,null)))}return f})(a);return g!=null?o.createElement(o.Fragment,null,o.createElement("li",null,g),n&&o.createElement(re,null,n)):null},Xe=e=>{const{prefixCls:t,children:n,href:a}=e,i=fe(e,["prefixCls","children","href"]),{getPrefixCls:l}=o.useContext(D),c=l("breadcrumb",t);return o.createElement(De,Object.assign({},i,{prefixCls:c}),He(c,i,n,a))};Xe.__ANT_BREADCRUMB_ITEM=!0;const Et=e=>{const{componentCls:t,iconCls:n,calc:a}=e;return{[t]:Object.assign(Object.assign({},Fe(e)),{color:e.itemColor,fontSize:e.fontSize,[n]:{fontSize:e.iconFontSize},ol:{display:"flex",flexWrap:"wrap",margin:0,padding:0,listStyle:"none"},a:Object.assign({color:e.linkColor,transition:`color ${e.motionDurationMid}`,padding:`0 ${v(e.paddingXXS)}`,borderRadius:e.borderRadiusSM,height:e.fontHeight,display:"inline-block",marginInline:a(e.marginXXS).mul(-1).equal(),"&:hover":{color:e.linkHoverColor,backgroundColor:e.colorBgTextHover}},Qe(e)),"li:last-child":{color:e.lastItemColor},[`${t}-separator`]:{marginInline:e.separatorMargin,color:e.separatorColor},[`${t}-link`]:{[`
          > ${n} + span,
          > ${n} + a
        `]:{marginInlineStart:e.marginXXS}},[`${t}-overlay-link`]:{borderRadius:e.borderRadiusSM,height:e.fontHeight,display:"inline-block",padding:`0 ${v(e.paddingXXS)}`,marginInline:a(e.marginXXS).mul(-1).equal(),[`> ${n}`]:{marginInlineStart:e.marginXXS,fontSize:e.fontSizeIcon},"&:hover":{color:e.linkHoverColor,backgroundColor:e.colorBgTextHover,a:{color:e.linkHoverColor}},a:{"&:hover":{backgroundColor:"transparent"}}},[`&${e.componentCls}-rtl`]:{direction:"rtl"}})}},It=e=>({itemColor:e.colorTextDescription,lastItemColor:e.colorText,iconFontSize:e.fontSize,linkColor:e.colorTextDescription,linkHoverColor:e.colorText,separatorColor:e.colorTextDescription,separatorMargin:e.marginXS}),zt=Ne("Breadcrumb",e=>{const t=Re(e,{});return Et(t)},It);var we=function(e,t){var n={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&t.indexOf(a)<0&&(n[a]=e[a]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,a=Object.getOwnPropertySymbols(e);i<a.length;i++)t.indexOf(a[i])<0&&Object.prototype.propertyIsEnumerable.call(e,a[i])&&(n[a[i]]=e[a[i]]);return n};function Bt(e){const{breadcrumbName:t,children:n}=e,a=we(e,["breadcrumbName","children"]),i=Object.assign({title:t},a);return n&&(i.menu={items:n.map(l=>{var{breadcrumbName:c}=l,d=we(l,["breadcrumbName"]);return Object.assign(Object.assign({},d),{title:c})})}),i}function Nt(e,t){return o.useMemo(()=>e||(t?t.map(Bt):null),[e,t])}var Rt=function(e,t){var n={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&t.indexOf(a)<0&&(n[a]=e[a]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,a=Object.getOwnPropertySymbols(e);i<a.length;i++)t.indexOf(a[i])<0&&Object.prototype.propertyIsEnumerable.call(e,a[i])&&(n[a[i]]=e[a[i]]);return n};const Ft=(e,t)=>{if(t===void 0)return t;let n=(t||"").replace(/^\//,"");return Object.keys(e).forEach(a=>{n=n.replace(`:${a}`,e[a])}),n},J=e=>{const{prefixCls:t,separator:n="/",style:a,className:i,rootClassName:l,routes:c,items:d,children:m,itemRender:g,params:f={}}=e,u=Rt(e,["prefixCls","separator","style","className","rootClassName","routes","items","children","itemRender","params"]),{getPrefixCls:s,direction:x,breadcrumb:h}=o.useContext(D);let C;const S=s("breadcrumb",t),[E,p,y]=zt(S),j=Nt(d,c),N=Pt(S,g);if(j&&j.length>0){const b=[],P=d||c;C=j.map((k,L)=>{const{path:ae,key:W,type:ie,menu:H,overlay:q,onClick:U,className:oe,separator:le,dropdownProps:se}=k,G=Ft(f,ae);G!==void 0&&b.push(G);const _=W??L;if(ie==="separator")return o.createElement(re,{key:_},le);const K={},ce=L===j.length-1;H?K.menu=H:q&&(K.overlay=q);let{href:V}=k;return b.length&&G!==void 0&&(V=`#/${b.join("/")}`),o.createElement(De,Object.assign({key:_},K,Be(k,{data:!0,aria:!0}),{className:oe,dropdownProps:se,href:V,separator:ce?"":n,onClick:U,prefixCls:S}),N(k,f,P,b,V))})}else if(m){const b=Ce(m).length;C=Ce(m).map((P,k)=>{if(!P)return P;const L=k===b-1;return Me(P,{separator:L?"":n,key:k})})}const z=M(S,h==null?void 0:h.className,{[`${S}-rtl`]:x==="rtl"},i,l,p,y),O=Object.assign(Object.assign({},h==null?void 0:h.style),a);return E(o.createElement("nav",Object.assign({className:z,style:O},u),o.createElement("ol",null,C)))};J.Item=Xe;J.Separator=re;const je=w.createContext({});je.Consumer;var We=function(e,t){var n={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&t.indexOf(a)<0&&(n[a]=e[a]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,a=Object.getOwnPropertySymbols(e);i<a.length;i++)t.indexOf(a[i])<0&&Object.prototype.propertyIsEnumerable.call(e,a[i])&&(n[a[i]]=e[a[i]]);return n};const Mt=e=>{var{prefixCls:t,className:n,avatar:a,title:i,description:l}=e,c=We(e,["prefixCls","className","avatar","title","description"]);const{getPrefixCls:d}=o.useContext(D),m=d("list",t),g=M(`${m}-item-meta`,n),f=w.createElement("div",{className:`${m}-item-meta-content`},i&&w.createElement("h4",{className:`${m}-item-meta-title`},i),l&&w.createElement("div",{className:`${m}-item-meta-description`},l));return w.createElement("div",Object.assign({},c,{className:g}),a&&w.createElement("div",{className:`${m}-item-meta-avatar`},a),(i||l)&&f)},kt=w.forwardRef((e,t)=>{const{prefixCls:n,children:a,actions:i,extra:l,styles:c,className:d,classNames:m,colStyle:g}=e,f=We(e,["prefixCls","children","actions","extra","styles","className","classNames","colStyle"]),{grid:u,itemLayout:s}=o.useContext(je),{getPrefixCls:x,list:h}=o.useContext(D),C=O=>{var b,P;return M((P=(b=h==null?void 0:h.item)===null||b===void 0?void 0:b.classNames)===null||P===void 0?void 0:P[O],m==null?void 0:m[O])},S=O=>{var b,P;return Object.assign(Object.assign({},(P=(b=h==null?void 0:h.item)===null||b===void 0?void 0:b.styles)===null||P===void 0?void 0:P[O]),c==null?void 0:c[O])},E=()=>{let O=!1;return o.Children.forEach(a,b=>{typeof b=="string"&&(O=!0)}),O&&o.Children.count(a)>1},p=()=>s==="vertical"?!!l:!E(),y=x("list",n),j=i&&i.length>0&&w.createElement("ul",{className:M(`${y}-item-action`,C("actions")),key:"actions",style:S("actions")},i.map((O,b)=>w.createElement("li",{key:`${y}-item-action-${b}`},O,b!==i.length-1&&w.createElement("em",{className:`${y}-item-action-split`})))),N=u?"div":"li",z=w.createElement(N,Object.assign({},f,u?{}:{ref:t},{className:M(`${y}-item`,{[`${y}-item-no-flex`]:!p()},d)}),s==="vertical"&&l?[w.createElement("div",{className:`${y}-item-main`,key:"content"},a,j),w.createElement("div",{className:M(`${y}-item-extra`,C("extra")),key:"extra",style:S("extra")},l)]:[a,j,Me(l,{key:"extra"})]);return u?w.createElement(et,{ref:t,flex:1,style:g},z):z}),Ge=kt;Ge.Meta=Mt;const Tt=e=>{const{listBorderedCls:t,componentCls:n,paddingLG:a,margin:i,itemPaddingSM:l,itemPaddingLG:c,marginLG:d,borderRadiusLG:m}=e;return{[t]:{border:`${v(e.lineWidth)} ${e.lineType} ${e.colorBorder}`,borderRadius:m,[`${n}-header,${n}-footer,${n}-item`]:{paddingInline:a},[`${n}-pagination`]:{margin:`${v(i)} ${v(d)}`}},[`${t}${n}-sm`]:{[`${n}-item,${n}-header,${n}-footer`]:{padding:l}},[`${t}${n}-lg`]:{[`${n}-item,${n}-header,${n}-footer`]:{padding:c}}}},At=e=>{const{componentCls:t,screenSM:n,screenMD:a,marginLG:i,marginSM:l,margin:c}=e;return{[`@media screen and (max-width:${a}px)`]:{[t]:{[`${t}-item`]:{[`${t}-item-action`]:{marginInlineStart:i}}},[`${t}-vertical`]:{[`${t}-item`]:{[`${t}-item-extra`]:{marginInlineStart:i}}}},[`@media screen and (max-width: ${n}px)`]:{[t]:{[`${t}-item`]:{flexWrap:"wrap",[`${t}-action`]:{marginInlineStart:l}}},[`${t}-vertical`]:{[`${t}-item`]:{flexWrap:"wrap-reverse",[`${t}-item-main`]:{minWidth:e.contentWidth},[`${t}-item-extra`]:{margin:`auto auto ${v(c)}`}}}}}},Lt=e=>{const{componentCls:t,antCls:n,controlHeight:a,minHeight:i,paddingSM:l,marginLG:c,padding:d,itemPadding:m,colorPrimary:g,itemPaddingSM:f,itemPaddingLG:u,paddingXS:s,margin:x,colorText:h,colorTextDescription:C,motionDurationSlow:S,lineWidth:E,headerBg:p,footerBg:y,emptyTextPadding:j,metaMarginBottom:N,avatarMarginRight:z,titleMarginBottom:O,descriptionFontSize:b}=e;return{[t]:Object.assign(Object.assign({},Fe(e)),{position:"relative","*":{outline:"none"},[`${t}-header`]:{background:p},[`${t}-footer`]:{background:y},[`${t}-header, ${t}-footer`]:{paddingBlock:l},[`${t}-pagination`]:{marginBlockStart:c,[`${n}-pagination-options`]:{textAlign:"start"}},[`${t}-spin`]:{minHeight:i,textAlign:"center"},[`${t}-items`]:{margin:0,padding:0,listStyle:"none"},[`${t}-item`]:{display:"flex",alignItems:"center",justifyContent:"space-between",padding:m,color:h,[`${t}-item-meta`]:{display:"flex",flex:1,alignItems:"flex-start",maxWidth:"100%",[`${t}-item-meta-avatar`]:{marginInlineEnd:z},[`${t}-item-meta-content`]:{flex:"1 0",width:0,color:h},[`${t}-item-meta-title`]:{margin:`0 0 ${v(e.marginXXS)} 0`,color:h,fontSize:e.fontSize,lineHeight:e.lineHeight,"> a":{color:h,transition:`all ${S}`,"&:hover":{color:g}}},[`${t}-item-meta-description`]:{color:C,fontSize:b,lineHeight:e.lineHeight}},[`${t}-item-action`]:{flex:"0 0 auto",marginInlineStart:e.marginXXL,padding:0,fontSize:0,listStyle:"none","& > li":{position:"relative",display:"inline-block",padding:`0 ${v(s)}`,color:C,fontSize:e.fontSize,lineHeight:e.lineHeight,textAlign:"center","&:first-child":{paddingInlineStart:0}},[`${t}-item-action-split`]:{position:"absolute",insetBlockStart:"50%",insetInlineEnd:0,width:E,height:e.calc(e.fontHeight).sub(e.calc(e.marginXXS).mul(2)).equal(),transform:"translateY(-50%)",backgroundColor:e.colorSplit}}},[`${t}-empty`]:{padding:`${v(d)} 0`,color:C,fontSize:e.fontSizeSM,textAlign:"center"},[`${t}-empty-text`]:{padding:j,color:e.colorTextDisabled,fontSize:e.fontSize,textAlign:"center"},[`${t}-item-no-flex`]:{display:"block"}}),[`${t}-grid ${n}-col > ${t}-item`]:{display:"block",maxWidth:"100%",marginBlockEnd:x,paddingBlock:0,borderBlockEnd:"none"},[`${t}-vertical ${t}-item`]:{alignItems:"initial",[`${t}-item-main`]:{display:"block",flex:1},[`${t}-item-extra`]:{marginInlineStart:c},[`${t}-item-meta`]:{marginBlockEnd:N,[`${t}-item-meta-title`]:{marginBlockStart:0,marginBlockEnd:O,color:h,fontSize:e.fontSizeLG,lineHeight:e.lineHeightLG}},[`${t}-item-action`]:{marginBlockStart:d,marginInlineStart:"auto","> li":{padding:`0 ${v(d)}`,"&:first-child":{paddingInlineStart:0}}}},[`${t}-split ${t}-item`]:{borderBlockEnd:`${v(e.lineWidth)} ${e.lineType} ${e.colorSplit}`,"&:last-child":{borderBlockEnd:"none"}},[`${t}-split ${t}-header`]:{borderBlockEnd:`${v(e.lineWidth)} ${e.lineType} ${e.colorSplit}`},[`${t}-split${t}-empty ${t}-footer`]:{borderTop:`${v(e.lineWidth)} ${e.lineType} ${e.colorSplit}`},[`${t}-loading ${t}-spin-nested-loading`]:{minHeight:a},[`${t}-split${t}-something-after-last-item ${n}-spin-container > ${t}-items > ${t}-item:last-child`]:{borderBlockEnd:`${v(e.lineWidth)} ${e.lineType} ${e.colorSplit}`},[`${t}-lg ${t}-item`]:{padding:u},[`${t}-sm ${t}-item`]:{padding:f},[`${t}:not(${t}-vertical)`]:{[`${t}-item-no-flex`]:{[`${t}-item-action`]:{float:"right"}}}}},Ht=e=>({contentWidth:220,itemPadding:`${v(e.paddingContentVertical)} 0`,itemPaddingSM:`${v(e.paddingContentVerticalSM)} ${v(e.paddingContentHorizontal)}`,itemPaddingLG:`${v(e.paddingContentVerticalLG)} ${v(e.paddingContentHorizontalLG)}`,headerBg:"transparent",footerBg:"transparent",emptyTextPadding:e.padding,metaMarginBottom:e.padding,avatarMarginRight:e.padding,titleMarginBottom:e.paddingSM,descriptionFontSize:e.fontSize}),Dt=Ne("List",e=>{const t=Re(e,{listBorderedCls:`${e.componentCls}-bordered`,minHeight:e.controlHeightLG});return[Lt(t),Tt(t),At(t)]},Ht);var Xt=function(e,t){var n={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&t.indexOf(a)<0&&(n[a]=e[a]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,a=Object.getOwnPropertySymbols(e);i<a.length;i++)t.indexOf(a[i])<0&&Object.prototype.propertyIsEnumerable.call(e,a[i])&&(n[a[i]]=e[a[i]]);return n};function Wt(e,t){const{pagination:n=!1,prefixCls:a,bordered:i=!1,split:l=!0,className:c,rootClassName:d,style:m,children:g,itemLayout:f,loadMore:u,grid:s,dataSource:x=[],size:h,header:C,footer:S,loading:E=!1,rowKey:p,renderItem:y,locale:j}=e,N=Xt(e,["pagination","prefixCls","bordered","split","className","rootClassName","style","children","itemLayout","loadMore","grid","dataSource","size","header","footer","loading","rowKey","renderItem","locale"]),z=n&&typeof n=="object"?n:{},[O,b]=o.useState(z.defaultCurrent||1),[P,k]=o.useState(z.defaultPageSize||10),{getPrefixCls:L,direction:ae,className:W,style:ie}=tt("list"),{renderEmpty:H}=o.useContext(D),q={current:1,total:0},U=$=>(B,T)=>{var pe;b(B),k(T),n&&((pe=n==null?void 0:n[$])===null||pe===void 0||pe.call(n,B,T))},oe=U("onChange"),le=U("onShowSizeChange"),se=($,B)=>{if(!y)return null;let T;return typeof p=="function"?T=p($):p?T=$[p]:T=$.key,T||(T=`list-item-${B}`),o.createElement(o.Fragment,{key:T},y($,B))},G=!!(u||n||S),_=L("list",a),[K,ce,V]=Dt(_);let A=E;typeof A=="boolean"&&(A={spinning:A});const de=!!(A!=null&&A.spinning),Ke=nt(h);let Y="";switch(Ke){case"large":Y="lg";break;case"small":Y="sm";break}const Ve=M(_,{[`${_}-vertical`]:f==="vertical",[`${_}-${Y}`]:Y,[`${_}-split`]:l,[`${_}-bordered`]:i,[`${_}-loading`]:de,[`${_}-grid`]:!!s,[`${_}-something-after-last-item`]:G,[`${_}-rtl`]:ae==="rtl"},W,c,d,ce,V),R=gt(q,{total:x.length,current:O,pageSize:P},n||{}),Je=Math.ceil(R.total/R.pageSize);R.current=Math.min(R.current,Je);const $e=n&&o.createElement("div",{className:M(`${_}-pagination`)},o.createElement(Te,Object.assign({align:"end"},R,{onChange:oe,onShowSizeChange:le})));let me=Se(x);n&&x.length>(R.current-1)*R.pageSize&&(me=Se(x).splice((R.current-1)*R.pageSize,R.pageSize));const qe=Object.keys(s||{}).some($=>["xs","sm","md","lg","xl","xxl"].includes($)),ve=rt(qe),Z=o.useMemo(()=>{for(let $=0;$<_e.length;$+=1){const B=_e[$];if(ve[B])return B}},[ve]),Ue=o.useMemo(()=>{if(!s)return;const $=Z&&s[Z]?s[Z]:s.column;if($)return{width:`${100/$}%`,maxWidth:`${100/$}%`}},[JSON.stringify(s),Z]);let ue=de&&o.createElement("div",{style:{minHeight:53}});if(me.length>0){const $=me.map(se);ue=s?o.createElement(at,{gutter:s.gutter},o.Children.map($,B=>o.createElement("div",{key:B==null?void 0:B.key,style:Ue},B))):o.createElement("ul",{className:`${_}-items`},$)}else!g&&!de&&(ue=o.createElement("div",{className:`${_}-empty-text`},(j==null?void 0:j.emptyText)||(H==null?void 0:H("List"))||o.createElement(it,{componentName:"List"})));const Q=R.position||"bottom",Ye=o.useMemo(()=>({grid:s,itemLayout:f}),[JSON.stringify(s),f]);return K(o.createElement(je.Provider,{value:Ye},o.createElement("div",Object.assign({ref:t,style:Object.assign(Object.assign({},ie),m),className:Ve},N),(Q==="top"||Q==="both")&&$e,C&&o.createElement("div",{className:`${_}-header`},C),o.createElement(be,Object.assign({},A),ue,g),S&&o.createElement("div",{className:`${_}-footer`},S),u||(Q==="bottom"||Q==="both")&&$e)))}const Gt=o.forwardRef(Wt),te=Gt;te.Item=Ge;const Kt=async e=>await X.get(`/find-analysis-by-id/${e}`),Vt=async e=>await X.post(`/run-analysis-v2/${e}`),yn=async e=>await X.post(`/analysis/stop-analysis/${e}`),{Search:Jt}=ot,{Text:Pe}=ge,qt=({path:e,onSelectFile:t})=>{const[n,a]=o.useState([]),[i,l]=o.useState(e),[c,d]=o.useState(""),[m,g]=o.useState(1),[f,u]=o.useState(0),s=10,x=async(p=i,y=c,j=m)=>{const N=await X.get("/file-operation/list-dir-v2",{params:{path:p,keyword:y,page:j,limit:s}});a(N.data.items),u(N.data.total),l(p),g(j)};o.useEffect(()=>{x(e)},[e]);const h=p=>{x(`${i}/${p}`,"",1)},C=p=>{x(i,p,1)},S=p=>{t({path:i+"/"+p.name,file:p.name})},E=i.split("/").filter(Boolean);return r.jsxs(ne,{title:"文件浏览器",extra:r.jsxs(xt,{children:[r.jsx(I,{icon:r.jsx(Oe,{}),onClick:()=>x(e),size:"small",children:"重置"}),r.jsx(I,{icon:r.jsx(Oe,{}),onClick:()=>x(i),size:"small",children:"刷新"})]}),children:[r.jsxs(J,{style:{marginBottom:"1rem"},children:[r.jsx(J.Item,{children:r.jsx("a",{onClick:()=>x("/"),children:"根目录"})}),E.map((p,y)=>r.jsx(J.Item,{children:r.jsx("a",{onClick:()=>{const j="/"+E.slice(0,y+1).join("/");x(j)},children:p})},y))]}),r.jsx(Jt,{placeholder:"搜索文件名",enterButton:"搜索",value:c,onChange:p=>d(p.target.value),onSearch:C,style:{marginBottom:16}}),r.jsx(te,{size:"small",bordered:!0,dataSource:n,locale:{emptyText:"暂无文件"},renderItem:p=>r.jsx(te.Item,{actions:p.is_dir?[r.jsx(I,{size:"small",onClick:()=>h(p.name),children:"进入"})]:[r.jsx(I,{type:"link",size:"small",icon:r.jsx(Ct,{}),href:`/brave-api/file-operation/download?path=${encodeURIComponent(i+"/"+p.name)}`,target:"_blank",children:"下载"}),r.jsx(I,{type:"link",size:"small",onClick:()=>S(p),children:"选择"})],children:r.jsx(te.Item.Meta,{avatar:p.is_dir?r.jsx(ft,{}):r.jsx(ht,{}),title:r.jsx(Pe,{strong:!0,style:{cursor:p.is_dir?"pointer":"default"},onClick:()=>p.is_dir&&h(p.name),children:p.name}),description:!p.is_dir&&r.jsxs(Pe,{type:"secondary",children:[(p.size/1024).toFixed(1)," KB"]})})})}),r.jsx(Te,{style:{marginTop:"1rem",textAlign:"center"},current:m,total:f,pageSize:s,onChange:p=>x(i,c,p),showSizeChanger:!1})]})},Ut=(e,t)=>X.post(`/fast-api/parse-analysis-result/${e}?save=${t}`),Yt=o.memo(({analysis_id:e,callback:t})=>{const[n,a]=o.useState(),[i,l]=o.useState(!1),{messageApi:c}=ke(),{modal:d,openModal:m,closeModal:g}=lt(),f=async(u=!1)=>{l(!0);try{const s=await Ut(e,u);a(s.data),l(!1),t&&u&&t()}catch(s){l(!1),c.error(s.response.data.detail)}};return o.useEffect(()=>{f(!1)},[e]),r.jsxs(r.Fragment,{children:[r.jsxs(ye,{gap:"small",justify:"flex-end",align:"center",children:[(n==null?void 0:n.file_format_list)&&r.jsx(r.Fragment,{children:n==null?void 0:n.file_format_list.map(u=>r.jsx(I,{size:"small",color:"cyan",variant:"solid",onClick:()=>m("modalA",{params:{component_id:u.component_id},title:u.name}),children:u.name}))}),r.jsx(st,{title:"确定解析吗？",onConfirm:()=>{f(!0),c.success("解析成功")},children:r.jsx(I,{size:"small",color:"cyan",variant:"solid",children:"解析"})}),r.jsx(I,{size:"small",color:"primary",variant:"solid",onClick:()=>f(!1),children:"刷新"})]}),r.jsx(be,{spinning:i,children:n&&r.jsx(r.Fragment,{children:n!=null&&n.error?r.jsx(ge,{children:r.jsx("pre",{children:n==null?void 0:n.error})}):r.jsxs(r.Fragment,{children:[r.jsx(yt,{size:"small",pagination:!1,rowKey:"component_id",columns:[{title:"名称",dataIndex:"name",key:"name"},{title:"目录",dataIndex:"dir",key:"dir"},{title:"文件组件ID",dataIndex:"component_id",key:"component_id"},{title:"文件格式",dataIndex:"fileFormat",key:"fileFormat",render:(u,s)=>r.jsx("div",{style:{overflowWrap:"break-word",wordBreak:"break-all"},children:JSON.stringify(s.fileFormat)})},{title:"操作",dataIndex:"component_id",key:"component_id",render:(u,s)=>r.jsx(r.Fragment,{children:r.jsx(I,{color:"cyan",variant:"solid",size:"small",onClick:()=>{m("modalC",{data:{component_id:s.component_id},structure:{component_type:"file",files:n==null?void 0:n.file_dict[s.dir]}})},children:"编辑"})})}],dataSource:n==null?void 0:n.file_format_list}),r.jsx(ne,{style:{maxHeight:"20rem",overflow:"auto"},children:r.jsx(ge,{children:r.jsx("pre",{children:JSON.stringify(n,null,2)})})})]})})}),r.jsx(bt,{callback:f,visible:d.key=="modalC"&&d.visible,onClose:g,params:d.params}),r.jsx(jt,{visible:d.key=="modalA"&&d.visible,params:d.params,onClose:g,analysis:n})]})});var he=function(){return he=Object.assign||function(e){for(var t,n=1,a=arguments.length;n<a;n++){t=arguments[n];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])}return e},he.apply(this,arguments)},Zt=o.forwardRef(function(e,t){return w.createElement(Le,he({},e,{chartType:"Bar",ref:t}))}),xe=function(){return xe=Object.assign||function(e){for(var t,n=1,a=arguments.length;n<a;n++){t=arguments[n];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])}return e},xe.apply(this,arguments)},Qt=o.forwardRef(function(e,t){return w.createElement(Le,xe({},e,{chartType:"Column",ref:t}))});const Ee=({file_path:e})=>{o.useEffect(()=>{e&&a(e)},[e]);const[t,n]=o.useState([]),a=async(i,l=!1)=>{const c=await dt(i);n(c.data)};return r.jsx(r.Fragment,{children:r.jsx(ne,{title:r.jsxs(Ae,{color:"blue",children:["文件: ",e]}),extra:r.jsx(I,{size:"small",color:"cyan",variant:"solid",onClick:()=>{a(e)},children:"刷新日志"}),bodyStyle:{padding:0},children:r.jsx(mt,{...t})})})},en=({output_dir:e,...t})=>(JSON.stringify(t),r.jsx(qt,{path:e})),tn=({data:e})=>{const t={data:e,xField:"task",yField:"realtime",colorField:"process",group:{padding:0},label:{text:n=>n.label,textBaseline:"bottom"}};return r.jsx(r.Fragment,{children:r.jsx(Qt,{...t})})},nn=({data:e})=>{const t=Array.from(new Set(e.map(l=>l.process))),[n,a]=o.useState(t[0]),i=e.filter(l=>l.process===n);return r.jsxs("div",{children:[r.jsx("div",{style:{marginBottom:16},children:t.map(l=>r.jsx(I,{type:l===n?"primary":"default",onClick:()=>a(l),style:{marginRight:8},children:l},l))}),r.jsx(tn,{data:i})]})},rn=({data:e})=>{const t={data:e,xField:"process",yField:"count",colorField:"status",stack:!0,sort:{reverse:!0,by:"y"},style:{maxWidth:50}};return r.jsx(Zt,{...t})},an=({analysis_id:e})=>{const[t,n]=o.useState({}),[a,i]=o.useState(!1);function l(d){const m=d.match(/(\d+)m/),g=d.match(/(\d+)s/),f=m?parseInt(m[1]):0,u=g?parseInt(g[1]):0;return f*60+u}const c=async()=>{i(!0);const d=await X.get(`/analysis/analysis-progress/${e}`),m={};d.data.forEach(u=>{const s=`${u.process}-${u.status}`;m[s]||(m[s]={process:u.process,status:u.status,count:0}),m[s].count+=1});const g=Object.values(m),f=d.data.map(u=>({process:u.process,task:u.task_id,realtime:l(u.realtime),label:u.realtime}));n({statusData:g,timeData:f}),i(!1)};return o.useEffect(()=>{c()},[]),r.jsxs(be,{spinning:a,children:[r.jsx(ye,{justify:"flex-end",gap:"small",children:r.jsx(I,{size:"small",color:"cyan",variant:"solid",onClick:c,children:"刷新"})}),r.jsx(rn,{data:(t==null?void 0:t.statusData)||[]}),r.jsx(nn,{data:(t==null?void 0:t.timeData)||[]})]})},on={output_dir:en,workflow_log_file:ee,executor_log_file:ee,trace_file:ee,command_log_path:ee,params_path:Ee,command_path:Ee,result_parse:Yt,analysis_progress:an},ln=({analysis:e,file:t,fileKey:n})=>{const a=on[n];return a?r.jsx(a,{...e,file_path:t,file:t,fileKey:n}):r.jsx(r.Fragment,{children:"no component"})},sn=o.memo(({analysis:e,callback:t})=>{const[n,a]=o.useState("command_log_path"),{messageApi:i}=ke(),{eventSourceRef:l,status:c,reconnect:d}=ct(),m=o.useRef(n);if(!e)return null;const g={workflow_log_file:e.workflow_log_file,executor_log_file:e.executor_log_file,trace_file:e.trace_file,params_path:e.params_path,command_path:e.command_path,command_log_path:e.command_log_path},f=async()=>{await Vt(e==null?void 0:e.analysis_id),i.success("运行成功"),t&&t()},u=[{key:"command_log_path",label:r.jsx(F,{title:r.jsx(r.Fragment,{children:r.jsx("ul",{children:r.jsx("li",{children:e==null?void 0:e.command_log_path})})}),children:"运行日志"})},{key:"trace_file",label:r.jsx(F,{title:r.jsx(r.Fragment,{children:r.jsx("ul",{children:r.jsx("li",{children:e==null?void 0:e.trace_file})})}),children:"运行进度"})},{key:"workflow_log_file",label:r.jsx(F,{title:r.jsx(r.Fragment,{children:r.jsx("ul",{children:r.jsx("li",{children:e==null?void 0:e.workflow_log_file})})}),children:"工作流日志"})},{key:"executor_log_file",label:r.jsx(F,{title:r.jsx(r.Fragment,{children:r.jsx("ul",{children:r.jsx("li",{children:e==null?void 0:e.executor_log_file})})}),children:"执行器日志"})},{key:"params_path",label:r.jsx(F,{title:r.jsx(r.Fragment,{children:r.jsx("ul",{children:r.jsx("li",{children:e==null?void 0:e.params_path})})}),children:"参数"})},{key:"command_path",label:r.jsx(F,{title:r.jsx(r.Fragment,{children:r.jsx("ul",{children:r.jsx("li",{children:e==null?void 0:e.command_path})})}),children:"命令"})},{key:"output_dir",label:r.jsx(F,{title:r.jsx(r.Fragment,{children:r.jsx("ul",{children:r.jsx("li",{children:e==null?void 0:e.output_dir})})}),children:"输出文件"})},{key:"analysis_progress",label:r.jsx(F,{title:r.jsx(r.Fragment,{children:r.jsx("ul",{children:r.jsx("li",{children:e==null?void 0:e.output_dir})})}),children:"分析可视化"})},{key:"result_parse",label:r.jsx(F,{title:r.jsx(r.Fragment,{children:r.jsx("ul",{children:r.jsx("li",{children:e==null?void 0:e.output_dir})})}),children:"结果解析"})}];return r.jsx(r.Fragment,{children:r.jsx(ut,{tabBarExtraContent:r.jsxs(ye,{gap:"small",align:"center",children:[r.jsx(Ae,{color:"cyan",children:e==null?void 0:e.analysis_status}),r.jsx(F,{title:r.jsx(r.Fragment,{children:g[n]})}),r.jsx(F,{title:r.jsx(r.Fragment,{children:e==null?void 0:e.analysis_id}),children:r.jsx(I,{disabled:e.analysis_status=="running",size:"small",color:"cyan",variant:"solid",onClick:f,children:e.analysis_status=="created"?"运行":"重新运行"})})]}),activeKey:n,onChange:s=>{a(s),m.current=s},size:"small",items:u.map(s=>({key:s.key,label:s.label,children:r.jsx(ln,{file:g[s.key],fileKey:s.key,analysis:e})}))})})}),bn=o.forwardRef(({visible:e,params:t,onClose:n,callback:a},i)=>{console.log("loading PipelineInfo...");const l=async()=>{c(),a&&a()},c=async()=>{const s=(await Kt(g)).data;m(s)},[d,m]=o.useState();if(o.useImperativeHandle(i,()=>({relaod:c})),o.useEffect(()=>{e&&c()},[e&&(t==null?void 0:t.analysis_id)]),!e)return r.jsx(r.Fragment,{});const{analysis_id:g,...f}=t;return r.jsx(r.Fragment,{children:r.jsx(ne,{size:"small",title:`流程监控 ${g}`,extra:r.jsx(r.Fragment,{children:r.jsx(I,{size:"small",onClick:n,color:"cyan",variant:"solid",children:"关闭"})}),children:r.jsx(sn,{analysis:d,callback:l,loadAnalysis:c})})})});export{sn as F,bn as P,Kt as f,Vt as r,yn as s};
