import{r as s,j as e,R,C as S,u,s as _,a as j,F as k,P as I,B as b,S as w,b as E}from"./main-DXywrSBF.js";import L from"./index-DKfe01fJ.js";import{c as M,C as N,I as O}from"./index-bhQSPbmK.js";import{C}from"./index-BwawJwES.js";import{L as c}from"./index-D6JX2Tsl.js";import{R as D}from"./RedoOutlined-CU0rkWuz.js";import{A as F}from"./index-CGxiMSah.js";import"./index-Bc2PCwt1.js";import"./addEventListener-DnTxgold.js";import"./usePagination-D0YIndB3.js";import"./Table-DFI76zEx.js";import"./Dropdown-CgdcCv_B.js";import"./index-CWc1_CU5.js";import"./index-qwSUrHIR.js";import"./callSuper-DcWcRBJA.js";const P=`
# Bioinformatics Reactive Analysis and Visualization Engine(BRAVE)

![](/brave-api/img/logo.png)
`,ee=()=>{const[o,p]=s.useState(P);return e.jsx("div",{style:{maxWidth:"1800px",margin:"0 auto"},children:e.jsxs(R,{children:[e.jsx(S,{xs:24,sm:12,md:12,lg:12,xl:12,style:{padding:"0 0.5rem",marginTop:"1rem"},children:e.jsx(C,{children:e.jsx(L,{data:o})})}),e.jsx(S,{xs:24,sm:6,md:6,lg:6,xl:6,style:{padding:"0 0.5rem",marginTop:"1rem"},children:e.jsx(z,{keys:["traefik","code-server","notebook","rstudio"]})}),e.jsx(S,{xs:24,sm:6,md:6,lg:6,xl:6,style:{padding:"0 0.5rem",marginTop:"1rem"},children:e.jsx(A,{})})]})})},z=({keys:o})=>{const[p,f]=s.useState(),[d,x]=s.useState(!1),{baseURL:m}=u(a=>a.user),[y,g]=_.useMessage(),i=u(a=>a.global.sseData),[h,v]=s.useState([]);s.useEffect(()=>{try{const a=JSON.parse(i);h.includes(a.analysis_id)&&n()}catch{}},[i]);const n=async()=>{x(!0);const a=await j.post("/container/list-container-key",{container_key:o});v(a.data.map(t=>t.container_id));const r=Object.fromEntries(a.data.map(t=>[t.container_key,t])),l=o.map(t=>r[t]?r[t]:{key:t});f(l),x(!1)};return s.useEffect(()=>{n()},[m]),e.jsxs(C,{title:"Cloud App",size:"small",loading:d,extra:e.jsx(e.Fragment,{children:e.jsx(D,{style:{cursor:"pointer"},onClick:()=>n()})}),children:[g,e.jsx(c,{className:"demo-loadmore-list",loading:d,itemLayout:"vertical",dataSource:p,renderItem:a=>e.jsx(e.Fragment,{children:a!=null&&a.name?e.jsx(e.Fragment,{children:e.jsx(c.Item,{actions:[e.jsx(N,{record:a,reload:n,traefikUI:a.name=="traefik"})],children:e.jsx(w,{avatar:!0,title:!1,loading:a.loading,active:!0,children:e.jsx(c.Item.Meta,{avatar:e.jsx("img",{draggable:!1,width:100,alt:"logo",src:a.img}),title:e.jsx("p",{style:{wordWrap:"break-word"},children:a.image}),description:a.name})})})}):e.jsx(k,{align:"center",style:{padding:"1rem 0"},children:e.jsx(I,{title:"Install?",onConfirm:async()=>{const r=M.find(t=>t.container_key==(a==null?void 0:a.key));r||y.error(`${name} templete not exist!`);const l=JSON.parse(JSON.stringify(r));l.envionment=JSON.stringify(r.envionment),l.labels=JSON.stringify(r.labels),console.log(l),await j.post("/container/add-or-update-container",l),n()},children:e.jsxs(b,{size:"small",color:"cyan",variant:"solid",children:["Install ",a==null?void 0:a.key]})})})})})]})},A=()=>{const[o,p]=s.useState([]),[f,d]=s.useState(!1),{baseURL:x}=u(a=>a.user),[m,y]=s.useState(),g=u(a=>a.global.sseData),{modal:i,openModal:h,closeModal:v}=E();s.useEffect(()=>{try{const a=JSON.parse(g);(a.event=="analysis_complete"||a.event=="analysis_failed"||a.event=="analysis_started")&&(n(!1),y(a))}catch{}},[g]);const n=async a=>{d(!0);const r=await j.get(`/container/list-running-container?force=${a}`);p(r.data),d(!1)};return s.useEffect(()=>{n(!1)},[x]),e.jsxs(C,{size:"small",title:e.jsx(e.Fragment,{children:e.jsx(k,{justify:"space-between",align:"center",children:e.jsx("div",{children:"Running Container"})})}),extra:e.jsx(e.Fragment,{children:e.jsx(D,{style:{cursor:"pointer"},onClick:()=>n(!0)})}),style:{marginBottom:"1rem"},children:[m&&e.jsx(F,{message:`${m.run_id}: ${m.event}`,type:"success"}),e.jsx(c,{className:"demo-loadmore-list",loading:f,itemLayout:"vertical",dataSource:o,renderItem:a=>e.jsx(c.Item,{actions:[e.jsxs(k,{gap:"small",children:[e.jsx(I,{title:"Stop?",onConfirm:async()=>{await j.post(`/container/stop-container-by-run-id/${a.name}`)},children:e.jsx(b,{size:"small",color:"cyan",variant:"solid",children:"Stop"})}),e.jsx(b,{size:"small",color:"cyan",variant:"solid",onClick:()=>{h("inspectPanel",{inspect:"inspect",id:a.name})},children:"Inspect"})]})],children:e.jsx(w,{avatar:!0,title:!1,loading:a.loading,active:!0,children:e.jsx(c.Item.Meta,{title:e.jsx("p",{style:{wordWrap:"break-word"},children:a.image}),description:a.name})})})}),e.jsx(O,{visible:i.key=="inspectPanel"&&i.visible,params:i.params,onClose:v})]})};export{ee as default};
