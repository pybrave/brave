import{r as t,F as T,j as s,B as b,a as P}from"./index-B_3LX8Sv.js";import{R as u}from"./index-DpyPNgke.js";import{A as D}from"./index-BR1xyGpG.js";import{A as M}from"./index-C_2k1w2Z.js";import J from"./index-fcb3c1pM.js";import{C as N}from"./index-BKM-36RV.js";import{D as q}from"./index-BWj5Fyk7.js";import{S as C}from"./index-T5bbXZ1z.js";import"./Table-DPfHYlNE.js";import"./addEventListener-BOhPI-H5.js";import"./index-D0T1H4s6.js";import"./index-iZ4aO8fm.js";import"./index-CnwY4WqK.js";import"./index-ufbsmYFx.js";import"./callSuper-DcPjgIPQ.js";import"./utils-D2B0dIuM.js";const Z=()=>{const r=t.useRef(null),[y,O]=t.useState("downstream"),[c,l]=t.useState(),[f,m]=t.useState(!1),[e,x]=t.useState(),[a,h]=t.useState(),[g,p]=t.useState(!1),[i]=T.useForm(),[j,A]=t.useState(),[S,R]=t.useState({}),[F,d]=t.useState(!1),[L,_]=t.useState(!1),w=async o=>{d(!0);const n=await P.get(`/find_downstream_analysis/${o}`);R(n.data),d(!1)};return s.jsxs("div",{style:{maxWidth:"1500px",margin:"1rem auto"},children:[s.jsx(u,{title:"分析结果",ref:r,analysisType:"analysisResult",params:{},setTableLoading:m,setRecord:o=>{const n=JSON.parse(o.request_param);console.log(n),x(o),h(n)},setTabletData:o=>{l(o)}}),s.jsx("div",{style:{marginBottom:"2rem"}}),e&&s.jsxs(s.Fragment,{children:[s.jsx(N,{title:`${e.analysis_name}(${e.analysis_method})`,extra:s.jsx(s.Fragment,{children:s.jsx(b,{onClick:()=>{p(!0),w(a.analysis_method),i.resetFields(),i.setFieldsValue(a),e!=null&&e.id&&i.setFieldValue("id",e==null?void 0:e.id)},children:"重新分析"})}),children:s.jsx(D,{plotLoading:f,filePlot:c})}),s.jsx("hr",{}),s.jsx(J,{params:{obj_key:e.analysis_method,obj_type:"analysis_img"}}),s.jsxs(q,{loading:F,title:`重新分析 - ${e.analysis_name}`,open:g,onClose:()=>p(!1),width:"50%",children:[s.jsx(u,{title:"输出文件",analysisType:y,analysisMethod:[a.inputAnalysisMenthod],shouldTrigger:!0,setResultTableList:A}),s.jsx(C,{spinning:L,children:s.jsx(M,{form:i,resultTableList:j,formJson:S.formJson,sampleGroupApI:!1,moduleName:a.moduleName,params:a.params,setPlotLoading:o=>{m(o),_(o)},activeTabKey:a.inputAnalysisMenthod.name,inputAnalysisMethod:a.inputAnalysisMenthod,saveAnalysisMethod:a.analysis_method,project:a.project,setFilePlot:l,plotReloadTable:()=>{r.current&&r.current.reload()}})})]})]})]})};export{Z as default};
