const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["./chat-DGXCpFrG.js","./main-gLSsR9RJ.js","./main-DLoYsyAm.css","./ClearOutlined-BOPVc5Ts.js","./index-C0N-NGLH.js","./index-CZkDjHh0.js","./Dropdown-_lWu8YLp.js","./index-5DUd3ktU.js","./Table-CR7g3HiW.js","./addEventListener-CTJtiein.js","./index-CaXusF4h.js","./Pagination-C_9v4VMr.js","./index-BKkflL4l.js","./graph-view-Cj9PEsBO.js","./zoom-BGsqVsDF.js","./rgb-BwIoVOhg.js","./index-DoeMV2fv.js","./index-C11mV772.js","./DeleteOutlined-DEO6o0ja.js","./relation-CL0tpzTP.js","./data-filter-w5IoB1KU.js"])))=>i.map(i=>d[i]);
import{r as w,O as Y,R as v,a3 as Se,N as ze,H as Q,aH as be,V as xe,aG as we,Z as Ce,a0 as ye,a5 as $e,aI as Oe,aS as Ee,j as N,t as Ie,aR as te,aT as Me,S as Pe,I as _e}from"./main-gLSsR9RJ.js";import{G as Re}from"./graph-view-Cj9PEsBO.js";import{R as je}from"./UpOutlined-hpn1VrTh.js";import"./zoom-BGsqVsDF.js";import"./rgb-BwIoVOhg.js";import"./index-C0N-NGLH.js";import"./index-CZkDjHh0.js";import"./Dropdown-_lWu8YLp.js";import"./index-BKkflL4l.js";import"./index-DoeMV2fv.js";import"./index-CaXusF4h.js";import"./index-C11mV772.js";const Ne=w.forwardRef((e,n)=>{const{prefixCls:i,className:o,children:t,size:f,style:a={}}=e,m=Y(`${i}-panel`,{[`${i}-panel-hidden`]:f===0},o),p=f!==void 0;return v.createElement("div",{ref:n,className:m,style:Object.assign(Object.assign({},a),{flexBasis:p?f:"auto",flexGrow:p?0:1})},t)}),ke=()=>null;var Le=function(e,n){var i={};for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&n.indexOf(o)<0&&(i[o]=e[o]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var t=0,o=Object.getOwnPropertySymbols(e);t<o.length;t++)n.indexOf(o[t])<0&&Object.prototype.propertyIsEnumerable.call(e,o[t])&&(i[o[t]]=e[o[t]]);return i};function Ve(e){if(e&&typeof e=="object")return e;const n=!!e;return{start:n,end:n}}function Be(e){return w.useMemo(()=>Se(e).filter(w.isValidElement).map(i=>{const{props:o}=i,{collapsible:t}=o,f=Le(o,["collapsible"]);return Object.assign(Object.assign({},f),{collapsible:Ve(t)})}),[e])}function Te(e,n,i){return w.useMemo(()=>{const o=[];for(let t=0;t<e.length-1;t+=1){const f=e[t],a=e[t+1],m=n[t],p=n[t+1],{resizable:l=!0,min:c,collapsible:P}=f,{resizable:y=!0,min:z,collapsible:s}=a,d=l&&y&&(m!==0||!c)&&(p!==0||!z),S=P.end&&m>0||s.start&&p===0&&m>0,r=s.start&&p>0||P.end&&m===0&&p>0;o[t]={resizable:d,startCollapsible:!!(i?r:S),endCollapsible:!!(i?S:r)}}return o},[n,e])}function K(e){return Number(e.slice(0,-1))/100}function se(e){return typeof e=="string"&&e.endsWith("%")}function De(e,n){const i=e.map(s=>s.size),o=e.length,t=n||0,f=s=>s*t,[a,m]=v.useState(()=>e.map(s=>s.defaultSize)),p=v.useMemo(()=>{var s;const d=[];for(let S=0;S<o;S+=1)d[S]=(s=i[S])!==null&&s!==void 0?s:a[S];return d},[o,a,i]),l=v.useMemo(()=>{let s=[],d=0;for(let r=0;r<o;r+=1){const g=p[r];if(se(g))s[r]=K(g);else if(g||g===0){const T=Number(g);Number.isNaN(T)||(s[r]=T/t)}else d+=1,s[r]=void 0}const S=s.reduce((r,g)=>r+(g||0),0);if(S>1||!d){const r=1/S;s=s.map(g=>g===void 0?0:g*r)}else{const r=(1-S)/d;s=s.map(g=>g===void 0?r:g)}return s},[p,t]),c=v.useMemo(()=>l.map(f),[l,t]),P=v.useMemo(()=>e.map(s=>se(s.min)?K(s.min):(s.min||0)/t),[e,t]),y=v.useMemo(()=>e.map(s=>se(s.max)?K(s.max):(s.max||t)/t),[e,t]);return[v.useMemo(()=>n?c:p,[c,n]),c,l,P,y,m]}function He(e,n,i,o,t,f){const a=e.map(u=>[u.min,u.max]),m=o||0,p=u=>u*m;function l(u,E){return typeof u=="string"?p(K(u)):u??E}const[c,P]=w.useState([]),y=w.useRef([]),[z,s]=w.useState(null),d=()=>i.map(p);return[u=>{P(d()),s({index:u,confirmed:!1})},(u,E)=>{var $;let I=null;if((!z||!z.confirmed)&&E!==0){if(E>0)I=u,s({index:u,confirmed:!0});else for(let h=u;h>=0;h-=1)if(c[h]>0&&n[h].resizable){I=h,s({index:h,confirmed:!0});break}}const C=($=I??(z==null?void 0:z.index))!==null&&$!==void 0?$:u,b=ze(c),M=C+1,D=l(a[C][0],0),j=l(a[M][0],0),V=l(a[C][1],m),H=l(a[M][1],m);let O=E;return b[C]+O<D&&(O=D-b[C]),b[M]-O<j&&(O=b[M]-j),b[C]+O>V&&(O=V-b[C]),b[M]-O>H&&(O=b[M]-H),b[C]+=O,b[M]-=O,t(b),b},()=>{s(null)},(u,E)=>{const $=d(),I=f?E==="start"?"end":"start":E,C=I==="start"?u:u+1,b=I==="start"?u+1:u,M=$[C],D=$[b];if(M!==0&&D!==0)$[C]=0,$[b]+=M,y.current[u]=M;else{const j=M+D,V=l(a[C][0],0),H=l(a[C][1],m),O=l(a[b][0],0),h=l(a[b][1],m),_=Math.max(V,j-h),X=(Math.min(H,j-O)-_)/2,R=y.current[u],B=j-R;R&&R<=h&&R>=O&&B<=H&&B>=V?($[b]=R,$[C]=B):($[C]-=X,$[b]+=X)}return t($),$},z==null?void 0:z.index]}function oe(e){return typeof e=="number"&&!Number.isNaN(e)?Math.round(e):0}const Ae=e=>{const{prefixCls:n,vertical:i,index:o,active:t,ariaNow:f,ariaMin:a,ariaMax:m,resizable:p,startCollapsible:l,endCollapsible:c,onOffsetStart:P,onOffsetUpdate:y,onOffsetEnd:z,onCollapse:s,lazy:d,containerSize:S}=e,r=`${n}-bar`,[g,T]=w.useState(null),[u,E]=w.useState(0),$=i?0:u,I=i?u:0,C=h=>{p&&h.currentTarget&&(T([h.pageX,h.pageY]),P(o))},b=h=>{if(p&&h.touches.length===1){const _=h.touches[0];T([_.pageX,_.pageY]),P(o)}},M=h=>{const _=S*f/100,A=_+h,X=Math.max(0,S*a/100),R=Math.min(S,S*m/100);return Math.max(X,Math.min(R,A))-_},D=Q((h,_)=>{const A=M(i?_:h);E(A)}),j=Q(()=>{y(o,$,I,!0),E(0)});v.useEffect(()=>{if(g){const h=R=>{const{pageX:B,pageY:U}=R,F=B-g[0],q=U-g[1];d?D(F,q):y(o,F,q)},_=()=>{d?j():z(),T(null)},A=R=>{if(R.touches.length===1){const B=R.touches[0],U=B.pageX-g[0],F=B.pageY-g[1];d?D(U,F):y(o,U,F)}},X=()=>{d&&j(),T(null),z()};return window.addEventListener("touchmove",A),window.addEventListener("touchend",X),window.addEventListener("mousemove",h),window.addEventListener("mouseup",_),()=>{window.removeEventListener("mousemove",h),window.removeEventListener("mouseup",_),window.removeEventListener("touchmove",A),window.removeEventListener("touchend",X)}}},[g,d,i,o,S,f,a,m]);const V={[`--${r}-preview-offset`]:`${u}px`},H=i?je:be,O=i?xe:we;return v.createElement("div",{className:r,role:"separator","aria-valuenow":oe(f),"aria-valuemin":oe(a),"aria-valuemax":oe(m)},d&&v.createElement("div",{className:Y(`${r}-preview`,{[`${r}-preview-active`]:!!u}),style:V}),v.createElement("div",{className:Y(`${r}-dragger`,{[`${r}-dragger-disabled`]:!p,[`${r}-dragger-active`]:t}),onMouseDown:C,onTouchStart:b}),l&&v.createElement("div",{className:Y(`${r}-collapse-bar`,`${r}-collapse-bar-start`),onClick:()=>s(o,"start")},v.createElement(H,{className:Y(`${r}-collapse-icon`,`${r}-collapse-start`)})),c&&v.createElement("div",{className:Y(`${r}-collapse-bar`,`${r}-collapse-bar-end`),onClick:()=>s(o,"end")},v.createElement(O,{className:Y(`${r}-collapse-icon`,`${r}-collapse-end`)})))},Xe=e=>{const{componentCls:n}=e;return{[`&-rtl${n}-horizontal`]:{[`> ${n}-bar`]:{[`${n}-bar-collapse-previous`]:{insetInlineEnd:0,insetInlineStart:"unset"},[`${n}-bar-collapse-next`]:{insetInlineEnd:"unset",insetInlineStart:0}}},[`&-rtl${n}-vertical`]:{[`> ${n}-bar`]:{[`${n}-bar-collapse-previous`]:{insetInlineEnd:"50%",insetInlineStart:"unset"},[`${n}-bar-collapse-next`]:{insetInlineEnd:"50%",insetInlineStart:"unset"}}}}},J={position:"absolute",top:"50%",left:{_skip_check_:!0,value:"50%"},transform:"translate(-50%, -50%)"},Ye=e=>{const{componentCls:n,colorFill:i,splitBarDraggableSize:o,splitBarSize:t,splitTriggerSize:f,controlItemBgHover:a,controlItemBgActive:m,controlItemBgActiveHover:p,prefixCls:l}=e,c=`${n}-bar`,P=`${n}-mask`,y=`${n}-panel`,z=e.calc(f).div(2).equal(),s=`${l}-bar-preview-offset`,d={position:"absolute",background:e.colorPrimary,opacity:.2,pointerEvents:"none",transition:"none",zIndex:1,display:"none"};return{[n]:Object.assign(Object.assign(Object.assign({},ye(e)),{display:"flex",width:"100%",height:"100%",alignItems:"stretch",[`> ${c}`]:{flex:"none",position:"relative",userSelect:"none",[`${c}-dragger`]:Object.assign(Object.assign({},J),{zIndex:1,"&::before":Object.assign({content:'""',background:a},J),"&::after":Object.assign({content:'""',background:i},J),[`&:hover:not(${c}-dragger-active)`]:{"&::before":{background:m}},"&-active":{zIndex:2,"&::before":{background:p}},[`&-disabled${c}-dragger`]:{zIndex:0,"&, &:hover, &-active":{cursor:"default","&::before":{background:a}},"&::after":{display:"none"}}}),[`${c}-collapse-bar`]:Object.assign(Object.assign({},J),{zIndex:e.zIndexPopupBase,background:a,fontSize:e.fontSizeSM,borderRadius:e.borderRadiusXS,color:e.colorText,cursor:"pointer",opacity:0,display:"flex",alignItems:"center",justifyContent:"center","@media(hover:none)":{opacity:1},"&:hover":{background:m},"&:active":{background:p}}),"&:hover, &:active":{[`${c}-collapse-bar`]:{opacity:1}}},[P]:{position:"fixed",zIndex:e.zIndexPopupBase,inset:0,"&-horizontal":{cursor:"col-resize"},"&-vertical":{cursor:"row-resize"}},"&-horizontal":{flexDirection:"row",[`> ${c}`]:{width:0,[`${c}-preview`]:Object.assign(Object.assign({height:"100%",width:t},d),{[`&${c}-preview-active`]:{display:"block",transform:`translateX(var(--${s}))`}}),[`${c}-dragger`]:{cursor:"col-resize",height:"100%",width:f,"&::before":{height:"100%",width:t},"&::after":{height:o,width:t}},[`${c}-collapse-bar`]:{width:e.fontSizeSM,height:e.controlHeightSM,"&-start":{left:{_skip_check_:!0,value:"auto"},right:{_skip_check_:!0,value:z},transform:"translateY(-50%)"},"&-end":{left:{_skip_check_:!0,value:z},right:{_skip_check_:!0,value:"auto"},transform:"translateY(-50%)"}}}},"&-vertical":{flexDirection:"column",[`> ${c}`]:{height:0,[`${c}-preview`]:Object.assign(Object.assign({height:t,width:"100%"},d),{[`&${c}-preview-active`]:{display:"block",transform:`translateY(var(--${s}))`}}),[`${c}-dragger`]:{cursor:"row-resize",width:"100%",height:f,"&::before":{width:"100%",height:t},"&::after":{width:o,height:t}},[`${c}-collapse-bar`]:{height:e.fontSizeSM,width:e.controlHeightSM,"&-start":{top:"auto",bottom:z,transform:"translateX(-50%)"},"&-end":{top:z,bottom:"auto",transform:"translateX(-50%)"}}}},[y]:{overflow:"auto",padding:"0 1px",scrollbarWidth:"thin",boxSizing:"border-box","&-hidden":{padding:0,overflow:"hidden"},[`&:has(${n}:only-child)`]:{overflow:"hidden"}}}),Xe(e))}},Ue=e=>{var n;const i=e.splitBarSize||2,o=e.splitTriggerSize||6,t=e.resizeSpinnerSize||20,f=(n=e.splitBarDraggableSize)!==null&&n!==void 0?n:t;return{splitBarSize:i,splitTriggerSize:o,splitBarDraggableSize:f,resizeSpinnerSize:t}},Ge=Ce("Splitter",e=>[Ye(e)],Ue),Fe=e=>{const{prefixCls:n,className:i,style:o,layout:t="horizontal",children:f,rootClassName:a,onResizeStart:m,onResize:p,onResizeEnd:l,lazy:c}=e,{getPrefixCls:P,direction:y,className:z,style:s}=$e("splitter"),d=P("splitter",n),S=Oe(d),[r,g,T]=Ge(d,S),u=t==="vertical",E=y==="rtl",$=!u&&E,I=Be(f),[C,b]=w.useState(),M=k=>{const{offsetWidth:x,offsetHeight:L}=k,G=u?L:x;G!==0&&b(G)},[D,j,V,H,O,h]=De(I,C),_=Te(I,j,E),[A,X,R,B,U]=He(I,_,V,C,h,E),F=Q(k=>{A(k),m==null||m(j)}),q=Q((k,x,L)=>{const G=X(k,x);L?l==null||l(G):p==null||p(G)}),ae=Q(()=>{R(),l==null||l(j)}),ie=Q((k,x)=>{const L=B(k,x);p==null||p(L),l==null||l(L)}),le=Y(d,i,`${d}-${t}`,{[`${d}-rtl`]:E},a,z,T,S,g),re=`${d}-mask`,W=v.useMemo(()=>{const k=[];let x=0;for(let L=0;L<I.length;L+=1)x+=V[L],k.push(x);return k},[V]),ce=Object.assign(Object.assign({},s),o);return r(v.createElement(Ee,{onResize:M},v.createElement("div",{style:ce,className:le},I.map((k,x)=>{const L=v.createElement(Ne,Object.assign({},k,{prefixCls:d,size:D[x]}));let G=null;const Z=_[x];if(Z){const ue=(W[x-1]||0)+H[x],de=(W[x+1]||100)-O[x+1],pe=(W[x-1]||0)+O[x],fe=(W[x+1]||100)-H[x+1];G=v.createElement(Ae,{lazy:c,index:x,active:U===x,prefixCls:d,vertical:u,resizable:Z.resizable,ariaNow:W[x]*100,ariaMin:Math.max(ue,de)*100,ariaMax:Math.min(pe,fe)*100,startCollapsible:Z.startCollapsible,endCollapsible:Z.endCollapsible,onOffsetStart:F,onOffsetUpdate:(me,ge,he,ve)=>{let ne=u?he:ge;$&&(ne=-ne),q(me,ne,ve)},onOffsetEnd:ae,onCollapse:ie,containerSize:C||0})}return v.createElement(v.Fragment,{key:`split-panel-${x}`},L,G)}),typeof U=="number"&&v.createElement("div",{"aria-hidden":!0,className:Y(re,`${re}-${t}`)}))))},ee=Fe;ee.Panel=ke;const Qe=w.lazy(()=>te(()=>import("./chat-DGXCpFrG.js"),__vite__mapDeps([0,1,2,3,4,5,6]),import.meta.url)),We=w.lazy(()=>te(()=>import("./index-5DUd3ktU.js"),__vite__mapDeps([7,1,2,4,5,6,8,9,10,11,12,13,14,15,16,17,18]),import.meta.url)),qe=w.lazy(()=>te(()=>import("./relation-CL0tpzTP.js"),__vite__mapDeps([19,1,2,4,5,6,18,13,14,15,12,16,10,17]),import.meta.url)),Ze=w.lazy(()=>te(()=>import("./data-filter-w5IoB1KU.js"),__vite__mapDeps([20,1,2,4,5,6,16,10,3]),import.meta.url)),Je=[{key:"chat",label:"聊天窗口",component:Qe},{key:"details",label:"详情",component:We},{key:"relation",label:"关系",component:qe},{key:"dataFilter",label:"数据筛选",component:Ze}],Ke=({graphOpt:e,height:n,data:i,queryParams:o,view:t,close:f})=>{if(!t)return N.jsx("div",{onClick:f,children:"未知类型"});const a=Je.find(c=>c.key===t);if(!a)return N.jsx("div",{children:"未知类型"});const{component:m,key:p,...l}=a;return N.jsx(w.Suspense,{fallback:N.jsx(Ie,{active:!0}),children:N.jsx(m,{close:f,data:i,queryParams:o,...l,height:n,graphOpt:e})})},{Option:pt}=Pe,{Search:ft}=_e,mt=()=>{const[e,n]=v.useState(["100%","0%"]),[i,o]=w.useState(null),[t,f]=w.useState(),a=w.useRef(null),[m,p]=w.useState({}),l=w.useRef(null),[c,P]=w.useState(null),y=()=>{if(l.current){const r=l.current.getBoundingClientRect().top;P(window.innerHeight-r)}},z=()=>{a.current&&a.current.reload()},s=()=>{a.current&&a.current.cancelSelectLink()},d=()=>{a.current&&a.current.cancelSelectNode()},S=(r,g)=>{a.current&&a.current.updateQueryParam(r,g)};return w.useEffect(()=>(y(),window.addEventListener("resize",y),()=>{window.removeEventListener("resize",y)}),[]),N.jsx("div",{style:{padding:"1rem 1rem 0 1rem  "},children:N.jsx("div",{ref:l,children:N.jsx(Me,{theme:{components:{Splitter:{splitBarSize:5,splitTriggerSize:30}}},children:N.jsxs(ee,{onResize:n,children:[N.jsx(ee.Panel,{size:e[0],min:"20%",style:{paddingRight:`${i?"0.5rem":"0"}`},children:N.jsx(Re,{ref:a,height:c,updateQueryParams:p,openView:(r,g)=>{o(r),n(["70%","30%"]),g&&f(g)},activeView:i})}),i&&N.jsx(ee.Panel,{size:e[1],min:"20%",style:{paddingLeft:`${i?"0.5rem":"0"}`},children:N.jsx(Ke,{graphOpt:{loadGraph:z,updateQueryParam:S,cancelSelectLink:s,cancelSelectNode:d},queryParams:m,height:c,data:t,view:i,close:()=>{o(null),f(null),n(["100%","0%"]),s(),d()}})})]})})})})};export{mt as default};
