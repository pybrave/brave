import{r as a,d as g,f as y,j as e,b as S,C as u,E as f,g as C,B as R,a as A,V as E}from"./main-DWRmJItp.js";import{d as F}from"./index-Boe5_PAQ.js";import{C as j}from"./index-CIC2lPJU.js";import{T as w}from"./Table-CorKTwZX.js";import"./index-CELUfxGL.js";import"./index-CD0H_sEz.js";import"./addEventListener-BBJtVQmZ.js";import"./index-BEHP9AIO.js";import"./index-buf9Du1j.js";import"./UpOutlined-B9ArEpXu.js";import"./index-C6NESaM6.js";import"./index-CJtHLx1t.js";import"./index-BL5qaRD0.js";import"./Dropdown-CRhi--nO.js";import"./index-CRfZL3ek.js";import"./callSuper-Cn0arcAG.js";const H=()=>{const[m,i]=a.useState(!1),{project:c,projectObj:r}=g(),[n,p]=a.useState(),[t,d]=a.useState();a.useRef(null),y();const x=async()=>{var l,o,h;i(!0);let s=await A.post("/list-analysis-tree",{is_report:!0,project:c});p(s.data),s.data.length>0&&(l=s.data[0])!=null&&l.children&&((o=s.data[0])==null?void 0:o.children.length)>0&&d((h=s.data[0])==null?void 0:h.children[0]),i(!1)};return a.useEffect(()=>{x()},[c]),e.jsx("div",{style:{maxWidth:"1500px",margin:"0 auto"},children:e.jsxs(S,{children:[e.jsx(u,{lg:6,sm:6,xs:24,children:e.jsx(j,{loading:m,title:r==null?void 0:r.project_name,size:"small",extra:e.jsx(C,{gap:"small",children:e.jsx(R,{size:"small",color:"cyan",variant:"solid",onClick:x,children:"刷新"})}),children:Array.isArray(n)&&n.length!=0?e.jsx(e.Fragment,{children:e.jsx(k,{onSelect:s=>{var l,o;((l=s.node)==null?void 0:l.type)=="analysis"?d(s.node):((o=s.node)==null?void 0:o.type)=="components"&&console.log(s.node)},defaultSelectKey:t==null?void 0:t.key,treeData:n})}):e.jsx(e.Fragment,{children:e.jsx(f,{})})})}),e.jsx(u,{lg:18,sm:18,xs:24,style:{paddingLeft:"1rem"},children:t?e.jsx(e.Fragment,{children:e.jsx(F,{cancalReportCallback:()=>{x()},analysis_id:t==null?void 0:t.key})}):e.jsx(e.Fragment,{children:e.jsx(j,{size:"small",children:e.jsx(f,{})})})})]})})},k=({treeData:m,defaultSelectKey:i,onSelect:c})=>{const[r,n]=a.useState(i),p=(t,d)=>{t.length>0&&(c(d),n(t[0]))};return e.jsx(e.Fragment,{children:e.jsx(w,{selectedKeys:[r],showLine:!0,switcherIcon:e.jsx(E,{}),defaultExpandAll:!0,onSelect:p,treeData:m})})};export{H as default};
