const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["./chat-CRfjKxKm.js","./main-Bw4HDwdl.js","./main-DLoYsyAm.css","./ClearOutlined-Dh_EfmYn.js","./index-B-qvGi8z.js","./index-ClFmFDqn.js","./Dropdown-bzLw1xrE.js","./index-BWsnVbqy.js","./Table-Nj5nWv8r.js","./addEventListener-DD_5BdRR.js","./index-AJ8DPt0q.js","./index-DBlA5EvI.js","./index-Edtf3g26.js","./usePagination-BdZ1KYmS.js","./index-Ch4DwbeY.js","./index-DCK1FHNl.js","./DeleteOutlined-tPH7L5Yp.js","./relation-DnV5WA7T.js","./data-filter-D2vaSUM9.js","./association-page-CQNuWLBm.js"])))=>i.map(i=>d[i]);
import{r as x,O as Y,R as S,a3 as Se,N as ze,H as Q,aE as be,V as xe,aD as Ce,Z as we,a0 as ye,a5 as $e,aF as Me,aK as Oe,j,t as Ee,aL as q,p as Ie,aM as Pe,S as _e,I as Re}from"./main-Bw4HDwdl.js";import je from"./graph-view-BxwqRE5_.js";import{A as Ne}from"./index-DBlA5EvI.js";import{R as ke}from"./UpOutlined-434SDq_h.js";import"./index-B-qvGi8z.js";import"./index-ClFmFDqn.js";import"./Dropdown-bzLw1xrE.js";import"./index-AJ8DPt0q.js";import"./index-Edtf3g26.js";import"./Table-Nj5nWv8r.js";import"./addEventListener-DD_5BdRR.js";import"./NodeIndexOutlined-DFywQg7_.js";import"./index-DCK1FHNl.js";import"./usePagination-BdZ1KYmS.js";import"./index-Ch4DwbeY.js";const Le=x.forwardRef((e,n)=>{const{prefixCls:a,className:o,children:t,size:m,style:i={}}=e,u=Y(`${a}-panel`,{[`${a}-panel-hidden`]:m===0},o),p=m!==void 0;return S.createElement("div",{ref:n,className:u,style:Object.assign(Object.assign({},i),{flexBasis:p?m:"auto",flexGrow:p?0:1})},t)}),Ve=()=>null;var Be=function(e,n){var a={};for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&n.indexOf(o)<0&&(a[o]=e[o]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var t=0,o=Object.getOwnPropertySymbols(e);t<o.length;t++)n.indexOf(o[t])<0&&Object.prototype.propertyIsEnumerable.call(e,o[t])&&(a[o[t]]=e[o[t]]);return a};function Te(e){if(e&&typeof e=="object")return e;const n=!!e;return{start:n,end:n}}function Ae(e){return x.useMemo(()=>Se(e).filter(x.isValidElement).map(a=>{const{props:o}=a,{collapsible:t}=o,m=Be(o,["collapsible"]);return Object.assign(Object.assign({},m),{collapsible:Te(t)})}),[e])}function De(e,n,a){return x.useMemo(()=>{const o=[];for(let t=0;t<e.length-1;t+=1){const m=e[t],i=e[t+1],u=n[t],p=n[t+1],{resizable:f=!0,min:c,collapsible:M}=m,{resizable:I=!0,min:C,collapsible:s}=i,d=f&&I&&(u!==0||!c)&&(p!==0||!C),z=M.end&&u>0||s.start&&p===0&&u>0,r=s.start&&p>0||M.end&&u===0&&p>0;o[t]={resizable:d,startCollapsible:!!(a?r:z),endCollapsible:!!(a?z:r)}}return o},[n,e])}function ee(e){return Number(e.slice(0,-1))/100}function se(e){return typeof e=="string"&&e.endsWith("%")}function He(e,n){const a=e.map(s=>s.size),o=e.length,t=n||0,m=s=>s*t,[i,u]=S.useState(()=>e.map(s=>s.defaultSize)),p=S.useMemo(()=>{var s;const d=[];for(let z=0;z<o;z+=1)d[z]=(s=a[z])!==null&&s!==void 0?s:i[z];return d},[o,i,a]),f=S.useMemo(()=>{let s=[],d=0;for(let r=0;r<o;r+=1){const h=p[r];if(se(h))s[r]=ee(h);else if(h||h===0){const N=Number(h);Number.isNaN(N)||(s[r]=N/t)}else d+=1,s[r]=void 0}const z=s.reduce((r,h)=>r+(h||0),0);if(z>1||!d){const r=1/z;s=s.map(h=>h===void 0?0:h*r)}else{const r=(1-z)/d;s=s.map(h=>h===void 0?r:h)}return s},[p,t]),c=S.useMemo(()=>f.map(m),[f,t]),M=S.useMemo(()=>e.map(s=>se(s.min)?ee(s.min):(s.min||0)/t),[e,t]),I=S.useMemo(()=>e.map(s=>se(s.max)?ee(s.max):(s.max||t)/t),[e,t]);return[S.useMemo(()=>n?c:p,[c,n]),c,f,M,I,u]}function Xe(e,n,a,o,t,m){const i=e.map(l=>[l.min,l.max]),u=o||0,p=l=>l*u;function f(l,O){return typeof l=="string"?p(ee(l)):l??O}const[c,M]=x.useState([]),I=x.useRef([]),[C,s]=x.useState(null),d=()=>a.map(p);return[l=>{M(d()),s({index:l,confirmed:!1})},(l,O)=>{var g;let b=null;if((!C||!C.confirmed)&&O!==0){if(O>0)b=l,s({index:l,confirmed:!0});else for(let v=l;v>=0;v-=1)if(c[v]>0&&n[v].resizable){b=v,s({index:v,confirmed:!0});break}}const $=(g=b??(C==null?void 0:C.index))!==null&&g!==void 0?g:l,w=ze(c),P=$+1,A=f(i[$][0],0),k=f(i[P][0],0),B=f(i[$][1],u),D=f(i[P][1],u);let E=O;return w[$]+E<A&&(E=A-w[$]),w[P]-E<k&&(E=w[P]-k),w[$]+E>B&&(E=B-w[$]),w[P]-E>D&&(E=w[P]-D),w[$]+=E,w[P]-=E,t(w),w},()=>{s(null)},(l,O)=>{const g=d(),b=m?O==="start"?"end":"start":O,$=b==="start"?l:l+1,w=b==="start"?l+1:l,P=g[$],A=g[w];if(P!==0&&A!==0)g[$]=0,g[w]+=P,I.current[l]=P;else{const k=P+A,B=f(i[$][0],0),D=f(i[$][1],u),E=f(i[w][0],0),v=f(i[w][1],u),_=Math.max(B,k-v),X=(Math.min(D,k-E)-_)/2,R=I.current[l],T=k-R;R&&R<=v&&R>=E&&T<=D&&T>=B?(g[w]=R,g[$]=T):(g[$]-=X,g[w]+=X)}return t(g),g},C==null?void 0:C.index]}function oe(e){return typeof e=="number"&&!Number.isNaN(e)?Math.round(e):0}const Ye=e=>{const{prefixCls:n,vertical:a,index:o,active:t,ariaNow:m,ariaMin:i,ariaMax:u,resizable:p,startCollapsible:f,endCollapsible:c,onOffsetStart:M,onOffsetUpdate:I,onOffsetEnd:C,onCollapse:s,lazy:d,containerSize:z}=e,r=`${n}-bar`,[h,N]=x.useState(null),[l,O]=x.useState(0),g=a?0:l,b=a?l:0,$=v=>{p&&v.currentTarget&&(N([v.pageX,v.pageY]),M(o))},w=v=>{if(p&&v.touches.length===1){const _=v.touches[0];N([_.pageX,_.pageY]),M(o)}},P=v=>{const _=z*m/100,H=_+v,X=Math.max(0,z*i/100),R=Math.min(z,z*u/100);return Math.max(X,Math.min(R,H))-_},A=Q((v,_)=>{const H=P(a?_:v);O(H)}),k=Q(()=>{I(o,g,b,!0),O(0)});S.useEffect(()=>{if(h){const v=R=>{const{pageX:T,pageY:U}=R,G=T-h[0],K=U-h[1];d?A(G,K):I(o,G,K)},_=()=>{d?k():C(),N(null)},H=R=>{if(R.touches.length===1){const T=R.touches[0],U=T.pageX-h[0],G=T.pageY-h[1];d?A(U,G):I(o,U,G)}},X=()=>{d&&k(),N(null),C()};return window.addEventListener("touchmove",H),window.addEventListener("touchend",X),window.addEventListener("mousemove",v),window.addEventListener("mouseup",_),()=>{window.removeEventListener("mousemove",v),window.removeEventListener("mouseup",_),window.removeEventListener("touchmove",H),window.removeEventListener("touchend",X)}}},[h,d,a,o,z,m,i,u]);const B={[`--${r}-preview-offset`]:`${l}px`},D=a?ke:be,E=a?xe:Ce;return S.createElement("div",{className:r,role:"separator","aria-valuenow":oe(m),"aria-valuemin":oe(i),"aria-valuemax":oe(u)},d&&S.createElement("div",{className:Y(`${r}-preview`,{[`${r}-preview-active`]:!!l}),style:B}),S.createElement("div",{className:Y(`${r}-dragger`,{[`${r}-dragger-disabled`]:!p,[`${r}-dragger-active`]:t}),onMouseDown:$,onTouchStart:w}),f&&S.createElement("div",{className:Y(`${r}-collapse-bar`,`${r}-collapse-bar-start`),onClick:()=>s(o,"start")},S.createElement(D,{className:Y(`${r}-collapse-icon`,`${r}-collapse-start`)})),c&&S.createElement("div",{className:Y(`${r}-collapse-bar`,`${r}-collapse-bar-end`),onClick:()=>s(o,"end")},S.createElement(E,{className:Y(`${r}-collapse-icon`,`${r}-collapse-end`)})))},Ue=e=>{const{componentCls:n}=e;return{[`&-rtl${n}-horizontal`]:{[`> ${n}-bar`]:{[`${n}-bar-collapse-previous`]:{insetInlineEnd:0,insetInlineStart:"unset"},[`${n}-bar-collapse-next`]:{insetInlineEnd:"unset",insetInlineStart:0}}},[`&-rtl${n}-vertical`]:{[`> ${n}-bar`]:{[`${n}-bar-collapse-previous`]:{insetInlineEnd:"50%",insetInlineStart:"unset"},[`${n}-bar-collapse-next`]:{insetInlineEnd:"50%",insetInlineStart:"unset"}}}}},J={position:"absolute",top:"50%",left:{_skip_check_:!0,value:"50%"},transform:"translate(-50%, -50%)"},Fe=e=>{const{componentCls:n,colorFill:a,splitBarDraggableSize:o,splitBarSize:t,splitTriggerSize:m,controlItemBgHover:i,controlItemBgActive:u,controlItemBgActiveHover:p,prefixCls:f}=e,c=`${n}-bar`,M=`${n}-mask`,I=`${n}-panel`,C=e.calc(m).div(2).equal(),s=`${f}-bar-preview-offset`,d={position:"absolute",background:e.colorPrimary,opacity:.2,pointerEvents:"none",transition:"none",zIndex:1,display:"none"};return{[n]:Object.assign(Object.assign(Object.assign({},ye(e)),{display:"flex",width:"100%",height:"100%",alignItems:"stretch",[`> ${c}`]:{flex:"none",position:"relative",userSelect:"none",[`${c}-dragger`]:Object.assign(Object.assign({},J),{zIndex:1,"&::before":Object.assign({content:'""',background:i},J),"&::after":Object.assign({content:'""',background:a},J),[`&:hover:not(${c}-dragger-active)`]:{"&::before":{background:u}},"&-active":{zIndex:2,"&::before":{background:p}},[`&-disabled${c}-dragger`]:{zIndex:0,"&, &:hover, &-active":{cursor:"default","&::before":{background:i}},"&::after":{display:"none"}}}),[`${c}-collapse-bar`]:Object.assign(Object.assign({},J),{zIndex:e.zIndexPopupBase,background:i,fontSize:e.fontSizeSM,borderRadius:e.borderRadiusXS,color:e.colorText,cursor:"pointer",opacity:0,display:"flex",alignItems:"center",justifyContent:"center","@media(hover:none)":{opacity:1},"&:hover":{background:u},"&:active":{background:p}}),"&:hover, &:active":{[`${c}-collapse-bar`]:{opacity:1}}},[M]:{position:"fixed",zIndex:e.zIndexPopupBase,inset:0,"&-horizontal":{cursor:"col-resize"},"&-vertical":{cursor:"row-resize"}},"&-horizontal":{flexDirection:"row",[`> ${c}`]:{width:0,[`${c}-preview`]:Object.assign(Object.assign({height:"100%",width:t},d),{[`&${c}-preview-active`]:{display:"block",transform:`translateX(var(--${s}))`}}),[`${c}-dragger`]:{cursor:"col-resize",height:"100%",width:m,"&::before":{height:"100%",width:t},"&::after":{height:o,width:t}},[`${c}-collapse-bar`]:{width:e.fontSizeSM,height:e.controlHeightSM,"&-start":{left:{_skip_check_:!0,value:"auto"},right:{_skip_check_:!0,value:C},transform:"translateY(-50%)"},"&-end":{left:{_skip_check_:!0,value:C},right:{_skip_check_:!0,value:"auto"},transform:"translateY(-50%)"}}}},"&-vertical":{flexDirection:"column",[`> ${c}`]:{height:0,[`${c}-preview`]:Object.assign(Object.assign({height:t,width:"100%"},d),{[`&${c}-preview-active`]:{display:"block",transform:`translateY(var(--${s}))`}}),[`${c}-dragger`]:{cursor:"row-resize",width:"100%",height:m,"&::before":{width:"100%",height:t},"&::after":{width:o,height:t}},[`${c}-collapse-bar`]:{height:e.fontSizeSM,width:e.controlHeightSM,"&-start":{top:"auto",bottom:C,transform:"translateX(-50%)"},"&-end":{top:C,bottom:"auto",transform:"translateX(-50%)"}}}},[I]:{overflow:"auto",padding:"0 1px",scrollbarWidth:"thin",boxSizing:"border-box","&-hidden":{padding:0,overflow:"hidden"},[`&:has(${n}:only-child)`]:{overflow:"hidden"}}}),Ue(e))}},Ge=e=>{var n;const a=e.splitBarSize||2,o=e.splitTriggerSize||6,t=e.resizeSpinnerSize||20,m=(n=e.splitBarDraggableSize)!==null&&n!==void 0?n:t;return{splitBarSize:a,splitTriggerSize:o,splitBarDraggableSize:m,resizeSpinnerSize:t}},Qe=we("Splitter",e=>[Fe(e)],Ge),We=e=>{const{prefixCls:n,className:a,style:o,layout:t="horizontal",children:m,rootClassName:i,onResizeStart:u,onResize:p,onResizeEnd:f,lazy:c}=e,{getPrefixCls:M,direction:I,className:C,style:s}=$e("splitter"),d=M("splitter",n),z=Me(d),[r,h,N]=Qe(d,z),l=t==="vertical",O=I==="rtl",g=!l&&O,b=Ae(m),[$,w]=x.useState(),P=L=>{const{offsetWidth:y,offsetHeight:V}=L,F=l?V:y;F!==0&&w(F)},[A,k,B,D,E,v]=He(b,$),_=De(b,k,O),[H,X,R,T,U]=Xe(b,_,B,$,v,O),G=Q(L=>{H(L),u==null||u(k)}),K=Q((L,y,V)=>{const F=X(L,y);V?f==null||f(F):p==null||p(F)}),ae=Q(()=>{R(),f==null||f(k)}),ie=Q((L,y)=>{const V=T(L,y);p==null||p(V),f==null||f(V)}),le=Y(d,a,`${d}-${t}`,{[`${d}-rtl`]:O},i,C,N,z,h),re=`${d}-mask`,W=S.useMemo(()=>{const L=[];let y=0;for(let V=0;V<b.length;V+=1)y+=B[V],L.push(y);return L},[B]),ce=Object.assign(Object.assign({},s),o);return r(S.createElement(Oe,{onResize:P},S.createElement("div",{style:ce,className:le},b.map((L,y)=>{const V=S.createElement(Le,Object.assign({},L,{prefixCls:d,size:A[y]}));let F=null;const Z=_[y];if(Z){const de=(W[y-1]||0)+D[y],ue=(W[y+1]||100)-E[y+1],pe=(W[y-1]||0)+E[y],fe=(W[y+1]||100)-D[y+1];F=S.createElement(Ye,{lazy:c,index:y,active:U===y,prefixCls:d,vertical:l,resizable:Z.resizable,ariaNow:W[y]*100,ariaMin:Math.max(de,ue)*100,ariaMax:Math.min(pe,fe)*100,startCollapsible:Z.startCollapsible,endCollapsible:Z.endCollapsible,onOffsetStart:G,onOffsetUpdate:(me,ge,he,ve)=>{let ne=l?he:ge;g&&(ne=-ne),K(me,ne,ve)},onOffsetEnd:ae,onCollapse:ie,containerSize:$||0})}return S.createElement(S.Fragment,{key:`split-panel-${y}`},V,F)}),typeof U=="number"&&S.createElement("div",{"aria-hidden":!0,className:Y(re,`${re}-${t}`)}))))},te=We;te.Panel=Ve;const qe=x.lazy(()=>q(()=>import("./chat-CRfjKxKm.js"),__vite__mapDeps([0,1,2,3,4,5,6]),import.meta.url)),Ke=x.lazy(()=>q(()=>import("./index-BWsnVbqy.js"),__vite__mapDeps([7,1,2,4,5,6,8,9,10,11,12,13,14,15,16]),import.meta.url)),Ze=x.lazy(()=>q(()=>import("./relation-DnV5WA7T.js"),__vite__mapDeps([17,1,2,4,5,6,16,11,12,13,8,9,10,14,15]),import.meta.url)),Je=x.lazy(()=>q(()=>import("./data-filter-D2vaSUM9.js"),__vite__mapDeps([18,1,2,4,5,6,12,8,9,10,3]),import.meta.url)),et=x.lazy(()=>q(()=>import("./association-page-CQNuWLBm.js"),__vite__mapDeps([19,1,2,11,12,13,8,9,6,10,14,5,15]),import.meta.url)),tt=[{key:"chat",label:"ai chat",component:qe},{key:"details",label:"details",component:Ke},{key:"relation",label:"relationship",component:Ze},{key:"dataFilter",label:"data screening",component:Je},{key:"associationPage",label:"data screening",component:et}],nt=({graphOpt:e,height:n,data:a,queryParams:o,view:t,close:m,ref:i})=>{if(!t)return j.jsx("div",{onClick:m,children:"未知类型"});const u=tt.find(M=>M.key===t);if(!u)return j.jsx("div",{children:"未知类型"});const{component:p,key:f,...c}=u;return j.jsx(x.Suspense,{fallback:j.jsx(Ee,{active:!0}),children:j.jsx(p,{close:m,data:a,queryParams:o,...c,height:n,graphOpt:e,ref:i})})},st=je,{Option:zt}=_e,{Search:bt}=Re,xt=()=>{const[e,n]=S.useState(["100%","0%"]),[a,o]=x.useState(null),[t,m]=x.useState(),i=x.useRef(null),u=x.useRef(null),[p,f]=x.useState({}),{modal:c,openModal:M,closeModal:I}=Ie(),C=()=>{var g,b;(g=u.current)!=null&&g.reload&&((b=u.current)==null||b.reload())},s=x.useRef(null),[d,z]=x.useState(null),r=()=>{if(s.current){const g=s.current.getBoundingClientRect().top;z(window.innerHeight-g)}},h=()=>{i.current&&i.current.reload()},N=()=>{i.current&&i.current.cancelSelectLink()},l=()=>{i.current&&i.current.cancelSelectNode()},O=(g,b)=>{i.current&&i.current.updateQueryParam(g,b)};return x.useEffect(()=>(r(),window.addEventListener("resize",r),()=>{window.removeEventListener("resize",r)}),[]),j.jsx("div",{style:{padding:"1rem 1rem 0 1rem  "},children:j.jsxs("div",{ref:s,children:[j.jsx(Pe,{theme:{components:{Splitter:{splitBarSize:5,splitTriggerSize:30}}},children:j.jsxs(te,{onResize:n,children:[j.jsx(te.Panel,{size:e[0],min:"20%",style:{paddingRight:`${a?"0.5rem":"0"}`},children:j.jsx(st,{ref:i,height:d,openGlobalModal:M,updateQueryParams:f,openView:(g,b)=>{o(g),n(["70%","30%"]),b&&m(b)},activeView:a})}),a&&j.jsx(te.Panel,{size:e[1],min:"20%",style:{paddingLeft:`${a?"0.5rem":"0"}`},children:j.jsx(nt,{ref:u,graphOpt:{loadGraph:h,openModal:M,updateQueryParam:O,cancelSelectLink:N,cancelSelectNode:l},queryParams:p,height:d,data:t,view:a,close:()=>{o(null),m(null),n(["100%","0%"]),N(),l()}})})]})}),j.jsx(Ne,{callback:()=>{C(),h()},visible:c.key=="optModal"&&c.visible,params:c.params,onClose:I})]})})};export{xt as default};
