import{r as a,j as r,g as S,B as u,P as k,b as x,C as p,c as T,E as v,a as y}from"./index-CWx5cHtj.js";import{c as E}from"./utils-D2B0dIuM.js";import{S as P}from"./index-BAlUq73q.js";import{C as L}from"./index-BhpvB4Wv.js";import{I as R}from"./index-C2mCFbpg.js";import{T as _}from"./index-Cd94iWUf.js";import{P as z}from"./Pagination-DILAiJSE.js";import"./index-BgXoXwrY.js";import"./addEventListener-DnVv1X44.js";const{Title:A,Text:$,Paragraph:j}=T,q=({params:o})=>{const[n,c]=a.useState([]),[i,t]=a.useState(0),[e,f]=a.useState(1),[w,l]=a.useState(!1),g=6,d=async()=>{l(!0);const s=await y.post("/literature",{...o,page_number:e,page_size:g});l(!1),c(s.data.items),t(s.data.total)},b=async()=>{l(!0),await y.post("/literature/import"),d(),l(!1)};return a.useEffect(()=>{d()},[e,JSON.stringify(o)]),r.jsxs(r.Fragment,{children:[r.jsxs(S,{justify:"flex-end",gap:"small",children:[r.jsx(u,{color:"cyan",variant:"solid",onClick:d,children:"刷新"}),r.jsx(k,{title:"Are you sure to import literature?",onConfirm:b,children:r.jsx(u,{color:"cyan",variant:"solid",children:"导入"})})]}),r.jsxs("div",{style:{maxWidth:"1000px",margin:"1rem auto"},children:[r.jsx(P,{spinning:w,children:i!=0?r.jsx(x,{gutter:[16,16],children:n.map(s=>r.jsx(p,{span:24,children:r.jsx(L,{styles:{body:{padding:12}},hoverable:!0,style:{borderRadius:12},children:r.jsxs(x,{gutter:16,children:[s.img&&r.jsx(p,{span:6,children:s.img&&r.jsx(R,{src:s.img,alt:"literature",style:{width:"100%",objectFit:"cover",borderRadius:8}})}),r.jsxs(p,{span:s.img?18:24,children:[r.jsxs(A,{level:5,style:{marginBottom:4,marginTop:0},children:[r.jsx("span",{style:{display:"block",color:"gray",fontSize:"0.5rem"},children:s.literature_key}),"期刊 ",s.journal||"未知"," 时间 ",s.publish_date||"-",r.jsx("a",{href:s.url,target:"_blank",children:"来源"})]}),r.jsx(j,{style:{marginBottom:8},children:m(s.content||"",s.keywords||[])}),r.jsx(j,{children:m(s.translate||"",s.keywords||[])}),s.keywords&&Array.isArray(s.keywords)&&s.keywords.map((C,h)=>r.jsx(_,{color:E[h],children:C},h))]})]})})},s.id))}):r.jsx(v,{description:"暂无相关资料!"})}),i!=0&&r.jsx("div",{style:{textAlign:"center",marginTop:24},children:r.jsx(z,{current:e,pageSize:g,total:i,onChange:s=>f(s),showSizeChanger:!1})})]})]})};function m(o,n){const c=n.map(t=>t.toLowerCase());return o.split(new RegExp(`(${n.join("|")})`,"gi")).map((t,e)=>c.includes(t.toLowerCase())?r.jsx("span",{style:{color:"red",fontWeight:600},children:t},e):t)}export{q as default};
