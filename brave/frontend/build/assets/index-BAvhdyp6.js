const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["./chat-j4NJQdo8.js","./main-B2jPVJuc.js","./main-PWR3lu3V.css","./ClearOutlined-Bk43DwsA.js","./index-01a6DBbv.js","./index-bd5EV77p.js","./Dropdown-DxVuU2Kw.js","./index-NMNIwub9.js","./Table-D1zuQkUf.js","./addEventListener-BtkycpkD.js","./index-IGtn9UM1.js","./RedoOutlined-B2jLc-U5.js","./DeleteOutlined-7aDqphvw.js","./relation-U6KzjBa5.js","./data-filter-C_njvQ_7.js","./association-page-DLC9R2Qp.js","./study-page-BuxTE7mG.js","./usePagination-BFzen1kl.js","./index-ROS2ditM.js","./index-CVH_8gwK.js","./index-D94Q12AR.js"])))=>i.map(i=>d[i]);
import{r as S,Y,f as z,aa as Se,W as be,O as q,bH as ze,a0 as xe,bI as we,a5 as Ce,a7 as ye,an as $e,b4 as Oe,bJ as Ee,j,S as Me,bK as Q,b as Ie,bq as Pe,e as _e,I as Re}from"./main-B2jPVJuc.js";import je from"./graph-view-BgzNJSxc.js";import{A as ke}from"./index-CVH_8gwK.js";import{R as Ne}from"./UpOutlined-BLGU6aq-.js";import"./index-01a6DBbv.js";import"./index-bd5EV77p.js";import"./Dropdown-DxVuU2Kw.js";import"./index-IGtn9UM1.js";import"./study-page-BuxTE7mG.js";import"./usePagination-BFzen1kl.js";import"./Table-D1zuQkUf.js";import"./addEventListener-BtkycpkD.js";import"./index-ROS2ditM.js";import"./RedoOutlined-B2jLc-U5.js";import"./NodeIndexOutlined-BQL8jy5-.js";import"./index-D94Q12AR.js";const Le=S.forwardRef((e,n)=>{const{prefixCls:a,className:o,children:t,size:h,style:i={}}=e,u=Y(`${a}-panel`,{[`${a}-panel-hidden`]:h===0},o),p=h!==void 0;return z.createElement("div",{ref:n,className:u,style:Object.assign(Object.assign({},i),{flexBasis:p?h:"auto",flexGrow:p?0:1})},t)}),Ve=()=>null;var Be=function(e,n){var a={};for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&n.indexOf(o)<0&&(a[o]=e[o]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var t=0,o=Object.getOwnPropertySymbols(e);t<o.length;t++)n.indexOf(o[t])<0&&Object.prototype.propertyIsEnumerable.call(e,o[t])&&(a[o[t]]=e[o[t]]);return a};function Ae(e){if(e&&typeof e=="object")return e;const n=!!e;return{start:n,end:n}}function Te(e){return S.useMemo(()=>Se(e).filter(S.isValidElement).map(a=>{const{props:o}=a,{collapsible:t}=o,h=Be(o,["collapsible"]);return Object.assign(Object.assign({},h),{collapsible:Ae(t)})}),[e])}function De(e,n,a){return S.useMemo(()=>{const o=[];for(let t=0;t<e.length-1;t+=1){const h=e[t],i=e[t+1],u=n[t],p=n[t+1],{resizable:m=!0,min:c,collapsible:$}=h,{resizable:I=!0,min:w,collapsible:s}=i,d=m&&I&&(u!==0||!c)&&(p!==0||!w),x=$.end&&u>0||s.start&&p===0&&u>0,r=s.start&&p>0||$.end&&u===0&&p>0;o[t]={resizable:d,startCollapsible:!!(a?r:x),endCollapsible:!!(a?x:r)}}return o},[n,e])}function ee(e){return Number(e.slice(0,-1))/100}function se(e){return typeof e=="string"&&e.endsWith("%")}function He(e,n){const a=e.map(s=>s.size),o=e.length,t=n||0,h=s=>s*t,[i,u]=z.useState(()=>e.map(s=>s.defaultSize)),p=z.useMemo(()=>{var s;const d=[];for(let x=0;x<o;x+=1)d[x]=(s=a[x])!==null&&s!==void 0?s:i[x];return d},[o,i,a]),m=z.useMemo(()=>{let s=[],d=0;for(let r=0;r<o;r+=1){const v=p[r];if(se(v))s[r]=ee(v);else if(v||v===0){const k=Number(v);Number.isNaN(k)||(s[r]=k/t)}else d+=1,s[r]=void 0}const x=s.reduce((r,v)=>r+(v||0),0);if(x>1||!d){const r=1/x;s=s.map(v=>v===void 0?0:v*r)}else{const r=(1-x)/d;s=s.map(v=>v===void 0?r:v)}return s},[p,t]),c=z.useMemo(()=>m.map(h),[m,t]),$=z.useMemo(()=>e.map(s=>se(s.min)?ee(s.min):(s.min||0)/t),[e,t]),I=z.useMemo(()=>e.map(s=>se(s.max)?ee(s.max):(s.max||t)/t),[e,t]);return[z.useMemo(()=>n?c:p,[c,n]),c,m,$,I,u]}function Xe(e,n,a,o,t,h){const i=e.map(l=>[l.min,l.max]),u=o||0,p=l=>l*u;function m(l,O){return typeof l=="string"?p(ee(l)):l??O}const[c,$]=S.useState([]),I=S.useRef([]),[w,s]=S.useState(null),d=()=>a.map(p);return[l=>{$(d()),s({index:l,confirmed:!1})},(l,O)=>{var y;let E=null;if((!w||!w.confirmed)&&O!==0){if(O>0)E=l,s({index:l,confirmed:!0});else for(let b=l;b>=0;b-=1)if(c[b]>0&&n[b].resizable){E=b,s({index:b,confirmed:!0});break}}const f=(y=E??(w==null?void 0:w.index))!==null&&y!==void 0?y:l,g=be(c),P=f+1,T=m(i[f][0],0),N=m(i[P][0],0),B=m(i[f][1],u),D=m(i[P][1],u);let M=O;return g[f]+M<T&&(M=T-g[f]),g[P]-M<N&&(M=g[P]-N),g[f]+M>B&&(M=B-g[f]),g[P]-M>D&&(M=g[P]-D),g[f]+=M,g[P]-=M,t(g),g},()=>{s(null)},(l,O)=>{const y=d(),E=h?O==="start"?"end":"start":O,f=E==="start"?l:l+1,g=E==="start"?l+1:l,P=y[f],T=y[g];if(P!==0&&T!==0)y[f]=0,y[g]+=P,I.current[l]=P;else{const N=P+T,B=m(i[f][0],0),D=m(i[f][1],u),M=m(i[g][0],0),b=m(i[g][1],u),_=Math.max(B,N-b),X=(Math.min(D,N-M)-_)/2,R=I.current[l],A=N-R;R&&R<=b&&R>=M&&A<=D&&A>=B?(y[g]=R,y[f]=A):(y[f]-=X,y[g]+=X)}return t(y),y},w==null?void 0:w.index]}function oe(e){return typeof e=="number"&&!Number.isNaN(e)?Math.round(e):0}const Ye=e=>{const{prefixCls:n,vertical:a,index:o,active:t,ariaNow:h,ariaMin:i,ariaMax:u,resizable:p,startCollapsible:m,endCollapsible:c,onOffsetStart:$,onOffsetUpdate:I,onOffsetEnd:w,onCollapse:s,lazy:d,containerSize:x}=e,r=`${n}-bar`,[v,k]=S.useState(null),[l,O]=S.useState(0),y=a?0:l,E=a?l:0,f=b=>{p&&b.currentTarget&&(k([b.pageX,b.pageY]),$(o))},g=b=>{if(p&&b.touches.length===1){const _=b.touches[0];k([_.pageX,_.pageY]),$(o)}},P=b=>{const _=x*h/100,H=_+b,X=Math.max(0,x*i/100),R=Math.min(x,x*u/100);return Math.max(X,Math.min(R,H))-_},T=q((b,_)=>{const H=P(a?_:b);O(H)}),N=q(()=>{I(o,y,E,!0),O(0)});z.useEffect(()=>{if(v){const b=R=>{const{pageX:A,pageY:U}=R,G=A-v[0],J=U-v[1];d?T(G,J):I(o,G,J)},_=()=>{d?N():w(),k(null)},H=R=>{if(R.touches.length===1){const A=R.touches[0],U=A.pageX-v[0],G=A.pageY-v[1];d?T(U,G):I(o,U,G)}},X=()=>{d&&N(),k(null),w()};return window.addEventListener("touchmove",H),window.addEventListener("touchend",X),window.addEventListener("mousemove",b),window.addEventListener("mouseup",_),()=>{window.removeEventListener("mousemove",b),window.removeEventListener("mouseup",_),window.removeEventListener("touchmove",H),window.removeEventListener("touchend",X)}}},[v,d,a,o,x,h,i,u]);const B={[`--${r}-preview-offset`]:`${l}px`},D=a?Ne:ze,M=a?xe:we;return z.createElement("div",{className:r,role:"separator","aria-valuenow":oe(h),"aria-valuemin":oe(i),"aria-valuemax":oe(u)},d&&z.createElement("div",{className:Y(`${r}-preview`,{[`${r}-preview-active`]:!!l}),style:B}),z.createElement("div",{className:Y(`${r}-dragger`,{[`${r}-dragger-disabled`]:!p,[`${r}-dragger-active`]:t}),onMouseDown:f,onTouchStart:g}),m&&z.createElement("div",{className:Y(`${r}-collapse-bar`,`${r}-collapse-bar-start`),onClick:()=>s(o,"start")},z.createElement(D,{className:Y(`${r}-collapse-icon`,`${r}-collapse-start`)})),c&&z.createElement("div",{className:Y(`${r}-collapse-bar`,`${r}-collapse-bar-end`),onClick:()=>s(o,"end")},z.createElement(M,{className:Y(`${r}-collapse-icon`,`${r}-collapse-end`)})))},Ue=e=>{const{componentCls:n}=e;return{[`&-rtl${n}-horizontal`]:{[`> ${n}-bar`]:{[`${n}-bar-collapse-previous`]:{insetInlineEnd:0,insetInlineStart:"unset"},[`${n}-bar-collapse-next`]:{insetInlineEnd:"unset",insetInlineStart:0}}},[`&-rtl${n}-vertical`]:{[`> ${n}-bar`]:{[`${n}-bar-collapse-previous`]:{insetInlineEnd:"50%",insetInlineStart:"unset"},[`${n}-bar-collapse-next`]:{insetInlineEnd:"50%",insetInlineStart:"unset"}}}}},Z={position:"absolute",top:"50%",left:{_skip_check_:!0,value:"50%"},transform:"translate(-50%, -50%)"},Fe=e=>{const{componentCls:n,colorFill:a,splitBarDraggableSize:o,splitBarSize:t,splitTriggerSize:h,controlItemBgHover:i,controlItemBgActive:u,controlItemBgActiveHover:p,prefixCls:m}=e,c=`${n}-bar`,$=`${n}-mask`,I=`${n}-panel`,w=e.calc(h).div(2).equal(),s=`${m}-bar-preview-offset`,d={position:"absolute",background:e.colorPrimary,opacity:.2,pointerEvents:"none",transition:"none",zIndex:1,display:"none"};return{[n]:Object.assign(Object.assign(Object.assign({},ye(e)),{display:"flex",width:"100%",height:"100%",alignItems:"stretch",[`> ${c}`]:{flex:"none",position:"relative",userSelect:"none",[`${c}-dragger`]:Object.assign(Object.assign({},Z),{zIndex:1,"&::before":Object.assign({content:'""',background:i},Z),"&::after":Object.assign({content:'""',background:a},Z),[`&:hover:not(${c}-dragger-active)`]:{"&::before":{background:u}},"&-active":{zIndex:2,"&::before":{background:p}},[`&-disabled${c}-dragger`]:{zIndex:0,"&, &:hover, &-active":{cursor:"default","&::before":{background:i}},"&::after":{display:"none"}}}),[`${c}-collapse-bar`]:Object.assign(Object.assign({},Z),{zIndex:e.zIndexPopupBase,background:i,fontSize:e.fontSizeSM,borderRadius:e.borderRadiusXS,color:e.colorText,cursor:"pointer",opacity:0,display:"flex",alignItems:"center",justifyContent:"center","@media(hover:none)":{opacity:1},"&:hover":{background:u},"&:active":{background:p}}),"&:hover, &:active":{[`${c}-collapse-bar`]:{opacity:1}}},[$]:{position:"fixed",zIndex:e.zIndexPopupBase,inset:0,"&-horizontal":{cursor:"col-resize"},"&-vertical":{cursor:"row-resize"}},"&-horizontal":{flexDirection:"row",[`> ${c}`]:{width:0,[`${c}-preview`]:Object.assign(Object.assign({height:"100%",width:t},d),{[`&${c}-preview-active`]:{display:"block",transform:`translateX(var(--${s}))`}}),[`${c}-dragger`]:{cursor:"col-resize",height:"100%",width:h,"&::before":{height:"100%",width:t},"&::after":{height:o,width:t}},[`${c}-collapse-bar`]:{width:e.fontSizeSM,height:e.controlHeightSM,"&-start":{left:{_skip_check_:!0,value:"auto"},right:{_skip_check_:!0,value:w},transform:"translateY(-50%)"},"&-end":{left:{_skip_check_:!0,value:w},right:{_skip_check_:!0,value:"auto"},transform:"translateY(-50%)"}}}},"&-vertical":{flexDirection:"column",[`> ${c}`]:{height:0,[`${c}-preview`]:Object.assign(Object.assign({height:t,width:"100%"},d),{[`&${c}-preview-active`]:{display:"block",transform:`translateY(var(--${s}))`}}),[`${c}-dragger`]:{cursor:"row-resize",width:"100%",height:h,"&::before":{width:"100%",height:t},"&::after":{width:o,height:t}},[`${c}-collapse-bar`]:{height:e.fontSizeSM,width:e.controlHeightSM,"&-start":{top:"auto",bottom:w,transform:"translateX(-50%)"},"&-end":{top:w,bottom:"auto",transform:"translateX(-50%)"}}}},[I]:{overflow:"auto",padding:"0 1px",scrollbarWidth:"thin",boxSizing:"border-box","&-hidden":{padding:0,overflow:"hidden"},[`&:has(${n}:only-child)`]:{overflow:"hidden"}}}),Ue(e))}},Ge=e=>{var n;const a=e.splitBarSize||2,o=e.splitTriggerSize||6,t=e.resizeSpinnerSize||20,h=(n=e.splitBarDraggableSize)!==null&&n!==void 0?n:t;return{splitBarSize:a,splitTriggerSize:o,splitBarDraggableSize:h,resizeSpinnerSize:t}},qe=Ce("Splitter",e=>[Fe(e)],Ge),We=e=>{const{prefixCls:n,className:a,style:o,layout:t="horizontal",children:h,rootClassName:i,onResizeStart:u,onResize:p,onResizeEnd:m,lazy:c}=e,{getPrefixCls:$,direction:I,className:w,style:s}=$e("splitter"),d=$("splitter",n),x=Oe(d),[r,v,k]=qe(d,x),l=t==="vertical",O=I==="rtl",y=!l&&O,E=Te(h),[f,g]=S.useState(),P=L=>{const{offsetWidth:C,offsetHeight:V}=L,F=l?V:C;F!==0&&g(F)},[T,N,B,D,M,b]=He(E,f),_=De(E,N,O),[H,X,R,A,U]=Xe(E,_,B,f,b,O),G=q(L=>{H(L),u==null||u(N)}),J=q((L,C,V)=>{const F=X(L,C);V?m==null||m(F):p==null||p(F)}),ae=q(()=>{R(),m==null||m(N)}),ie=q((L,C)=>{const V=A(L,C);p==null||p(V),m==null||m(V)}),le=Y(d,a,`${d}-${t}`,{[`${d}-rtl`]:O},i,w,k,x,v),re=`${d}-mask`,W=z.useMemo(()=>{const L=[];let C=0;for(let V=0;V<E.length;V+=1)C+=B[V],L.push(C);return L},[B]),ce=Object.assign(Object.assign({},s),o);return r(z.createElement(Ee,{onResize:P},z.createElement("div",{style:ce,className:le},E.map((L,C)=>{const V=z.createElement(Le,Object.assign({},L,{prefixCls:d,size:T[C]}));let F=null;const K=_[C];if(K){const de=(W[C-1]||0)+D[C],ue=(W[C+1]||100)-M[C+1],pe=(W[C-1]||0)+M[C],fe=(W[C+1]||100)-D[C+1];F=z.createElement(Ye,{lazy:c,index:C,active:U===C,prefixCls:d,vertical:l,resizable:K.resizable,ariaNow:W[C]*100,ariaMin:Math.max(de,ue)*100,ariaMax:Math.min(pe,fe)*100,startCollapsible:K.startCollapsible,endCollapsible:K.endCollapsible,onOffsetStart:G,onOffsetUpdate:(me,ge,he,ve)=>{let ne=l?he:ge;y&&(ne=-ne),J(me,ne,ve)},onOffsetEnd:ae,onCollapse:ie,containerSize:f||0})}return z.createElement(z.Fragment,{key:`split-panel-${C}`},V,F)}),typeof U=="number"&&z.createElement("div",{"aria-hidden":!0,className:Y(re,`${re}-${t}`)}))))},te=We;te.Panel=Ve;const Qe=S.lazy(()=>Q(()=>import("./chat-j4NJQdo8.js"),__vite__mapDeps([0,1,2,3,4,5,6]),import.meta.url)),Je=S.lazy(()=>Q(()=>import("./index-NMNIwub9.js"),__vite__mapDeps([7,1,2,4,5,6,8,9,10,11,12]),import.meta.url)),Ke=S.lazy(()=>Q(()=>import("./relation-U6KzjBa5.js"),__vite__mapDeps([13,1,2,4,5,6,12,11]),import.meta.url)),Ze=S.lazy(()=>Q(()=>import("./data-filter-C_njvQ_7.js"),__vite__mapDeps([14,1,2,4,5,6,8,9,10,3]),import.meta.url)),et=S.lazy(()=>Q(()=>import("./association-page-DLC9R2Qp.js"),__vite__mapDeps([15,1,2,16,17,8,9,6,10,18,11,19,5,20]),import.meta.url)),tt=[{key:"chat",label:"ai chat",component:Qe},{key:"details",label:"details",component:Je},{key:"relation",label:"relationship",component:Ke},{key:"dataFilter",label:"data screening",component:Ze},{key:"associationPage",label:"data screening",component:et}],nt=({graphOpt:e,height:n,data:a,queryParams:o,view:t,close:h,ref:i})=>{if(!t)return j.jsx("div",{onClick:h,children:"未知类型"});const u=tt.find($=>$.key===t);if(!u)return j.jsx("div",{children:"未知类型"});const{component:p,key:m,...c}=u;return j.jsx(S.Suspense,{fallback:j.jsx(Me,{active:!0}),children:j.jsx(p,{close:h,data:a,queryParams:o,...c,height:n,graphOpt:e,ref:i})})},st=je,{Option:zt}=_e,{Search:xt}=Re,wt=()=>{const[e,n]=z.useState(["100%","0%"]),[a,o]=S.useState(null),[t,h]=S.useState(),i=S.useRef(null),u=S.useRef(null),[p,m]=S.useState({}),{modal:c,openModal:$,closeModal:I}=Ie(),w=()=>{var f,g;(f=u.current)!=null&&f.reload&&((g=u.current)==null||g.reload())},s=S.useRef(null),[d,x]=S.useState(null),r=()=>{if(s.current){const f=s.current.getBoundingClientRect().top;x(window.innerHeight-f)}};S.useEffect(()=>(r(),window.addEventListener("resize",r),()=>{window.removeEventListener("resize",r)}),[]);const v=()=>{i.current&&i.current.reload()},k=()=>{i.current&&i.current.cancelSelectLink()},l=()=>{i.current&&i.current.cancelSelectNode()},O=(f,g)=>{i.current&&i.current.updateQueryParam(f,g)},[y,E]=S.useState(e);return S.useEffect(()=>{const f=requestAnimationFrame(()=>E(e));return()=>cancelAnimationFrame(f)},[e]),j.jsx("div",{style:{padding:"1rem 1rem 0 1rem  "},children:j.jsxs("div",{ref:s,children:[j.jsx(Pe,{theme:{components:{Splitter:{splitBarSize:5,splitTriggerSize:30}}},children:j.jsxs(te,{onResize:n,children:[j.jsx(te.Panel,{size:y[0],min:"20%",style:{paddingRight:`${a?"0.5rem":"0"}`},children:j.jsx(st,{ref:i,height:d,openGlobalModal:$,updateQueryParams:m,openView:(f,g)=>{o(f),n(["70%","30%"]),g&&h(g)},activeView:a})}),a&&j.jsx(te.Panel,{size:y[1],min:"20%",style:{paddingLeft:`${a?"0.5rem":"0"}`,overflow:"hidden"},children:j.jsx(nt,{ref:u,graphOpt:{loadGraph:v,openModal:$,updateQueryParam:O,cancelSelectLink:k,cancelSelectNode:l},queryParams:p,height:d,data:t,view:a,close:()=>{o(null),h(null),n(["100%","0%"]),k(),l()}})})]})}),j.jsx(ke,{callback:()=>{w(),v()},visible:c.key=="optModal"&&c.visible,params:c.params,onClose:I})]})})};export{wt as default};
