import{r as s,v as h,_ as y,j as t,R as j,o as b,e as v,cr as C,E as R,g as w,aq as $,a as k}from"./index-B1qN1Q03.js";import{C as g}from"./index-D5ZHtm1i.js";import"./index-Bt44_A0u.js";import"./Dropdown-BbOf2_FP.js";var p={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M758.2 839.1C851.8 765.9 912 651.9 912 523.9 912 303 733.5 124.3 512.6 124 291.4 123.7 112 302.8 112 523.9c0 125.2 57.5 236.9 147.6 310.2 3.5 2.8 8.6 2.2 11.4-1.3l39.4-50.5c2.7-3.4 2.1-8.3-1.2-11.1-8.1-6.6-15.9-13.7-23.4-21.2a318.64 318.64 0 01-68.6-101.7C200.4 609 192 567.1 192 523.9s8.4-85.1 25.1-124.5c16.1-38.1 39.2-72.3 68.6-101.7 29.4-29.4 63.6-52.5 101.7-68.6C426.9 212.4 468.8 204 512 204s85.1 8.4 124.5 25.1c38.1 16.1 72.3 39.2 101.7 68.6 29.4 29.4 52.5 63.6 68.6 101.7 16.7 39.4 25.1 81.3 25.1 124.5s-8.4 85.1-25.1 124.5a318.64 318.64 0 01-68.6 101.7c-9.3 9.3-19.1 18-29.3 26L668.2 724a8 8 0 00-14.1 3l-39.6 162.2c-1.2 5 2.6 9.9 7.7 9.9l167 .8c6.7 0 10.5-7.7 6.3-12.9l-37.3-47.9z"}}]},name:"redo",theme:"outlined"},E=function(n,l){return s.createElement(h,y({},n,{ref:l,icon:p}))},_=s.forwardRef(E);const O=({data:e})=>t.jsx("div",{style:{display:"flex",alignItems:"center",flexWrap:"wrap",gap:4},children:e.map((n,l)=>t.jsxs(j.Fragment,{children:[t.jsx(b,{title:`${n.rank} (tax_id: ${n.tax_id})`,children:t.jsx("span",{style:{padding:"2px 6px",borderRadius:4,backgroundColor:"#f0f2f5",cursor:"pointer",transition:"background 0.3s"},onMouseEnter:i=>i.currentTarget.style.backgroundColor="#e6f7ff",onMouseLeave:i=>i.currentTarget.style.backgroundColor="#f0f2f5",children:n.entity_name})}),l<e.length-1&&t.jsx("span",{style:{margin:"0 4px"},children:"→"})]},n.tax_id))}),D=({data:e,close:n,height:l,...i})=>{const[o,d]=s.useState(),[x,a]=s.useState(!1),[f,u]=v.useMessage(),c=async()=>{if(e!=null&&e.label&&(e!=null&&e.id)){try{a(!0);const r=await k.get(`/entity/details/${e==null?void 0:e.label}/${e==null?void 0:e.id}`);d(r.data)}catch(r){d(null),console.log(r),f.error("数据加载失败!")}a(!1)}else d(null)};return s.useEffect(()=>{c()},[JSON.stringify(e)]),t.jsxs("div",{style:{width:"100%",height:"100%",justifyContent:"center"},children:[u,t.jsx(g,{loading:x,title:`${i==null?void 0:i.label}(${e==null?void 0:e.entity_name})`,styles:{body:{padding:0,height:"100%"}},size:"small",extra:t.jsx(t.Fragment,{children:t.jsxs(w,{gap:"small",children:[t.jsx($,{onClick:n}),t.jsx(_,{onClick:c})]})}),style:{borderRadius:"12px",boxShadow:"0 4px 20px rgba(0,0,0,0.1)",padding:"0.5rem",overflow:"hidden",height:l},children:t.jsx("div",{style:{height:"100%",overflowY:"auto"},children:o?t.jsxs(t.Fragment,{children:[t.jsx(g,{title:"Lineage",style:{marginTop:"1rem"},styles:{body:{padding:"0.5rem"}},size:"small",children:t.jsx(O,{data:o.lineage})}),t.jsx(C,{}),JSON.stringify(o)]}):t.jsx(R,{description:JSON.stringify(e)})})})]})};export{D as default};
