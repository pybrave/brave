import{j as n,R as a,o as b,r as c,e as C,ct as R,E as $,g as k,P as v,a as y,aq as _}from"./index-CWx5cHtj.js";import{C as h}from"./index-BhpvB4Wv.js";import{R as T}from"./DeleteOutlined-GCbL2R9N.js";import{R as w}from"./RedoOutlined-Dowy_FkJ.js";import{T as E}from"./index-Cd94iWUf.js";import"./index-BgXoXwrY.js";import"./index-BAlUq73q.js";const F=({data:e})=>n.jsx("div",{style:{display:"flex",alignItems:"center",flexWrap:"wrap",gap:4},children:Array.isArray(e)&&e.map((t,i)=>n.jsxs(a.Fragment,{children:[n.jsx(b,{title:`${t.rank} (tax_id: ${t.tax_id})`,children:n.jsx("span",{style:{padding:"2px 6px",borderRadius:4,backgroundColor:"#f0f2f5",cursor:"pointer",transition:"background 0.3s"},onMouseEnter:o=>o.currentTarget.style.backgroundColor="#e6f7ff",onMouseLeave:o=>o.currentTarget.style.backgroundColor="#f0f2f5",children:t.entity_name})}),i<e.length-1&&n.jsx("span",{style:{margin:"0 4px"},children:"→"})]},t.tax_id))}),I=({data:e})=>n.jsx(n.Fragment,{children:n.jsx(h,{title:"Lineage",style:{marginTop:"1rem"},styles:{body:{padding:"0.5rem"}},size:"small",children:n.jsx(F,{data:e.lineage})})}),L=[{key:"taxonomy",label:"taxonomy",component:I}],M=({data:e,view:t})=>{if(!t)return n.jsxs("div",{children:["未知类型",t]});const i=L.find(l=>l.key===t);if(!i)return n.jsxs("div",{children:["未知类型",t]});const{component:o,key:s,...d}=i;return n.jsx(o,{data:e,...d})},P=({data:e,close:t,height:i,graphOpt:o,...s})=>{const[d,l]=c.useState(),[j,x]=c.useState(!1),[g,u]=C.useMessage(),f=async()=>{if(e!=null&&e.label&&(e!=null&&e.id)){try{x(!0);const r=await y.get(`/entity/details/${e==null?void 0:e.label}/${e==null?void 0:e.id}`);l(r.data)}catch(r){l(null),console.log(r),g.error("数据加载失败!")}x(!1)}else l(null)};return c.useEffect(()=>{f()},[JSON.stringify(e)]),n.jsxs("div",{children:[u,n.jsx(h,{loading:j,title:n.jsxs(n.Fragment,{children:[`${s==null?void 0:s.label}(${e==null?void 0:e.entity_name})`,n.jsx(E,{style:{marginLeft:"0.5rem"},children:e==null?void 0:e.label})]}),styles:{body:{padding:0,height:"100%"}},size:"small",extra:n.jsx(n.Fragment,{children:n.jsxs(k,{gap:"small",children:[n.jsx(v,{title:`删除${e==null?void 0:e.entity_name} (${e==null?void 0:e.node_id})?`,onConfirm:async()=>{await y.delete(`/entity/node-id/${e==null?void 0:e.node_id}`),g.success("删除成功"),t(),o.loadGraph()},children:n.jsx(T,{})}),n.jsx(w,{onClick:f}),n.jsx(_,{onClick:t})]})}),style:{borderRadius:"12px",boxShadow:"0 4px 20px rgba(0,0,0,0.1)",padding:"0.5rem",overflow:"hidden",height:i},children:n.jsx("div",{style:{height:"100%",overflowY:"auto"},children:d?n.jsxs(n.Fragment,{children:[n.jsx(M,{data:d,view:e.label}),n.jsx(R,{})]}):n.jsx($,{description:JSON.stringify(e)})})})]})};export{M as ComponentsRender,P as default,L as viewMapping};
